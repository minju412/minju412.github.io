---
title:  "[Redis] production í™˜ê²½ì—ì„œ connect-redisë¥¼ ì´ìš©í•´ memoryStore ì‚¬ìš©í•˜ê¸°"

categories:
  - Redis
tags:
  - [Redis]

toc: true
toc_sticky: true
 
date: 2022-05-24 18:53:11
last_modified_at: 2022-05-24 18:53:14
---
# connect-redis ì„¤ì¹˜í•˜ê¸°
```
npm i connect-redis
```
ë§Œì•½ redisì™€ express-sessionì´ ì„¤ì¹˜ë˜ì–´ìˆì§€ ì•Šë‹¤ë©´...
```
npm install redis connect-redis express-session
```

# server.js ì½”ë“œ ë³€ê²½
```js
var session = require('express-session');
. . .
var RedisStore = require('connect-redis')(session);
var redisClient = require('redis').createClient({url: process.env.REDIS_URL});
var redisOptions = {
        client: redisClient,
        no_ready_check: true,
        ttl: 600,
        logErrors: true
};
var redisSessionStore = new RedisStore(redisOptions);

app.use(session({
    saveUninitialized: false,
    resave: false,
    secret: process.env.COOKIE_SECRET,
    store: redisSessionStore,
    cookie: {
        httpOnly: true,
        secure: false,
    }
}));
```

# npm script ë³€ê²½
## cross-env ì„¤ì¹˜
```
npm i cross-env
```
## start script ë³€ê²½
start scriptëŠ” package.jsonì—ì„œ ë³€ê²½í•œë‹¤.
```
"scripts": {
    "start": "cross-env NODE_ENV=production node bin/www.js"
  },
```



# ğŸ“ ì°¸ê³ 
[npm ê³µì‹](https://www.npmjs.com/package/connect-redis) <br>
[ë¦¬ë·°ë‚˜ë¼](http://daplus.net/node-js-%ED%94%84%EB%A1%9C%EB%8D%95%EC%85%98%EC%97%90%EC%84%9C-memorystore-%EC%82%AC%EC%9A%A9/) <br>


***
<br>

    ğŸ’› ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ğŸ‘»

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}