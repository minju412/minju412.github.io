---
title:  "[SPRING] JPA ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ - 2. ë„ë©”ì¸ ë¶„ì„ ì„¤ê³„ "

categories:
  - Spring
tags:
  - [Framework, Spring, Java]

toc: true
toc_sticky: true
 
date: 2022-07-08 02:38:29
last_modified_at: 2022-07-08 02:38:32
---

# 1. ìš”êµ¬ì‚¬í•­ ë¶„ì„ - ê¸°ëŠ¥ ëª©ë¡
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-07-08 á„‹á…©á„’á…® 2 20 49](https://user-images.githubusercontent.com/59405576/177922408-29578133-250a-4f61-8f59-7e490ae206f1.png)<br><br>
- íšŒì› ê¸°ëŠ¥<br>
â€¢ íšŒì› ë“±ë¡<br>
â€¢ íšŒì› ì¡°íšŒ
- ìƒí’ˆ ê¸°ëŠ¥<br>
â€¢ ìƒí’ˆ ë“±ë¡<br>
â€¢ ìƒí’ˆ ìˆ˜ì •<br>
â€¢ ìƒí’ˆ ì¡°íšŒ
- ì£¼ë¬¸ ê¸°ëŠ¥ <br>
â€¢ ìƒí’ˆ ì£¼ë¬¸<br>
â€¢ ì£¼ë¬¸ ë‚´ì—­ ì¡°íšŒ<br>
â€¢ ì£¼ë¬¸ ì·¨ì†Œ
- ê¸°íƒ€ ìš”êµ¬ì‚¬í•­<br>
â€¢ ìƒí’ˆì€ ì¬ê³  ê´€ë¦¬ê°€ í•„ìš”í•˜ë‹¤.<br>
â€¢ ìƒí’ˆì˜ ì¢…ë¥˜ëŠ” ë„ì„œ, ìŒë°˜, ì˜í™”ê°€ ìˆë‹¤. <br>
â€¢ ìƒí’ˆì„ ì¹´í…Œê³ ë¦¬ë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤.

# 2. ë„ë©”ì¸ ëª¨ë¸ê³¼ í…Œì´ë¸” ì„¤ê³„
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-07-08 á„‹á…©á„’á…® 2 24 43](https://user-images.githubusercontent.com/59405576/177922840-127875e2-73bc-491e-b680-f233f4179c13.png)
- íšŒì›, ì£¼ë¬¸, ìƒí’ˆì˜ ê´€ê³„: íšŒì›ì€ ì—¬ëŸ¬ ìƒí’ˆì„ ì£¼ë¬¸í•  ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  í•œ ë²ˆ ì£¼ë¬¸í•  ë•Œ ì—¬ëŸ¬ ìƒí’ˆì„ ì„ íƒí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì£¼ë¬¸ê³¼ ìƒí’ˆì€ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë‹¤. <br>
í•˜ì§€ë§Œ ì´ëŸ° ë‹¤ëŒ€ë‹¤ ê´€ê³„ëŠ” ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ëŠ” ë¬¼ë¡ ì´ê³  ì—”í‹° í‹°ì—ì„œë„ ê±°ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤. <br>
ë”°ë¼ì„œ ê·¸ë¦¼ì²˜ëŸ¼ ì£¼ë¬¸ìƒí’ˆì´ë¼ëŠ” ì—”í‹°í‹°ë¥¼ ì¶”ê°€í•´ì„œ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ ì¼ëŒ€ ë‹¤, ë‹¤ëŒ€ì¼ ê´€ê³„ë¡œ í’€ì–´ëƒˆë‹¤.
- ìƒí’ˆ ë¶„ë¥˜: ìƒí’ˆì€ ë„ì„œ, ìŒë°˜, ì˜í™”ë¡œ êµ¬ë¶„ë˜ëŠ”ë° ìƒí’ˆì´ë¼ëŠ” ê³µí†µ ì†ì„±ì„ ì‚¬ìš©í•˜ë¯€ë¡œ ìƒì† êµ¬ì¡°ë¡œ í‘œí˜„í–ˆë‹¤.
## íšŒì› ì—”í‹°í‹° ë¶„ì„
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-07-08 á„‹á…©á„’á…® 2 25 31](https://user-images.githubusercontent.com/59405576/177922922-ed940a69-6384-4549-8946-7a80e56e72b9.png)
- íšŒì›(Member): ì´ë¦„ê³¼ ì„ë² ë””ë“œ íƒ€ì…ì¸ ì£¼ì†Œ( `Address` ), ê·¸ë¦¬ê³  ì£¼ë¬¸( `orders` ) ë¦¬ìŠ¤íŠ¸ë¥¼ ê°€ì§„ë‹¤.
- ì£¼ë¬¸(Order): í•œ ë²ˆ ì£¼ë¬¸ì‹œ ì—¬ëŸ¬ ìƒí’ˆì„ ì£¼ë¬¸í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì£¼ë¬¸ê³¼ ì£¼ë¬¸ìƒí’ˆ( `OrderItem` )ì€ ì¼ëŒ€ë‹¤ ê´€ê³„ë‹¤. <br>
ì£¼ë¬¸ì€ ìƒí’ˆì„ ì£¼ë¬¸í•œ íšŒì›ê³¼ ë°°ì†¡ ì •ë³´, ì£¼ë¬¸ ë‚ ì§œ, ì£¼ë¬¸ ìƒíƒœ( `status` )ë¥¼ ê°€ì§€ê³  ìˆë‹¤. <br>
ì£¼ë¬¸ ìƒíƒœëŠ” ì—´ê±°í˜•ì„ ì‚¬ìš©í–ˆëŠ”ë° ì£¼ë¬¸( `ORDER` ), ì·¨ì†Œ( `CANCEL` )ì„ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.
- ì£¼ë¬¸ìƒí’ˆ(OrderItem): ì£¼ë¬¸í•œ ìƒí’ˆ ì •ë³´ì™€ ì£¼ë¬¸ ê¸ˆì•¡( `orderPrice` ), ì£¼ë¬¸ ìˆ˜ëŸ‰( `count` ) ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆë‹¤. <br>
(ë³´í†µ `OrderLine` , `LineItem` ìœ¼ë¡œ ë§ì´ í‘œí˜„í•œë‹¤.)
- ìƒí’ˆ(Item): ì´ë¦„, ê°€ê²©, ì¬ê³ ìˆ˜ëŸ‰( `stockQuantity` )ì„ ê°€ì§€ê³  ìˆë‹¤. ìƒí’ˆì„ ì£¼ë¬¸í•˜ë©´ ì¬ê³ ìˆ˜ëŸ‰ì´ ì¤„ì–´ë“ ë‹¤. <br>
ìƒí’ˆì˜ ì¢…ë¥˜ë¡œëŠ” ë„ì„œ, ìŒë°˜, ì˜í™”ê°€ ìˆëŠ”ë° ê°ê°ì€ ì‚¬ìš©í•˜ëŠ” ì†ì„±ì´ ì¡°ê¸ˆì”© ë‹¤ë¥´ë‹¤.
- ë°°ì†¡(Delivery): ì£¼ë¬¸ì‹œ í•˜ë‚˜ì˜ ë°°ì†¡ ì •ë³´ë¥¼ ìƒì„±í•œë‹¤. ì£¼ë¬¸ê³¼ ë°°ì†¡ì€ ì¼ëŒ€ì¼ ê´€ê³„ë‹¤. 
- ì¹´í…Œê³ ë¦¬(Category): ìƒí’ˆê³¼ ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ ë§ºëŠ”ë‹¤. `parent` , `child` ë¡œ ë¶€ëª¨, ìì‹ ì¹´í…Œê³ ë¦¬ë¥¼ ì—°ê²°í•œë‹¤.
- ì£¼ì†Œ(Address): ê°’ íƒ€ì…(ì„ë² ë””ë“œ íƒ€ì…)ì´ë‹¤. íšŒì›ê³¼ ë°°ì†¡(Delivery)ì—ì„œ ì‚¬ìš©í•œë‹¤.

> ì°¸ê³ <br>
íšŒì› ì—”í‹°í‹° ë¶„ì„ ê·¸ë¦¼ì—ì„œ Orderì™€ Deliveryê°€ ë‹¨ë°©í–¥ ê´€ê³„ë¡œ ì˜ëª» ê·¸ë ¤ì ¸ ìˆë‹¤. ì–‘ë°©í–¥ ê´€ê³„ê°€ ë§ë‹¤.

> ì°¸ê³ <br>
íšŒì›ì´ ì£¼ë¬¸ì„ í•˜ê¸° ë•Œë¬¸ì—, íšŒì›ì´ ì£¼ë¬¸ë¦¬ìŠ¤íŠ¸ë¥¼ ê°€ì§€ëŠ” ê²ƒì€ ì–¼í• ë³´ë©´ ì˜ ì„¤ê³„í•œ ê²ƒ ê°™ì§€ë§Œ, ê°ì²´ ì„¸ìƒì€ ì‹¤ì œ ì„¸ê³„ì™€ëŠ” ë‹¤ë¥´ë‹¤. <br>
ì‹¤ë¬´ì—ì„œëŠ” íšŒì›ì´ ì£¼ë¬¸ì„ ì°¸ì¡°í•˜ì§€ ì•Šê³ , ì£¼ë¬¸ì´ íšŒì›ì„ ì°¸ì¡°í•˜ëŠ” ê²ƒìœ¼ë¡œ ì¶©ë¶„í•˜ë‹¤. <br>
ì—¬ê¸°ì„œëŠ” ì¼ëŒ€ë‹¤, ë‹¤ëŒ€ì¼ì˜ ì–‘ë°©í–¥ ì—°ê´€ê´€ê³„ë¥¼ ì„¤ëª…í•˜ê¸° ìœ„í•´ì„œ ì¶”ê°€í–ˆë‹¤.

## íšŒì› í…Œì´ë¸” ë¶„ì„
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-07-08 á„‹á…©á„’á…® 2 29 59](https://user-images.githubusercontent.com/59405576/177923382-986f9ac6-37a9-4c5d-b664-a004b7d8df3f.png)

- MEMBER: íšŒì› ì—”í‹°í‹°ì˜ `Address` ì„ë² ë””ë“œ íƒ€ì… ì •ë³´ê°€ íšŒì› í…Œì´ë¸”ì— ê·¸ëŒ€ë¡œ ë“¤ì–´ê°”ë‹¤. ì´ê²ƒì€ `DELIVERY` í…Œì´ë¸”ë„ ë§ˆì°¬ê°€ì§€ë‹¤.
- ITEM: ì•¨ë²”, ë„ì„œ, ì˜í™” íƒ€ì…ì„ í†µí•©í•´ì„œ í•˜ë‚˜ì˜ í…Œì´ë¸”ë¡œ ë§Œë“¤ì—ˆë‹¤. `DTYPE` ì»¬ëŸ¼ìœ¼ë¡œ íƒ€ì…ì„ êµ¬ë¶„í•œë‹¤.

> ì°¸ê³ <br>
í…Œì´ë¸”ëª…ì´ `ORDER` ê°€ ì•„ë‹ˆë¼ `ORDERS` ì¸ ê²ƒì€ ë°ì´í„°ë² ì´ìŠ¤ê°€ `order by` ë•Œë¬¸ì— ì˜ˆì•½ì–´ë¡œ ì¡ê³  ìˆëŠ” ê²½ìš°ê°€ ë§ë‹¤. <br>
ê·¸ë˜ì„œ ê´€ë¡€ìƒ `ORDERS` ë¥¼ ë§ì´ ì‚¬ìš©í•œë‹¤.

> ì°¸ê³ <br>
ìœ„ ì‚¬ì§„ì—ì„œëŠ” ê°ì²´ì™€ ì°¨ì´ë¥¼ ë‚˜íƒ€ë‚´ê¸° ìœ„í•´ ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸”, ì»¬ëŸ¼ëª…ì„ ëŒ€ë¬¸ìë¥¼ ì‚¬ìš©í–ˆì§€ë§Œ,<br>
ì‹¤ì œ ì½”ë“œì—ì„œëŠ” DBì— ì†Œë¬¸ì + _(ì–¸ë”ìŠ¤ì½”ì–´) ìŠ¤íƒ€ì¼ì„ ì‚¬ìš©í•  ê²ƒì´ë‹¤.

## ì—°ê´€ê´€ê³„ ë§¤í•‘ ë¶„ì„
- íšŒì›ê³¼ ì£¼ë¬¸: ì¼ëŒ€ë‹¤ , ë‹¤ëŒ€ì¼ì˜ ì–‘ë°©í–¥ ê´€ê³„ë‹¤. <br>
ë”°ë¼ì„œ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì„ ì •í•´ì•¼í•˜ëŠ”ë°, ì™¸ë˜ í‚¤ê°€ ìˆëŠ” ì£¼ ë¬¸ì„ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì •í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. <br>
ê·¸ëŸ¬ë¯€ë¡œ `Order.member` ë¥¼ `ORDERS.MEMBER_ID` ì™¸ë˜ í‚¤ì™€ ë§¤í•‘í•œë‹¤.
- ì£¼ë¬¸ìƒí’ˆê³¼ ì£¼ë¬¸: ë‹¤ëŒ€ì¼ ì–‘ë°©í–¥ ê´€ê³„ë‹¤. <br>
ì™¸ë˜ í‚¤ê°€ ì£¼ë¬¸ìƒí’ˆì— ìˆìœ¼ë¯€ë¡œ ì£¼ë¬¸ìƒí’ˆì´ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì´ë‹¤. <br>
ê·¸ëŸ¬ë¯€ë¡œ `OrderItem.order` ë¥¼ `ORDER_ITEM.ORDER_ID` ì™¸ë˜ í‚¤ì™€ ë§¤í•‘í•œë‹¤.
- ì£¼ë¬¸ìƒí’ˆê³¼ ìƒí’ˆ: ë‹¤ëŒ€ì¼ ë‹¨ë°©í–¥ ê´€ê³„ë‹¤. <br>
`OrderItem.item` ì„ `ORDER_ITEM.ITEM_ID` ì™¸ë˜ í‚¤ì™€ ë§¤í•‘í•œë‹¤.
- ì£¼ë¬¸ê³¼ ë°°ì†¡: ì¼ëŒ€ì¼ ì–‘ë°©í–¥ ê´€ê³„ë‹¤. <br>
`Order.delivery` ë¥¼ `ORDERS.DELIVERY_ID` ì™¸ë˜ í‚¤ì™€ ë§¤í•‘í•œë‹¤. 
- ì¹´í…Œê³ ë¦¬ì™€ ìƒí’ˆ: `@ManyToMany` ë¥¼ ì‚¬ìš©í•´ì„œ ë§¤í•‘í•œë‹¤.<br>
(ğŸš¨ ì‹¤ë¬´ì—ì„œ `@ManyToMany`ëŠ” ì‚¬ìš©í•˜ì§€ ë§ì. ì—¬ê¸°ì„œëŠ” ë‹¤ëŒ€ë‹¤ ê´€ê³„ë¥¼ ì˜ˆì œë¡œ ë³´ì—¬ì£¼ê¸° ìœ„í•´ ì¶”ê°€í–ˆì„ ë¿ì´ë‹¤)

> ì°¸ê³ <br>
ì™¸ë˜ í‚¤ê°€ ìˆëŠ” ê³³ì„ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì •í•˜ì!<br>
ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ì€ ë‹¨ìˆœíˆ ì™¸ë˜ í‚¤ë¥¼ ëˆ„ê°€ ê´€ë¦¬í•˜ëƒì˜ ë¬¸ì œì´ì§€ ë¹„ì¦ˆë‹ˆìŠ¤ìƒ ìš°ìœ„ì— ìˆë‹¤ê³  ì£¼ì¸ìœ¼ë¡œ ì •í•˜ë©´ ì•ˆëœë‹¤. <br>
ì˜ˆë¥¼ ë“¤ì–´ì„œ ìë™ì°¨ì™€ ë°”í€´ê°€ ìˆìœ¼ë©´, ì¼ëŒ€ë‹¤ ê´€ê³„ì—ì„œ í•­ìƒ ë‹¤ìª½ì— ì™¸ë˜ í‚¤ê°€ ìˆìœ¼ë¯€ë¡œ ì™¸ë˜ í‚¤ê°€ ìˆëŠ” ë°”í€´ë¥¼ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì •í•˜ë©´ ëœë‹¤. 

# 3. ì—”í‹°í‹° í´ë˜ìŠ¤ ê°œë°œ
> ì°¸ê³ <br>
ì˜ˆì œì—ì„œëŠ” ì„¤ëª…ì„ ì‰½ê²Œí•˜ê¸° ìœ„í•´ ì—”í‹°í‹° í´ë˜ìŠ¤ì— Getter, Setterë¥¼ ëª¨ë‘ ì—´ê³ , ìµœëŒ€í•œ ë‹¨ìˆœí•˜ê²Œ ì„¤ê³„í–ˆì§€ë§Œ, <br>
ì‹¤ë¬´ì—ì„œëŠ” ê°€ê¸‰ì  GetterëŠ” ì—´ì–´ë‘ê³ , SetterëŠ” ê¼­ í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤.<br><br>
GetterëŠ” ì•„ë¬´ë¦¬ í˜¸ì¶œí•´ë„ í˜¸ì¶œ í•˜ëŠ” ê²ƒ ë§Œìœ¼ë¡œ ì–´ë–¤ ì¼ì´ ë°œìƒí•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. í•˜ì§€ë§Œ Setterë¥¼ í˜¸ì¶œí•˜ë©´ ë°ì´í„°ê°€ ë³€í•œë‹¤. <br>
Setterë¥¼ ë§‰ ì—´ì–´ë‘ë©´ ê°€ê¹Œìš´ ë¯¸ë˜ì— ì—”í‹°í‹°ì—ê°€ ë„ëŒ€ì²´ ì™œ ë³€ê²½ë˜ëŠ”ì§€ ì¶”ì í•˜ê¸° ì ì  í˜ë“¤ì–´ì§„ë‹¤. <br>
ê·¸ë˜ì„œ ì—”í‹°í‹°ë¥¼ ë³€ê²½í•  ë•ŒëŠ” Setter ëŒ€ì‹ ì— ë³€ê²½ ì§€ì ì´ ëª…í™•í•˜ë„ë¡ ë³€ê²½ì„ ìœ„í•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë©”ì„œë“œë¥¼ ë³„ë„ë¡œ ì œê³µí•´ì•¼ í•œë‹¤.

## íšŒì›(Member) ì—”í‹°í‹°
`src/main/java/jpabook/jpashop/domain/Member.java`
```java
@Entity
@Getter @Setter
public class Member {

    @Id @GeneratedValue // ìë™ìœ¼ë¡œ ìƒì„±ëœë‹¤.
    @Column(name = "member_id")
    private Long id;

    private String name;

    @Embedded
    private Address address;

    @OneToMany(mappedBy = "member") // í•œ ëª…ì˜ íšŒì›ì´ ì—¬ëŸ¬ ê°œì˜ ìƒí’ˆì„ ì£¼ë¬¸í•œë‹¤. // Order í…Œì´ë¸”ì— ìˆëŠ” memberê°€ ì—°ê´€ê´€ê³„ ì£¼ì¸ì´ê³ , ë‚˜ëŠ ê±°ìš¸ì´ë‹¤. (ì—¬ê¸°ì— ê°’ì„ ë„£ì–´ë„ FKê°€ ë³€ê²½ë˜ì§€ ì•ŠëŠ”ë‹¤.)
    private List<Order> orders = new ArrayList<>();

}
```
>  ì°¸ê³ <br>
ì—”í‹°í‹°ì˜ ì‹ë³„ìëŠ” `id` ë¥¼ ì‚¬ìš©í•˜ê³  PK ì»¬ëŸ¼ëª…ì€ `member_id` ë¥¼ ì‚¬ìš©í–ˆë‹¤. <br>
ì—”í‹°í‹°ëŠ” íƒ€ì…(ì—¬ê¸°ì„œëŠ” `Member` )ì´ ìˆìœ¼ë¯€ë¡œ `id` í•„ë“œë§Œìœ¼ë¡œ ì‰½ê²Œ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤. <br>
í…Œì´ë¸”ì€ íƒ€ì…ì´ ì—†ìœ¼ë¯€ë¡œ êµ¬ë¶„ì´ ì–´ë µë‹¤. ê·¸ë¦¬ê³  í…Œì´ë¸”ì€ ê´€ë¡€ìƒ `í…Œì´ë¸”ëª… + id` ë¥¼ ë§ì´ ì‚¬ìš©í•œë‹¤. <br>
ì°¸ê³ ë¡œ ê°ì²´ì—ì„œ `id` ëŒ€ì‹ ì— `memberId` ë¥¼ ì‚¬ìš©í•´ë„ ëœë‹¤. ì¤‘ìš”í•œ ê²ƒì€ ì¼ê´€ì„±ì´ë‹¤.

## ì£¼ë¬¸(Order) ì—”í‹°í‹°
`src/main/java/jpabook/jpashop/domain/Order.java`
```java
@Entity
@Table(name = "orders")
@Getter @Setter
public class Order {

    @Id
    @GeneratedValue
    @Column(name = "order_id")
    private Long id;

    @ManyToOne // ì—¬ëŸ¬ ì£¼ë¬¸ì´ í•œ ëª…ì˜ íšŒì›ì— ì†í•œë‹¤.
    @JoinColumn(name = "member_id") // FKì˜ ì´ë¦„ì´ member_idê°€ ëœë‹¤.
    private Member member; // ì™¸ë˜í‚¤ê°€ ìˆëŠ” ê³³ì„ ì—°ê´€ê´€ê³„ì˜ ì£¼ì¸ìœ¼ë¡œ ì •í•œë‹¤.

    @OneToMany(mappedBy = "order") // ì—°ê´€ê´€ê³„ ê±°ìš¸
    private List<OrderItem> orderItems = new ArrayList<>();

    @OneToOne
    @JoinColumn(name = "delivery_id")
    private Delivery delivery; // ì—°ê´€ê´€ê³„ ì£¼ì¸

    private LocalDateTime orderDate; // ì£¼ë¬¸ ì‹œê°„

    @Enumerated(EnumType.STRING) // ë°˜ë“œì‹œ STRINGìœ¼ë¡œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
    private OrderStatus status; // ì£¼ë¬¸ ìƒíƒœ [ORDER, CANCEL]

}
```
### ì£¼ë¬¸ ìƒíƒœ(OrderStatus) - ENUM
`src/main/java/jpabook/jpashop/domain/OrderStatus.java`
```java
public enum OrderStatus {
    ORDER, CANCEL
}
```

## ì£¼ë¬¸ ìƒí’ˆ(OrderItem) ì—”í‹°í‹°
`src/main/java/jpabook/jpashop/domain/OrderItem.java`
```java
@Entity
@Getter @Setter
public class OrderItem {

    @Id
    @GeneratedValue
    @Column(name = "order_item_id")
    private Long id;

    @ManyToOne
    @JoinColumn(name = "item_id")
    private Item item;

    @ManyToOne
    @JoinColumn(name = "order_id")
    private Order order;

    private int orderPrice; // ì£¼ë¬¸ ê°€ê²©
    private int count; // ì£¼ë¬¸ ìˆ˜ëŸ‰

}
```

## ìƒí’ˆ(Item) ì—”í‹°í‹°
`src/main/java/jpabook/jpashop/domain/item/Item.java`
```java
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE) // SINGLE_TABLE ì „ëµ ì„ íƒ
@DiscriminatorColumn(name = "dtype")
@Getter @Setter
public abstract class Item {

    @Id
    @GeneratedValue
    @Column(name = "item_id")
    private Long id;

    private String name;

    private int price;

    private int stockQuantity;

    @ManyToMany(mappedBy = "items")
    private List<Category> categories = new ArrayList<>();

}
```

### ìƒí’ˆ - ë„ì„œ(Book) ì—”í‹°í‹°
`src/main/java/jpabook/jpashop/domain/item/Book.java`
```java
@Entity
@DiscriminatorValue("B")
@Getter @Setter
public class Book extends Item {

    private String author;
    private String isbn;

}
```

### ìƒí’ˆ - ìŒë°˜(Album) ì—”í‹°í‹°
`src/main/java/jpabook/jpashop/domain/item/Album.java`
```java
@Entity
@DiscriminatorValue("A")
@Getter @Setter
public class Album extends Item {

    private String artist;
    private String etc;

}
```

### ìƒí’ˆ - ì˜í™”(Movie) ì—”í‹°í‹°
`src/main/java/jpabook/jpashop/domain/item/Movie.java`
```java
@Entity
@DiscriminatorValue("M")
@Getter @Setter
public class Movie extends Item {

    private String director;
    private String actor;

}
```

## ë°°ì†¡(Delivery) ì—”í‹°í‹°
`src/main/java/jpabook/jpashop/domain/Delivery.java`
```java
@Entity
@Getter @Setter
public class Delivery {

    @Id
    @GeneratedValue
    @Column(name = "delivery_id")
    private Long id;

    @OneToOne(mappedBy = "delivery") // ì—°ê´€ê´€ê³„ ê±°ìš¸
    private Order order;

    @Embedded
    private Address address;

    @Enumerated(EnumType.STRING) // ë°˜ë“œì‹œ STRINGìœ¼ë¡œ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
    private DeliveryStatus status; // READY, COMP

}
```

### ë°°ì†¡ ìƒíƒœ(DeliverStatus) - ENUM
`src/main/java/jpabook/jpashop/domain/DeliverStatus.java`
```java
public enum DeliveryStatus {
    READY, COMP
}
```

##  ì¹´í…Œê³ ë¦¬(Category) ì—”í‹°í‹°
`src/main/java/jpabook/jpashop/domain/Category.java`
```java
@Entity
@Getter @Setter
public class Category {

    @Id
    @GeneratedValue
    @Column(name = "category_id")
    private Long id;

    private String name;

    @ManyToMany // ì‹¤ë¬´ì—ì„œëŠ” ì‚¬ìš©í•˜ì§€ ë§ì.
    @JoinTable(name = "category_item",
            joinColumns = @JoinColumn(name = "category_id"),
            inverseJoinColumns = @JoinColumn(name = "item_id"))
    private List<Item> items = new ArrayList<>();

    @ManyToOne
    @JoinColumn(name = "parent_id")
    private Category parent;

    @OneToMany(mappedBy = "parent")
    private List<Category> child = new ArrayList<>();
}
```

> ì£¼ì˜ ğŸš¨<br>
ì‹¤ë¬´ì—ì„œëŠ” `@ManyToMany` ë¥¼ ì‚¬ìš©í•˜ì§€ ë§ì!<br>
`@ManyToMany` ëŠ” í¸ë¦¬í•œ ê²ƒ ê°™ì§€ë§Œ, ì¤‘ê°„ í…Œì´ë¸”( `CATEGORY_ITEM` )ì— ì»¬ëŸ¼ì„ ì¶”ê°€í•  ìˆ˜ ì—†ê³ , ì„¸ë°€í•˜ê²Œ ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ê¸° ì–´ë µê¸° ë•Œë¬¸ì— ì‹¤ë¬´ì—ì„œ ì‚¬ìš©í•˜ê¸°ì—ëŠ” í•œê³„ê°€ ìˆë‹¤. <br>
ì¤‘ê°„ ì—”í‹°í‹°( `CategoryItem` ) ë¥¼ ë§Œë“¤ê³  `@ManyToOne` , `@OneToMany` ë¡œ ë§¤í•‘í•´ì„œ ì‚¬ìš©í•˜ì. <br>
ì •ë¦¬í•˜ë©´ ëŒ€ë‹¤ëŒ€ ë§¤í•‘ì„ ì¼ëŒ€ë‹¤, ë‹¤ëŒ€ì¼ ë§¤í•‘ìœ¼ë¡œ í’€ì–´ ë‚´ì„œ ì‚¬ìš©í•˜ì.

## ì£¼ì†Œ(Address) ê°’ íƒ€ì…
`src/main/java/jpabook/jpashop/domain/Address.java`
```java
@Embeddable
@Getter
public class Address {

    private String city;
    private String street;
    private String zipcode;

    protected Address() { // JPA ìŠ¤í™ìƒ ë§Œë“ ê±°ë‹ˆê¹Œ ì†ëŒ€ì§€ ë§ì.
    }

    public Address(String city, String street, String zipcode) {
        this.city = city;
        this.street = street;
        this.zipcode = zipcode;
    }
}
```
> ì°¸ê³ <br>
ê°’ íƒ€ì…ì€ ë³€ê²½ ë¶ˆê°€ëŠ¥í•˜ê²Œ ì„¤ê³„í•´ì•¼ í•œë‹¤.<br>
`@Setter` ë¥¼ ì œê±°í•˜ê³ , ìƒì„±ìì—ì„œ ê°’ì„ ëª¨ë‘ ì´ˆê¸°í™”í•´ì„œ ë³€ê²½ ë¶ˆê°€ëŠ¥í•œ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì. <br><br>
JPA ìŠ¤í™ìƒ ì—”í‹°í‹°ë‚˜ ì„ë² ë””ë“œ íƒ€ì…( `@Embeddable` )ì€ ìë°” ê¸°ë³¸ ìƒì„±ì(default constructor)ë¥¼ `public` ë˜ëŠ” `protected` ë¡œ ì„¤ì •í•´ì•¼ í•œë‹¤. <br>
`public` ìœ¼ë¡œ ë‘ëŠ” ê²ƒ ë³´ë‹¤ëŠ” `protected` ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì´ ê·¸ë‚˜ë§ˆ ë” ì•ˆì „ í•˜ë‹¤.<br>
JPAê°€ ì´ëŸ° ì œì•½ì„ ë‘ëŠ” ì´ìœ ëŠ” JPA êµ¬í˜„ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ ë¦¬í”Œë™ì…˜ ê°™ì€ ê¸°ìˆ ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.

# 4. ì—”í‹°í‹° ì„¤ê³„ ì‹œ ì£¼ì˜ì 




















***
<br>

    ğŸ’› ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ğŸ‘»

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}