---
title:  "[SPRING] @Autowired í•„ë“œëª…, @Qualifier, @Primary"

categories:
  - Spring
tags:
  - [Framework, Spring, Java]

toc: true
toc_sticky: true
 
date: 2022-06-07 16:05:40
last_modified_at: 2022-06-07 16:05:43
---

# ë¬¸ì œ ìƒí™©
ì¡°íšŒ ëŒ€ìƒ ë¹ˆì´ 2ê°œ ì´ìƒì´ì–´ì„œ `NoUniqueBeanDefinitionException`ì´ ë°œìƒí•˜ëŠ” ìƒí™©

# í•´ê²° ë°©ë²•
## 1. Autowired í•„ë“œ ëª… ë§¤ì¹­
`@Autowired`ëŠ” ì²˜ìŒìœ¼ë¡œ íƒ€ì… ë§¤ì¹­ì„ ì‹œë„í•˜ê³ , ì´ë•Œ ì—¬ëŸ¬ ë¹ˆì´ ìˆìœ¼ë©´ í•„ë“œ ì´ë¦„ì´ë‚˜ íŒŒë¼ë¯¸í„° ì´ë¦„ìœ¼ë¡œ ë¹ˆ ì´ë¦„ì„ ì¶”ê°€ ë§¤ì¹­í•œë‹¤.
### ê¸°ì¡´ ì½”ë“œ
```java
@Autowired
private DiscountPolicy discountPolicy
```

### í•„ë“œ ëª…ì„ ë¹ˆ ì´ë¦„ìœ¼ë¡œ ë³€ê²½
```java
@Autowired
private DiscountPolicy rateDiscountPolicy
```
í•„ë“œ ëª…ì´ `rateDiscountPolicy`ì´ë¯€ë¡œ ì •ìƒ ì£¼ì…ëœë‹¤.<br>
ğŸŒŸ í•„ë“œ ëª… ë§¤ì¹­ì€ ë¨¼ì € íƒ€ì… ë§¤ì¹­ì„ ì‹œë„í•˜ê³ , ê·¸ ê²°ê³¼ì— ì—¬ëŸ¬ ë¹ˆì´ ìˆì„ ë•Œ ì¶”ê°€ë¡œ ë™ì‘í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤!

### `@Autowired` ë§¤ì¹­ ì •ë¦¬
1. íƒ€ì… ë§¤ì¹­
2. íƒ€ì… ë§¤ì¹­ì˜ ê²°ê³¼ê°€ 2ê°œ ì´ìƒì¼ ë•Œ í•„ë“œ ì´ë¦„ì´ë‚˜ íŒŒë¦¬ë¯¸í„° ì´ë¦„ìœ¼ë¡œ ë¹ˆ ì´ë¦„ ë§¤ì¹­

## 2. @Qualifier ì‚¬ìš©
`@Qualifier`ëŠ” ì¶”ê°€ êµ¬ë¶„ìë¥¼ ë¶™ì—¬ì£¼ëŠ” ë°©ë²•ì´ë‹¤. ì£¼ì… ì‹œ ì¶”ê°€ì ì¸ ë°©ë²•ì„ ì œê³µí•˜ëŠ” ê²ƒì´ì§€ ë¹ˆ ì´ë¦„ì„ ë³€ê²½í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.
### ë¹ˆ ë“±ë¡ ì‹œ @Qualifierë¥¼ ë¶™ì—¬ì¤€ë‹¤.
```java
@Component
@Qualifier("mainDiscountPolicy")
public class RateDiscountPolicy implements DiscountPolicy {}
```
```java
@Component
@Qualifier("fixDiscountPolicy")
public class FixDiscountPolicy implements DiscountPolicy {}
```

### ì£¼ì… ì‹œì— @Qualifierë¥¼ ë¶™ì—¬ì£¼ê³  ë“±ë¡í•œ ì´ë¦„ì„ ì ì–´ì¤€ë‹¤.
#### ìƒì„±ì ìë™ ì£¼ì… ì˜ˆì‹œ
```java
@Autowired
    public OrderServiceImpl(MemberRepository memberRepository, @Qualifier("mainDiscountPolicy") DiscountPolicy discountPolicy) {
        this.memberRepository = memberRepository;
        this.discountPolicy = discountPolicy;
    }
```

#### ìˆ˜ì •ì ìë™ ì£¼ì… ì˜ˆì‹œ
```java
@Autowired
public DiscountPolicy setDiscountPolicy(@Qualifier("mainDiscountPolicy") DiscountPolicy discountPolicy) {
    return discountPolicy;
}
```

`@Qualifier`ë¡œ ì£¼ì…í•  ë•Œ `@Qualifier("mainDiscountPolicy")`ë¥¼ ëª» ì°¾ìœ¼ë©´ ì–´ë–»ê²Œ ë ê¹Œ?<br>
ê·¸ëŸ¬ë©´ mainDiscountPolicyë¼ëŠ” ì´ë¦„ì˜ ìŠ¤í”„ë§ ë¹ˆì„ ì¶”ê°€ë¡œ ì°¾ëŠ”ë‹¤.<br>
í•˜ì§€ë§Œ `@Qualifier`ëŠ” `@Qualifier`ë¥¼ ì°¾ëŠ” ìš©ë„ë¡œë§Œ ì‚¬ìš©í•˜ëŠ”ê²Œ ëª…í™•í•˜ê³  ì¢‹ë‹¤ğŸ‘<br><br>
ComponentScanì´ ì•„ë‹Œ, ì§ì ‘ ë¹ˆ ë“±ë¡ ì‹œì—ë„ `@Qualifier`ë¥¼ ë™ì¼í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
```java
@Bean
@Qualifier("mainDiscountPolicy")
public DiscountPolicy discountPolicy(){
    return new ...
}
```

### `@Qualifier` ì •ë¦¬
1. `@Qualifier`ë¼ë¦¬ ë§¤ì¹­
2. ë¹ˆ ì´ë¦„ ë§¤ì¹­
3. `NoSuchBeanDefinitionException` ì˜ˆì™¸ ë°œìƒ

## 3.ğŸŒŸ @Primary ì‚¬ìš©
`@Primary`ëŠ” ìš°ì„ ìˆœìœ„ë¥¼ ì •í•˜ëŠ” ë°©ë²•ì´ë‹¤. `@Autowired` ì‹œì— ì—¬ëŸ¬ ë¹ˆì— ë§¤ì¹­ë˜ë©´ `@Primary`ê°€ ìš°ì„ ê¶Œì„ ê°€ì§„ë‹¤.<br><br>
### ìš°ì„ ê¶Œ ë¶€ì—¬
`rateDiscountPolicy`ê°€ ìš°ì„ ê¶Œì„ ê°€ì§€ë„ë¡ í•˜ì.
```java
@Component
@Primary // ìš°ì„ ê¶Œì„ ê°€ì§!
public class RateDiscountPolicy implements DiscountPolicy {}
```
```java
@Component
public class FixDiscountPolicy implements DiscountPolicy {}
```

### ì‚¬ìš©ì½”ë“œ
```java
// ìƒì„±ì
@Autowired
public OrderServiceImpl(MemberRepository memberRepository, DiscountPolicy discountPolicy) {
    this.memberRepository = memberRepository;
    this.discountPolicy = discountPolicy;
}

// ìˆ˜ì •ì
public DiscountPolicy setDiscountPolicy(DiscountPolicy discountPolicy){
    return discountPolicy;
}
```

# ğŸ¤” ë¬´ì—‡ì„ ì‚¬ìš©í• ê¹Œ?
`@Primary`ì™€ `@Qualifier` ì¤‘ì— ì–´ë–¤ ê²ƒì„ ì‚¬ìš©í•˜ë©´ ì¢‹ì„ ì§€ ê³ ë¯¼ì´ ë  ê²ƒì´ë‹¤.<br>
`@Qualifier`ì˜ ë‹¨ì ì€ ì£¼ì… ë°›ì„ ë•Œ ëª¨ë“  ì½”ë“œì— `@Qualifier`ë¥¼ ë¶™ì—¬ì£¼ì–´ì•¼ í•œë‹¤ëŠ” ì ì´ë‹¤.<br>
ë°˜ë©´ì— `@Primary`ë¥¼ ì‚¬ìš©í•˜ë©´ ì´ë ‡ê²Œ `@Qualifier`ë¥¼ ë¶™ì¼ í•„ìš”ê°€ ì—†ë‹¤.

## `@Primary`ì™€ `@Qualifier`ì˜ í™œìš©
ìì£¼ ì‚¬ìš©í•˜ëŠ” ë©”ì¸ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì»¤ë„¥ì…˜ì„ íšë“í•˜ëŠ” ìŠ¤í”¼ë§ ë¹ˆì´ ìˆê³ , íŠ¹ë³„í•œ ê¸°ëŠ¥ìœ¼ë¡œ ê°€ë” ì‚¬ìš©í•˜ëŠ” ì„œë¸Œ ë°ì´í„°ë² ì´ìŠ¤ì˜ ì»¤ë„¥ì…˜ì„ íšë“í•˜ëŠ” ìŠ¤í”„ë§ ë¹ˆì´ ìˆë‹¤ê³  ìƒê°í•´ë³´ì.<br>
ë©”ì¸ dbì˜ ì»¤ë„¥ì…˜ì„ íšë“í•˜ëŠ” ìŠ¤í”„ë§ ë¹ˆì€ `@Primary`ë¥¼ ì ìš©í•´ì„œ ì¡°íšŒí•˜ëŠ” ê³³ì—ì„œ í¸ë¦¬í•˜ê²Œ ì¡°íšŒí•˜ê³ , ì„œë¸Œ dbì˜ ì»¤ë„¥ì…˜ ë¹ˆì„ íšë“í•  ë•ŒëŠ” `@Qualifier`ë¥¼ ì§€ì •í•´ì„œ ëª…ì‹œì ìœ¼ë¡œ íšë“í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ ì½”ë“œë¥¼ ê¹”ë”í•˜ê²Œ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.<br>
ë¬¼ë¡  ë©”ì¸ dbì˜ ìŠ¤í”„ë§ ë¹ˆì„ ë“±ë¡í•  ë•Œ `@Qualifier`ë¥¼ ì§€ì •í•´ì£¼ëŠ” ê²ƒì€ ìƒê´€ì—†ë‹¤.

## ìš°ì„ ìˆœìœ„
`@Primary`ëŠ” ê¸°ë³¸ê°’ì²˜ëŸ¼ ë™ì‘í•˜ëŠ” ê²ƒì´ê³ , `@Qualifier`ëŠ” ë§¤ìš° ìƒì„¸í•˜ê²Œ ë™ì‘í•œë‹¤.<br>
ë”°ë¼ì„œ `@Primary`ë³´ë‹¤ `@Qualifier`ê°€ ìš°ì„ ìˆœìœ„ê°€ ë†’ë‹¤.


***
<br>

    ğŸ’› ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ğŸ‘»

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}