---
title:  "[SPRING] JPA - ìƒì†ê´€ê³„ ë§¤í•‘ "

categories:
  - Spring
tags:
  - [Framework, Spring, Java]

toc: true
toc_sticky: true
 
date: 2022-08-04 10:30:50
last_modified_at: 2022-08-04 10:30:53
---

# ìƒì†ê´€ê³„ ë§¤í•‘
<img width="460" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-08-04 á„‹á…©á„Œá…¥á†« 9 47 55" src="https://user-images.githubusercontent.com/59405576/182739436-7ace96be-c3e4-4f69-8955-801996306796.png">

- ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤ëŠ” ìƒì† ê´€ê³„ X
- ìŠˆí¼íƒ€ì… ì„œë¸Œíƒ€ì… ê´€ê³„ë¼ëŠ” ëª¨ë¸ë§ ê¸°ë²•ì´ ê°ì²´ ìƒì†ê³¼ ìœ ì‚¬
- ìƒì†ê´€ê³„ ë§¤í•‘: ê°ì²´ì˜ ìƒì† êµ¬ì¡°ì™€ DBì˜ ìŠˆí¼íƒ€ì… ì„œë¸Œíƒ€ì… ê´€ê³„ë¥¼ ë§¤í•‘

## ì¡°ì¸ ì „ëµ
<img width="268" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-08-04 á„‹á…©á„Œá…¥á†« 10 12 20" src="https://user-images.githubusercontent.com/59405576/182741711-27898e82-1b42-4062-823a-07d99f2eb016.png">

- ê°ê° í…Œì´ë¸”ë¡œ ë³€í™˜
- `@Inheritance(strategy=InheritanceType.JOINED)`
- ì¥ì <br>- í…Œì´ë¸” ì •ê·œí™”<br>- ì™¸ë˜ í‚¤ ì°¸ì¡° ë¬´ê²°ì„± ì œì•½ì¡°ê±´ í™œìš©ê°€ëŠ¥<br>- ì €ì¥ê³µê°„ íš¨ìœ¨í™”
- ë‹¨ì <br>- ì¡°íšŒì‹œ ì¡°ì¸ì„ ë§ì´ ì‚¬ìš©, ì„±ëŠ¥ ì €í•˜<br>- ì¡°íšŒ ì¿¼ë¦¬ê°€ ë³µì¡í•¨<br>- ë°ì´í„° ì €ì¥ì‹œ INSERT SQL 2ë²ˆ í˜¸ì¶œ

```java
@Entity
@Inheritance(strategy=InheritanceType.JOINED) // ğŸŒŸ
@DiscriminatorColumn
public class Item() {

  @Id @GeneratedValue
  private Long id;

  private String name;
  private int price;
}
```

```java
@Entity
// @DiscriminatorValue("M") // defaultëŠ” entity ì´ë¦„
public class Movie() extends Item { // ğŸŒŸ
  
  @Id @GeneratedValue
  private Long id;

  private String director;
  private String actor;
}
```

## ë‹¨ì¼ í…Œì´ë¸” ì „ëµ

<img width="417" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-08-04 á„‹á…©á„Œá…¥á†« 10 11 27" src="https://user-images.githubusercontent.com/59405576/182741656-05a05659-e05b-4f79-8b19-99f6fe4cd35f.png">

- í†µí•© í…Œì´ë¸”ë¡œ ë³€í™˜
- `@Inheritance(strategy=InheritanceType.SINGLE_TABLE)`
- `@Inheritance`ë§Œ ì‚¬ìš©í–ˆì„ ë•Œ default
- ì¥ì <br>- ì¡°ì¸ì´ í•„ìš” ì—†ìœ¼ë¯€ë¡œ ì¼ë°˜ì ìœ¼ë¡œ ì¡°íšŒ ì„±ëŠ¥ì´ ë¹ ë¦„<br>- ì¡°íšŒ ì¿¼ë¦¬ê°€ ë‹¨ìˆœí•¨
- ë‹¨ì <br>- ìì‹ ì—”í‹°í‹°ê°€ ë§¤í•‘í•œ ì»¬ëŸ¼ì€ ëª¨ë‘ null í—ˆìš©<br>- ë‹¨ì¼ í…Œì´ë¸”ì— ëª¨ë“  ê²ƒì„ ì €ì¥í•˜ë¯€ë¡œ í…Œì´ë¸”ì´ ì»¤ì§ˆ ìˆ˜ ìˆë‹¤. ìƒí™©ì— ë”°ë¼ì„œ ì¡°íšŒ ì„±ëŠ¥ì´ ì˜¤íˆë ¤ ëŠë ¤ì§ˆ ìˆ˜ ìˆë‹¤.

```java
@Entity
@Inheritance(strategy=InheritanceType.SINGLE_TABLE) // ğŸŒŸ
@DiscriminatorColumn
public class Item() {

  @Id @GeneratedValue
  private Long id;

  private String name;
  private int price;
}
```

`@Inheritance`ì˜ ì „ëµë§Œ `SINGLE_TABLE`ìœ¼ë¡œ ë°”ê¾¸ë©´ ITEM í…Œì´ë¸”ì— ìì‹ë“¤ì˜ ì†ì„±ì´ ëª¨ë‘ ë“¤ì–´ê°„ë‹¤.

<img width="603" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-08-04 á„‹á…©á„Œá…¥á†« 10 15 48" src="https://user-images.githubusercontent.com/59405576/182742047-72e6f3d2-89d6-4bfc-95c1-84b30ed055f6.png">


## êµ¬í˜„ í´ë˜ìŠ¤ë§ˆë‹¤ í…Œì´ë¸” ì „ëµ

<img width="264" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-08-04 á„‹á…©á„Œá…¥á†« 10 22 09" src="https://user-images.githubusercontent.com/59405576/182742696-f840a0ea-af3b-4149-b141-a4c282d7043b.png">

- ì„œë¸Œíƒ€ì… í…Œì´ë¸”ë¡œ ë³€í™˜
- `@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS)`
- ì´ ì „ëµì€ DBAì™€ ORM ì „ë¬¸ê°€ ë‘˜ ë‹¤ ì¶”ì²œí•˜ì§€ ì•ŠëŠ”ë‹¤.
- ì¥ì <br>- ì„œë¸Œíƒ€ì…ì„ ëª…í™•í•˜ê²Œ êµ¬ë¶„í•´ì„œ ì²˜ë¦¬í•  ë•Œ íš¨ê³¼ì <br>- not null ì œì•½ì¡°ê±´ ì‚¬ìš© ê°€ëŠ¥
- ë‹¨ì <br>- ì—¬ëŸ¬ ìì‹ í…Œì´ë¸”ì„ í•¨ê»˜ ì¡°íšŒí•  ë•Œ ì„±ëŠ¥ì´ ëŠë¦¼ (UNION SQL í•„ìš”)<br>- ìì‹ í…Œì´ë¸”ì„ í†µí•©í•´ì„œ ì¿¼ë¦¬í•˜ê¸° ì–´ë ¤ì›€

```java
@Entity
@Inheritance(strategy=InheritanceType.TABLE_PER_CLASS) // ğŸŒŸ
@DiscriminatorColumn
public abstract class Item() { // ğŸŒŸ abstract

  @Id @GeneratedValue
  private Long id;

  private String name;
  private int price;
}
```

ì´ ê²½ìš°ì—ëŠ” ITEM í…Œì´ë¸”ì´ ë§Œë“¤ì–´ì§€ì§€ ì•Šê³ , ê·¸ ìì‹(MOVIE) í…Œì´ë¸”ì— ë¶€ëª¨ì˜ ì†ì„±ì´ ì¶”ê°€ë˜ì–´ ë§Œë“¤ì–´ì§„ë‹¤.

<img width="368" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-08-04 á„‹á…©á„Œá…¥á†« 10 27 58" src="https://user-images.githubusercontent.com/59405576/182743345-7c352160-1995-4433-a6d4-57d475f6e394.png">




***
<br>

    ğŸ’› ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ğŸ‘»

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}