---
title:  "[SPRING] ìŠ¤í”„ë§ MVC ê¸°ë³¸ ê¸°ëŠ¥ "

categories:
  - Spring
tags:
  - [Framework, Spring, Java]

toc: true
toc_sticky: true
 
date: 2022-06-20 14:25:25
last_modified_at: 2022-06-20 14:25:29
---

# í”„ë¡œì íŠ¸ ìƒì„±
> ìŠ¤í”„ë§ ë¶€íŠ¸ ìŠ¤íƒ€í„° ì‚¬ì´íŠ¸ë¡œ ì´ë™í•´ì„œ ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•œë‹¤.<br>
[https://start.spring.io](https://start.spring.io)

## Welocome í˜ì´ì§€ ë§Œë“¤ê¸°
ìŠ¤í”„ë§ ë¶€íŠ¸ì— Jar ë¥¼ ì‚¬ìš©í•˜ë©´ `/resources/static/` ìœ„ì¹˜ì— `index.html` íŒŒì¼ì„ ë‘ë©´ Welcome í˜ì´ì§€ë¡œ ì²˜ë¦¬í•´ì¤€ë‹¤. <br>(ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ì§€ì›í•˜ëŠ” ì •ì  ì»¨í…ì¸  ìœ„ì¹˜ì— /index.html ì´ ìˆìœ¼ë©´ ëœë‹¤.)

# ë¡œê¹… ê°„ë‹¨íˆ ì•Œì•„ë³´ê¸°
ìš´ì˜ ì‹œìŠ¤í…œì—ì„œëŠ” `System.out.println()` ê°™ì€ ì‹œìŠ¤í…œ ì½˜ì†”ì„ ì‚¬ìš©í•´ì„œ í•„ìš”í•œ ì •ë³´ë¥¼ ì¶œë ¥í•˜ì§€ ì•Šê³ , ë³„ë„ì˜ ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ì„œ ë¡œê·¸ë¥¼ ì¶œë ¥í•œë‹¤. ì°¸ê³ ë¡œ ë¡œê·¸ ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ë„ ë§ê³ , ê¹Šê²Œ ë“¤ì–´ê°€ë©´ ëì´ ì—†ê¸° ë•Œë¬¸ì—, ì—¬ê¸°ì„œëŠ” ìµœì†Œí•œì˜ ì‚¬ìš© ë°©ë²•ë§Œ ì•Œì•„ë³¸ë‹¤.

## ë¡œê¹… ë¼ì´ë¸ŒëŸ¬ë¦¬
ë¡œê·¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” Logback, Log4J, Log4J2 ë“±ë“± ìˆ˜ ë§ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìˆëŠ”ë°, ê·¸ê²ƒì„ í†µí•©í•´ì„œ ì¸í„°í˜ì´ìŠ¤ë¡œ ì œê³µí•˜ëŠ” ê²ƒì´ ë°”ë¡œ SLF4J ë¼ì´ë¸ŒëŸ¬ë¦¬ë‹¤.<br>
ì‰½ê²Œ ì´ì•¼ê¸°í•´ì„œ SLF4JëŠ” ì¸í„°í˜ì´ìŠ¤ì´ê³ , ê·¸ êµ¬í˜„ì²´ë¡œ Logback ê°™ì€ ë¡œê·¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„ íƒí•˜ë©´ ëœë‹¤. ì‹¤ë¬´ì—ì„œëŠ” ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” Logbackì„ ëŒ€ë¶€ë¶„ ì‚¬ìš©í•œë‹¤.

## ì˜ˆì‹œ
```java
... 

// import org.slf4j.Logger; // slf4j ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•œë‹¤.
// import org.slf4j.LoggerFactory; // slf4j ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•œë‹¤.

@Slf4j // lombokì´ ì œê³µí•˜ëŠ” ì• ë…¸í…Œì´ì…˜
@RestController // ë°˜í™˜ ê°’ì„ HTTP ë©”ì‹œì§€ ë°”ë””ì— ë°”ë¡œ ì…ë ¥í•œë‹¤.
public class LogTestController {

    // private final Logger log = LoggerFactory.getLogger(getClass()); // ë¡œê·¸ ì„ ì–¸

    @RequestMapping("log-test")
    public String logTest(){

        String name = "Spring";

        System.out.println("name = " + name); // ê¸°ì¡´ ë°©ë²•

        // ë¡œê·¸ í˜¸ì¶œ
        log.trace("trace log={}", name);
        log.debug("debug log={}", name);
        log.info("info log={}", name);
        log.warn("warn log={}", name);
        log.error("error log={}", name);

        return "ok";
    }
}
```
ì´ë•Œ lombokì´ ì œê³µí•˜ëŠ” `@Slf4j` ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ë¡œê·¸ ì„ ì–¸ ì½”ë“œë¥¼ ì œê±°í•  ìˆ˜ ìˆë‹¤.
- ë¡œê·¸ê°€ ì¶œë ¥ë˜ëŠ” í¬ë©§ í™•ì¸<br>- ì‹œê°„, ë¡œê·¸ ë ˆë²¨, í”„ë¡œì„¸ìŠ¤ ID, ì“°ë ˆë“œ ëª…, í´ë˜ìŠ¤ëª…, ë¡œê·¸ ë©”ì‹œì§€
- ë¡œê·¸ ë ˆë²¨ ì„¤ì •ì„ ë³€ê²½í•´ì„œ ì¶œë ¥ ê²°ê³¼ë¥¼ ë³´ì.<br>- LEVEL: `TRACE > DEBUG > INFO > WARN > ERROR`<br>- ê°œë°œ ì„œë²„ëŠ” debug ì¶œë ¥<br>- ìš´ì˜ ì„œë²„ëŠ” info ì¶œë ¥



### @RestController
- `@Controller`ëŠ” ë°˜í™˜ ê°’ì´ String ì´ë©´ ë·° ì´ë¦„ìœ¼ë¡œ ì¸ì‹ëœë‹¤. ê·¸ë˜ì„œ ë·°ë¥¼ ì°¾ê³  ë·°ê°€ ëœë”ë§ ëœë‹¤. 
- `@RestController`ëŠ” ë°˜í™˜ ê°’ìœ¼ë¡œ ë·°ë¥¼ ì°¾ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, HTTP ë©”ì‹œì§€ ë°”ë””ì— ë°”ë¡œ ì…ë ¥í•œë‹¤.<br>
ë”°ë¼ì„œ ì‹¤í–‰ ê²°ê³¼ë¡œ ok ë©”ì„¸ì§€ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤. `@ResponseBody`ì™€ ê´€ë ¨ì´ ìˆëŠ”ë°, ë’¤ì—ì„œ ë” ìì„¸íˆ ì„¤ëª…í•œë‹¤.

## ì˜¬ë°”ë¥¸ ë¡œê·¸ ì‚¬ìš©ë²•
`log.trace("trace log={}", name);` ì²˜ëŸ¼ ì‚¬ìš©í•´ì•¼ì§€, `log.trace("trace log=" + name);`ë¡œ ì‚¬ìš©í•˜ë©´ ì•ˆëœë‹¤! ğŸš¨<br>
(í›„ìì™€ ê°™ì€ ë°©ë²•ìœ¼ë¡œ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ì˜ë¯¸ì—†ëŠ” `+` ì—°ì‚°ì´ ì¼ì–´ë‚˜ê¸° ë•Œë¬¸ì´ë‹¤.)

## ë¡œê·¸ ë ˆë²¨ ì„¤ì •ì„ ë³€ê²½í•˜ëŠ” ë°©ë²•
`main/resources/application.properties`ì—ì„œ ì•„ë˜ ì½”ë“œë¥¼ ì¶”ê°€í•´ ì„¤ì •ì„ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
```
# ì „ì²´ ë¡œê·¸ ë ˆë²¨ ì„¤ì • (ê¸°ë³¸ info)
logging.level.root=info

# hello.springmvc íŒ¨í‚¤ì§€ì™€ ê·¸ í•˜ìœ„ ë¡œê·¸ ë ˆë²¨ ì„¤ì • (debugë¡œ ì„¤ì •í•˜ë©´ debug,info,warn,error ë ˆë²¨ì„ ë³¼ ìˆ˜ ìˆë‹¤.)
logging.level.hello.springmvc=debug
```
ì´ë•Œ traceë¡œ ì„¤ì •í•˜ë©´ `TRACE > DEBUG > INFO > WARN > ERROR`ì„ ëª¨ë‘ ë³¼ ìˆ˜ ìˆìœ¼ë©°, infoë¡œ ì„¤ì •í•˜ë©´ `INFO > WARN > ERROR`ë¥¼ ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.

## ë¡œê·¸ ì‚¬ìš©ì‹œ ì¥ì 
- ì“°ë ˆë“œ ì •ë³´, í´ë˜ìŠ¤ ì´ë¦„ ê°™ì€ ë¶€ê°€ ì •ë³´ë¥¼ í•¨ê»˜ ë³¼ ìˆ˜ ìˆê³ , ì¶œë ¥ ëª¨ì–‘ì„ ì¡°ì •í•  ìˆ˜ ìˆë‹¤.
- ë¡œê·¸ ë ˆë²¨ì— ë”°ë¼ ê°œë°œ ì„œë²„ì—ì„œëŠ” ëª¨ë“  ë¡œê·¸ë¥¼ ì¶œë ¥í•˜ê³ , ìš´ì˜ì„œë²„ì—ì„œëŠ” ì¶œë ¥í•˜ì§€ ì•ŠëŠ” ë“± ë¡œê·¸ë¥¼ ìƒí™©ì— ë§ê²Œ ì¡°ì ˆí•  ìˆ˜ ìˆë‹¤.<br>ì• í”Œë¦¬ì¼€ì´ì…˜ ì½”ë“œë¥¼ ê±´ë“¤ì§€ ì•Šê³  ì„¤ì •ë§Œìœ¼ë¡œ ë¡œê·¸ ë ˆë²¨ì„ ì¡°ì •í•  ìˆ˜ ìˆë‹¤! ğŸŒŸ
- ì‹œìŠ¤í…œ ì•„ì›ƒ ì½˜ì†”ì—ë§Œ ì¶œë ¥í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, íŒŒì¼ì´ë‚˜ ë„¤íŠ¸ì›Œí¬ ë“±, ë¡œê·¸ë¥¼ ë³„ë„ì˜ ìœ„ì¹˜ì— ë‚¨ê¸¸ ìˆ˜ ìˆë‹¤. <br>íŠ¹íˆ íŒŒì¼ë¡œ ë‚¨ê¸¸ ë•ŒëŠ” ì¼ë³„, íŠ¹ì • ìš©ëŸ‰ì— ë”°ë¼ ë¡œê·¸ë¥¼ ë¶„í• í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.
- ì„±ëŠ¥ë„ ì¼ë°˜ System.outë³´ë‹¤ ì¢‹ë‹¤. (ë‚´ë¶€ ë²„í¼ë§, ë©€í‹° ì“°ë ˆë“œ ë“±ë“±) 

ë”°ë¼ì„œ ì‹¤ë¬´ì—ì„œëŠ” ê¼­ ë¡œê·¸ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤!

# ìš”ì²­ ë§¤í•‘
## PathVariable(ê²½ë¡œ ë³€ìˆ˜) ì‚¬ìš©
```java
/**
    * PathVariable(ê²½ë¡œ ë³€ìˆ˜) ì‚¬ìš©
    * ë³€ìˆ˜ëª…ì´ ê°™ìœ¼ë©´ ìƒëµ ê°€ëŠ¥
    *
    * @PathVariable("userId") String userId -> @PathVariable userId
    * /mapping/userA
    */
@GetMapping("/mapping/{userId}")
public String mappingPath(@PathVariable("userId") String data){
    log.info("mappingPath userId={}", data);
    return "ok";
}
```
ìµœê·¼ HTTP APIëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë¦¬ì†ŒìŠ¤ ê²½ë¡œì— ì‹ë³„ìë¥¼ ë„£ëŠ” ìŠ¤íƒ€ì¼ì„ ì„ í˜¸í•œë‹¤.
- `/mapping/userA`
- `users/1`

`@RequestMapping`ì€ URL ê²½ë¡œë¥¼ í…œí”Œë¦¿í™” í•  ìˆ˜ ìˆëŠ”ë°, `@PathVariable`ì„ ì‚¬ìš©í•˜ë©´ ë§¤ì¹­ ë˜ëŠ” ë¶€ë¶„ì„ í¸ë¦¬í•˜ê²Œ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.<br>
`@PathVariable`ì˜ ì´ë¦„ê³¼ íŒŒë¼ë¯¸í„° ì´ë¦„ì´ ê°™ìœ¼ë©´ ì•„ë˜ì™€ ê°™ì´ ìƒëµí•  ìˆ˜ ìˆë‹¤.
```java
public String mappingPath(@PathVariable userId){ ... }
```

### PathVriable ì‚¬ìš© - ë‹¤ì¤‘
```java
/**
    * PathVariable ì‚¬ìš© ë‹¤ì¤‘
    * /mapping/users/userA/orders/100
    */
@GetMapping("/mapping/users/{userId}/orders/{orderId}")
public String mappingPath(@PathVariable String userId, @PathVariable Long
        orderId) {
    log.info("mappingPath userId={}, orderId={}", userId, orderId);
    return "ok";
}
```

## API ì˜ˆì‹œ
íšŒì› ê´€ë¦¬ë¥¼ HTTP APIë¡œ ë§Œë“ ë‹¤ ìƒê°í•˜ê³  ë§¤í•‘ì„ ì–´ë–»ê²Œ í•˜ëŠ”ì§€ ì•Œì•„ë³´ì. (ì‹¤ì œ ë°ì´í„°ê°€ ë„˜ì–´ê°€ëŠ” ë¶€ë¶„ì€ ìƒëµí•˜ê³  URL ë§¤í•‘ë§Œ!)<br>

- íšŒì›ê´€ë¦¬ API<br>- íšŒì› ëª©ë¡ ì¡°íšŒ: GET `/users`<br>- íšŒì› ë“±ë¡: POST `/users`<br>- íšŒì› ì¡°íšŒ: GET `/users/{userId}`<br>- íšŒì› ìˆ˜ì •: PATCH `/users/{userId}`<br>- íšŒì› ì‚­ì œ: DELETE `/users/{userId}`

```java
@RestController
@RequestMapping("/mapping/users")
public class MappingClassController {

    // íšŒì› ëª©ë¡ ì¡°íšŒ
    @GetMapping
    public String user(){
        return "get users";
    }

    // íšŒì› ë“±ë¡
    @PostMapping
    public String addUser(){
        return "post users";
    }

    // íšŒì› ì¡°íšŒ
    @GetMapping("/{userId}")
    public String findUser(@PathVariable String userId){
        return "get userId=" + userId;
    }

    // íšŒì› ìˆ˜ì •
    @PatchMapping("/{userId}")
    public String updateUser(@PathVariable String userId){
        return "update userId=" + userId;
    }

    // íšŒì› ì‚­ì œ
    @DeleteMapping("/{userId}")
    public String deleteUser(@PathVariable String userId){
        return "delete userId=" + userId;
    }
}
```

***
<br>

    ğŸ’› ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ğŸ‘»

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}