---
title:  "[SPRING] ê²€ì¦ - ì˜¤ë¥˜ ì½”ë“œì™€ ë©”ì‹œì§€ ì²˜ë¦¬ "

categories:
  - Spring
tags:
  - [Framework, Spring, Java]

toc: true
toc_sticky: true
 
date: 2022-07-04 00:06:33
last_modified_at: 2022-07-04 00:06:36
---

# ğŸ§© ì˜¤ë¥˜ ì½”ë“œì™€ ë©”ì‹œì§€ ì²˜ë¦¬ 1
## FieldError ìƒì„±ì
`FieldError` ëŠ” ë‘ ê°€ì§€ ìƒì„±ìë¥¼ ì œê³µí•œë‹¤.
```
public FieldError(String objectName, String field, String defaultMessage);
public FieldError(String objectName, String field, @Nullable Object rejectedValue, boolean bindingFailure, @Nullable String[] codes, @Nullable Object[] arguments, @Nullable String defaultMessage)
```
- íŒŒë¼ë¯¸í„° ëª©ë¡<br>
â€¢ `objectName` : ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê°ì²´ ì´ë¦„<br>
â€¢ `field` : ì˜¤ë¥˜ í•„ë“œ<br>
â€¢ `rejectedValue` : ì‚¬ìš©ìê°€ ì…ë ¥í•œ ê°’(ê±°ì ˆëœ ê°’)<br>
â€¢ `bindingFailure` : íƒ€ì… ì˜¤ë¥˜ ê°™ì€ ë°”ì¸ë”© ì‹¤íŒ¨ì¸ì§€, ê²€ì¦ ì‹¤íŒ¨ì¸ì§€ êµ¬ë¶„ ê°’ 
â€¢ `codes` : ë©”ì‹œì§€ ì½”ë“œ<br>
â€¢ `arguments` : ë©”ì‹œì§€ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì¸ì<br>
â€¢ `defaultMessage` : ê¸°ë³¸ ì˜¤ë¥˜ ë©”ì‹œì§€

`FieldError` , `ObjectError` ì˜ ìƒì„±ìëŠ” `errorCode` , `arguments` ë¥¼ ì œê³µí•œë‹¤. <br>
ì´ê²ƒì€ ì˜¤ë¥˜ ë°œìƒì‹œ ì˜¤ë¥˜ ì½”ë“œë¡œ ë©”ì‹œì§€ë¥¼ ì°¾ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤.

## `errors.properties` ìƒì„± ë° ì„¤ì •

### 1. errors ë©”ì‹œì§€ íŒŒì¼ ìƒì„±
`src/main/resources/errors.properties`ë¥¼ ìƒì„±í•œ ë’¤ì— ì•„ë˜ ë‚´ìš©ì„ ì¶”ê°€í•œë‹¤.<br>
(`messages.properties `ë¥¼ ì‚¬ìš©í•´ë„ ë˜ì§€ë§Œ, ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ êµ¬ë¶„í•˜ê¸° ì‰½ê²Œ `errors.properties` ë¼ëŠ” ë³„ë„ì˜ íŒŒì¼ë¡œ ê´€ë¦¬í•´ë³´ì.)
```
required.item.itemName=ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.
range.item.price=ê°€ê²©ì€ {0} ~ {1} ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤.
max.item.quantity=ìˆ˜ëŸ‰ì€ ìµœëŒ€ {0} ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤.
totalPriceMin=ê°€ê²© * ìˆ˜ëŸ‰ì˜ í•©ì€ {0}ì› ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ ê°’ = {1}
```

> ì°¸ê³ <br>
`errors_en.properties` íŒŒì¼ì„ ìƒì„±í•˜ë©´ ì˜¤ë¥˜ ë©”ì‹œì§€ë„ êµ­ì œí™” ì²˜ë¦¬ë¥¼ í•  ìˆ˜ ìˆë‹¤.

#### í•œê¸€ ì¸ì½”ë”© ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤ë©´?
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-07-04 á„‹á…©á„Œá…¥á†« 12 38 54](https://user-images.githubusercontent.com/59405576/177046871-48980420-218e-4f89-91fc-c493ac73ea8f.png)
1. ì¸í…”ë¦¬ì œì´ì—ì„œ Preferenceì— ë“¤ì–´ê°„ë‹¤.
2. [Editor] -> [File Encodings] ë©”ë‰´ì—ì„œ<br>
Global Encodeing, Project Encoding, Default encoding for properties filesë¥¼ ëª¨ë‘ UTF-8ë¡œ ì„¤ì •í•˜ê³  ì¸í…”ë¦¬ì œì´ë¥¼ ì¬ì‹œì‘í•œë‹¤.
3. ê·¸ í›„ `errors.properties` ë¥¼ ë‹¤ì‹œ ì—´ì–´ë³´ë©´ í•œê¸€ì´ ê¹¨ì§„ìƒíƒœë¡œ ê¸°ë¡ë˜ì–´ìˆëŠ”ë°, <br>
ì´ê²ƒì„ ë‹¤ì‹œ í•œê¸€ë¡œ ì…ë ¥í•´ì„œ ì €ì¥í•œ í›„ í…ŒìŠ¤íŠ¸ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•œë‹¤.

### 2. ìŠ¤í”„ë§ ë¶€íŠ¸ ë©”ì‹œì§€ ì„¤ì • ì¶”ê°€
ë¨¼ì € ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ í•´ë‹¹ ë©”ì‹œì§€ íŒŒì¼ì„ ì¸ì‹í•  ìˆ˜ ìˆê²Œ `src/main/resources/application.properties`ì—ì„œ ë‹¤ìŒ ì„¤ì •ì„ ì¶”ê°€í•œë‹¤.
```
spring.messages.basename=messages,errors
```
ì´ë ‡ê²Œí•˜ë©´ `messages.properties` , `errors.properties` ë‘ íŒŒì¼ì„ ëª¨ë‘ ì¸ì‹í•œë‹¤. <br>
(ìƒëµí•˜ë©´ `messages.properties` ë§Œ ê¸°ë³¸ìœ¼ë¡œ ì¸ì‹í•œë‹¤.)<br>

## ì»¨íŠ¸ë¡¤ëŸ¬ - `ValidationItemControllerV2`
ì´ì œ `errors` ì— ë“±ë¡í•œ ë©”ì‹œì§€ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì½”ë“œë¥¼ ë³€ê²½í•´ë³´ì.<br>
`addItem()`ì„ ìˆ˜ì •í•œë‹¤.
```java
@Slf4j
@Controller
@RequestMapping("/validation/v2/items")
@RequiredArgsConstructor
public class ValidationItemControllerV2 {
...
 @PostMapping("/add")
    public String addItemV3(@ModelAttribute Item item, BindingResult bindingResult, RedirectAttributes redirectAttributes, Model model) {

        // ê²€ì¦ ë¡œì§
        if (!StringUtils.hasText(item.getItemName())){
            bindingResult.addError(new FieldError("item","itemName", item.getItemName(), false, new String[]{"required.item.itemName"}, null, null)); // ğŸŒŸ íŒŒë¼ë¯¸í„° ë³€ê²½
        }
        if (item.getPrice()==null || item.getPrice()<1000 || item.getPrice()>1000000){
            bindingResult.addError(new FieldError("item","price", item.getPrice(), false, new String[]{"range.item.price"}, new Object[]{1000,1000000}, null)); // ğŸŒŸ íŒŒë¼ë¯¸í„° ë³€ê²½
        }
        if (item.getQuantity()==null || item.getQuantity()>=9999){
            bindingResult.addError(new FieldError("item","quantity", item.getQuantity(), false, new String[]{"max.item.quantity"}, new Object[]{9999}, null)); // ğŸŒŸ íŒŒë¼ë¯¸í„° ë³€ê²½
        }

        // íŠ¹ì • í•„ë“œê°€ ì•„ë‹Œ ë³µí•© ë£° ê²€ì¦
        if (item.getPrice()!=null && item.getQuantity()!=null){
            int resultPrice = item.getPrice() * item.getQuantity();
            if (resultPrice<10000){
                bindingResult.addError(new ObjectError("item", new String[]{"totalPriceMin"}, new Object[]{10000,resultPrice}, null)); // ğŸŒŸ íŒŒë¼ë¯¸í„° ë³€ê²½
            }
        }

        // ê²€ì¦ì— ì‹¤íŒ¨í•˜ë©´ ë‹¤ì‹œ ì…ë ¥ í¼ìœ¼ë¡œ
        if (bindingResult.hasErrors()){
            log.info("errors={}", bindingResult);
            return "validation/v2/addForm";
        }

        // ì„±ê³µ ë¡œì§
        Item savedItem = itemRepository.save(item);
        redirectAttributes.addAttribute("itemId", savedItem.getId());
        redirectAttributes.addAttribute("status", true);
        return "redirect:/validation/v2/items/{itemId}";
    }
...
}
```

### codesì™€ arguments íŒŒë¼ë¯¸í„°
```java
//range.item.price=ê°€ê²©ì€ {0} ~ {1} ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤.
// FieldError ìƒì„±ì - objectName,field, rejectedValue, bindingFailure, codes, arguments, defaultMessage
new FieldError("item","price", item.getPrice(), false, new String[]{"range.item.price"}, new Object[]{1000,1000000}, null)
```
- `codes` : `required.item.itemName` ë¥¼ ì‚¬ìš©í•´ì„œ ë©”ì‹œì§€ ì½”ë“œë¥¼ ì§€ì •í•œë‹¤. ë©”ì‹œì§€ ì½”ë“œëŠ” í•˜ë‚˜ê°€ ì•„ë‹ˆë¼ ë°°ì—´ë¡œ ì—¬ëŸ¬ ê°’ì„ ì „ë‹¬í•  ìˆ˜ ìˆëŠ”ë°, ìˆœì„œëŒ€ë¡œ ë§¤ì¹­í•´ì„œ ì²˜ìŒ ë§¤ì¹­ë˜ëŠ” ë©”ì‹œì§€ê°€ ì‚¬ìš©ëœë‹¤.
- `arguments` : `Object[]{1000, 1000000}` ë¥¼ ì‚¬ìš©í•´ì„œ ì½”ë“œì˜ `{0}` , `{1}` ë¡œ ì¹˜í™˜í•  ê°’ì„ ì „ë‹¬í•œë‹¤.
- `defaultMessage` : `codes`ì—ì„œ ì§€ì •í•œ ë©”ì‹œì§€ ì½”ë“œ ì¤‘ì— ë§¤ì¹­ë˜ëŠ”ê²Œ ì—†ì„ ë•Œ ì‚¬ìš©ëœë‹¤. `null`ë¡œ ì„¤ì •í•˜ë©´, ë§¤ì¹­ë˜ëŠ”ê²Œ ì—†ì„ ë•Œ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤.

# ğŸ§© ì˜¤ë¥˜ ì½”ë“œì™€ ë©”ì‹œì§€ ì²˜ë¦¬ 2
- `FieldError` , `ObjectError` ëŠ” ë‹¤ë£¨ê¸° ë„ˆë¬´ ë²ˆê±°ë¡­ë‹¤.
- ì˜¤ë¥˜ ì½”ë“œë„ ì¢€ ë” ìë™í™” í•  ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ? ì˜ˆ) `item.itemName` ì²˜ëŸ¼?

ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ `BindingResult` ëŠ” ê²€ì¦í•´ì•¼ í•  ê°ì²´ì¸ `target` ë°”ë¡œ ë‹¤ìŒì— ì˜¨ë‹¤. <br>
ë”°ë¼ì„œ `BindingResult` ëŠ” ì´ë¯¸ ë³¸ì¸ì´ ê²€ì¦í•´ì•¼ í•  ê°ì²´ì¸ `target` ì„ ì•Œê³  ìˆë‹¤.

## ì»¨íŠ¸ë¡¤ëŸ¬ - `ValidationItemControllerV2`
`BindingResult` ê°€ ì œê³µí•˜ëŠ” `rejectValue()` , `reject()` ë¥¼ ì‚¬ìš©í•˜ë©´ `FieldError` , `ObjectError` ë¥¼ ì§ì ‘ ìƒì„±í•˜ì§€ ì•Šê³ , ê¹”ë”í•˜ê²Œ ê²€ì¦ ì˜¤ë¥˜ë¥¼ ë‹¤ë£° ìˆ˜ ìˆë‹¤.<br>
`addItem()`ì„ ìˆ˜ì •í•œë‹¤.
```java
@Slf4j
@Controller
@RequestMapping("/validation/v2/items")
@RequiredArgsConstructor
public class ValidationItemControllerV2 {
...
    @PostMapping("/add")
    public String addItemV4(@ModelAttribute Item item, BindingResult bindingResult, RedirectAttributes redirectAttributes, Model model) {

        // ê²€ì¦ ë¡œì§
        if (!StringUtils.hasText(item.getItemName())){
            bindingResult.rejectValue("itemName", "required"); // ğŸŒŸ ë©”ì„œë“œ ë³€ê²½
        }
        if (item.getPrice()==null || item.getPrice()<1000 || item.getPrice()>1000000){
            bindingResult.rejectValue("price", "range", new Object[]{1000, 10000000}, null); // ğŸŒŸ ë©”ì„œë“œ ë³€ê²½
        }
        if (item.getQuantity()==null || item.getQuantity()>=9999){
            bindingResult.rejectValue("quantity", "max", new Object[]{9999}, null); // ğŸŒŸ ë©”ì„œë“œ ë³€ê²½
        }

        // íŠ¹ì • í•„ë“œê°€ ì•„ë‹Œ ë³µí•© ë£° ê²€ì¦
        if (item.getPrice()!=null && item.getQuantity()!=null){
            int resultPrice = item.getPrice() * item.getQuantity();
            if (resultPrice<10000){
                bindingResult.reject("totalPriceMin", new Object[]{10000, resultPrice}, null); // ğŸŒŸ ë©”ì„œë“œ ë³€ê²½
            }
        }

        // ê²€ì¦ì— ì‹¤íŒ¨í•˜ë©´ ë‹¤ì‹œ ì…ë ¥ í¼ìœ¼ë¡œ
        if (bindingResult.hasErrors()){
            log.info("errors={}", bindingResult);
            return "validation/v2/addForm";
        }

        // ì„±ê³µ ë¡œì§
        Item savedItem = itemRepository.save(item);
        redirectAttributes.addAttribute("itemId", savedItem.getId());
        redirectAttributes.addAttribute("status", true);
        return "redirect:/validation/v2/items/{itemId}";
    }
...
}
```

### `rejectValue()`
```java
 void rejectValue(@Nullable String field, String errorCode, @Nullable Object[] errorArgs, @Nullable String defaultMessage);
```
- `field` : ì˜¤ë¥˜ í•„ë“œëª…
- `errorCode` : ì˜¤ë¥˜ ì½”ë“œ(ì´ ì˜¤ë¥˜ ì½”ë“œëŠ” ë©”ì‹œì§€ì— ë“±ë¡ëœ ì½”ë“œê°€ ì•„ë‹ˆë‹¤. ë’¤ì—ì„œ ì„¤ëª…í•  `messageResolverë¥¼` ìœ„í•œ ì˜¤ë¥˜ ì½”ë“œì´ë‹¤.)
- `errorArgs` : ì˜¤ë¥˜ ë©”ì‹œì§€ì—ì„œ `{0}` ì„ ì¹˜í™˜í•˜ê¸° ìœ„í•œ ê°’ 
- `defaultMessage` : ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ì„ ë•Œ ì‚¬ìš©í•˜ëŠ” ê¸°ë³¸ ë©”ì‹œì§€

```java
 void rejectValue("price", "range", new Object[]{1000, 1000000}, null);
```
ì•ì—ì„œ `BindingResult` ëŠ” ì–´ë–¤ ê°ì²´ë¥¼ ëŒ€ìƒìœ¼ë¡œ ê²€ì¦í•˜ëŠ”ì§€ `targetì„` ì´ë¯¸ ì•Œê³  ìˆë‹¤ê³  í–ˆë‹¤. <br>
ë”°ë¼ì„œ `target(item)`ì— ëŒ€í•œ ì •ë³´ëŠ” ì—†ì–´ë„ ëœë‹¤. ì˜¤ë¥˜ í•„ë“œëª…ì€ ë™ì¼í•˜ê²Œ `price` ë¥¼ ì‚¬ìš©í–ˆë‹¤.<br><br>
`FieldError()` ë¥¼ ì§ì ‘ ë‹¤ë£° ë•ŒëŠ” ì˜¤ë¥˜ ì½”ë“œë¥¼ `range.item.price` ì™€ ê°™ì´ ëª¨ë‘ ì…ë ¥í–ˆë‹¤. ê·¸ëŸ°ë° `rejectValue()` ë¥¼ ì‚¬ìš©í•˜ê³  ë¶€í„°ëŠ” ì˜¤ë¥˜ ì½”ë“œë¥¼ `range` ë¡œ ê°„ë‹¨í•˜ê²Œ ì…ë ¥í–ˆë‹¤. <br>
ê·¸ë˜ë„ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì˜ ì°¾ì•„ì„œ ì¶œë ¥í•œë‹¤. ë¬´ì–¸ê°€ ê·œì¹™ì´ ìˆëŠ” ê²ƒ ì²˜ëŸ¼ ë³´ì¸ë‹¤. <br>
ì´ ë¶€ë¶„ì„ ì´í•´í•˜ë ¤ë©´ `MessageCodesResolver` ë¥¼ ì´í•´í•´ì•¼ í•œë‹¤. ì™œ ì´ëŸ°ì‹ìœ¼ë¡œ ì˜¤ë¥˜ ì½”ë“œë¥¼ êµ¬ì„±í•˜ëŠ”ì§€ ë°”ë¡œ ë‹¤ìŒì— ìì„¸íˆ ì•Œì•„ë³´ì.

### `reject()`
```java
 void reject(String errorCode, @Nullable Object[] errorArgs, @Nullable String defaultMessage);
```
`rejectValue()`ëŠ” `FieldError()` ëŒ€ì‹ ì— ì‚¬ìš©í•˜ë©°, `reject()`ëŠ” `ObjectError()` ëŒ€ì‹ ì— ì‚¬ìš©í•œë‹¤.

# ğŸ§© ì˜¤ë¥˜ ì½”ë“œì™€ ë©”ì‹œì§€ ì²˜ë¦¬ 3
ì˜¤ë¥˜ ì½”ë“œë¥¼ ë§Œë“¤ ë•Œ ì•„ë˜ê³¼ ê°™ì´ ìì„¸íˆ ë§Œë“¤ ìˆ˜ë„ ìˆê³ , <br>
`required.item.itemName` : ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ ì…ë‹ˆë‹¤. <br>
`range.item.price` : ìƒí’ˆì˜ ê°€ê²© ë²”ìœ„ ì˜¤ë¥˜ ì…ë‹ˆë‹¤.<br><br>
ë˜ëŠ” ì•„ë˜ê³¼ ê°™ì´ ë‹¨ìˆœí•˜ê²Œ ë§Œë“¤ ìˆ˜ë„ ìˆë‹¤. <br>
`required` : í•„ìˆ˜ ê°’ ì…ë‹ˆë‹¤.
`range` : ë²”ìœ„ ì˜¤ë¥˜ ì…ë‹ˆë‹¤.<br><br>
ë‹¨ìˆœí•˜ê²Œ ë§Œë“¤ë©´ ë²”ìš©ì„±ì´ ì¢‹ì•„ì„œ ì—¬ëŸ¬ê³³ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ, ë©”ì‹œì§€ë¥¼ ì„¸ë°€í•˜ê²Œ ì‘ì„±í•˜ê¸° ì–´ë µë‹¤. <br>
ë°˜ëŒ€ë¡œ ë„ˆë¬´ ìì„¸í•˜ê²Œ ë§Œë“¤ë©´ ë²”ìš©ì„±ì´ ë–¨ì–´ì§„ë‹¤. <br>
ê°€ì¥ ì¢‹ì€ ë°©ë²•ì€ ë²”ìš©ì„±ìœ¼ë¡œ ì‚¬ìš©í•˜ë‹¤ê°€, ì„¸ë°€í•˜ê²Œ ì‘ì„±í•´ì•¼ í•˜ëŠ” ê²½ìš°ì—ëŠ” ì„¸ë°€í•œ ë‚´ìš©ì´ ì ìš©ë˜ë„ë¡ ë©”ì‹œì§€ì— ë‹¨ê³„ë¥¼ ë‘ëŠ” ë°©ë²•ì´ë‹¤.<br><br>
ì˜ˆë¥¼ ë“¤ì–´ì„œ `required` ë¼ê³  ì˜¤ë¥˜ ì½”ë“œë¥¼ ì‚¬ìš©í•œë‹¤ê³  ê°€ì •í•´ë³´ì.<br>
ë‹¤ìŒê³¼ ê°™ì´ `required` ë¼ëŠ” ë©”ì‹œì§€ë§Œ ìˆìœ¼ë©´ ì´ ë©”ì‹œì§€ë¥¼ ì„ íƒí•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.<br>
ê·¸ëŸ°ë° ì˜¤ë¥˜ ë©”ì‹œì§€ì— `required.item.itemName` ì™€ ê°™ì´ ê°ì²´ëª…ê³¼ í•„ë“œëª…ì„ ì¡°í•©í•œ ì„¸ë°€í•œ ë©”ì‹œì§€ ì½”ë“œê°€ ìˆìœ¼ë©´ ì´ ë©”ì‹œì§€ë¥¼ ë†’ì€ ìš°ì„ ìˆœìœ„ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.<br>
```
#Level1
required.item.itemName: ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ ì…ë‹ˆë‹¤. 

#Level2
required: í•„ìˆ˜ ê°’ ì…ë‹ˆë‹¤.
```
ë¬¼ë¡  ì´ë ‡ê²Œ ê°ì²´ëª…ê³¼ í•„ë“œëª…ì„ ì¡°í•©í•œ ë©”ì‹œì§€ê°€ ìˆëŠ”ì§€ ìš°ì„  í™•ì¸í•˜ê³ , ì—†ìœ¼ë©´ ì¢€ ë” ë²”ìš©ì ì¸ ë©”ì‹œì§€ë¥¼ ì„ íƒí•˜ë„ë¡ ì¶”ê°€ ê°œë°œì„ í•´ì•¼ê² ì§€ë§Œ, ë²”ìš©ì„± ìˆê²Œ ì˜ ê°œë°œí•´ë‘ë©´, ë©”ì‹œì§€ì˜ ì¶”ê°€ ë§Œìœ¼ë¡œ ë§¤ìš° í¸ë¦¬í•˜ê²Œ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.<br>
ìŠ¤í”„ë§ì€ `MessageCodesResolver` ë¼ëŠ” ê²ƒìœ¼ë¡œ ì´ëŸ¬í•œ ê¸°ëŠ¥ì„ ì§€ì›í•œë‹¤.

# ğŸ§© ì˜¤ë¥˜ ì½”ë“œì™€ ë©”ì‹œì§€ ì²˜ë¦¬ 4
## í…ŒìŠ¤íŠ¸ ì½”ë“œ
ìš°ì„  í…ŒìŠ¤íŠ¸ ì½”ë“œë¡œ `MessageCodesResolverë¥¼` ì•Œì•„ë³´ì.
```java
public class MessageCodesResolverTest {

    MessageCodesResolver codesResolver = new DefaultMessageCodesResolver();

    @Test
    void messageCodesResolverObject(){
        String[] messageCodes = codesResolver.resolveMessageCodes("required", "item");
        for (String messageCode : messageCodes) {
            System.out.println("messageCode = " + messageCode);
        }
        assertThat(messageCodes).containsExactly("required.item", "required");
    }

    @Test
    void messageCodesResolverField(){
        String[] messageCodes = codesResolver.resolveMessageCodes("required", "item", "itemName", String.class);
        for (String messageCode : messageCodes) {
            System.out.println("messageCode = " + messageCode);
        }
        assertThat(messageCodes).containsExactly(
                "required.item.itemName",
                "required.itemName",
                "required.java.lang.String",
                "required"
        );
    }
}
```
### MessageCodesResolver
- ê²€ì¦ ì˜¤ë¥˜ ì½”ë“œë¡œ ë©”ì‹œì§€ ì½”ë“œë“¤ì„ ìƒì„±í•œë‹¤.
- `MessageCodesResolver` ì¸í„°í˜ì´ìŠ¤ì´ê³  `DefaultMessageCodesResolver` ëŠ” ê¸°ë³¸ êµ¬í˜„ì²´ì´ë‹¤.
- ì£¼ë¡œ ë‹¤ìŒê³¼ í•¨ê»˜ ì‚¬ìš© `ObjectError` , `FieldError`

### DefaultMessageCodesResolverì˜ ê¸°ë³¸ ë©”ì‹œì§€ ìƒì„± ê·œì¹™
#### ê°ì²´ ì˜¤ë¥˜ (ObjectError)
```
ê°ì²´ ì˜¤ë¥˜ì˜ ê²½ìš° ë‹¤ìŒ ìˆœì„œë¡œ 2ê°€ì§€ ìƒì„± 
1.: code + "." + object name 
2.: code

ì˜ˆ) ì˜¤ë¥˜ ì½”ë“œ: required, object name: item 
1.: required.item
2.: required
```
#### í•„ë“œ ì˜¤ë¥˜ (FieldError)
```
í•„ë“œ ì˜¤ë¥˜ì˜ ê²½ìš° ë‹¤ìŒ ìˆœì„œë¡œ 4ê°€ì§€ ë©”ì‹œì§€ ì½”ë“œ ìƒì„±
1.: code + "." + object name + "." + field
2.: code + "." + field
3.: code + "." + field type
4.: code

ì˜ˆ) ì˜¤ë¥˜ ì½”ë“œ: typeMismatch, object name "user", field "age", field type: int 
1. "typeMismatch.user.age"
2. "typeMismatch.age"
3. "typeMismatch.int"
4. "typeMismatch"
```

### ë™ì‘ ë°©ì‹
- `rejectValue()` , `reject()` ëŠ” ë‚´ë¶€ì—ì„œ `MessageCodesResolver` ë¥¼ ì‚¬ìš©í•œë‹¤. ì—¬ê¸°ì—ì„œ ë©”ì‹œì§€ ì½”ë“œë“¤ì„ ìƒì„±í•œë‹¤.
- `FieldError` , `ObjectError` ì˜ ìƒì„±ìë¥¼ ë³´ë©´, ì˜¤ë¥˜ ì½”ë“œë¥¼ í•˜ë‚˜ê°€ ì•„ë‹ˆë¼ ì—¬ëŸ¬ ì˜¤ë¥˜ ì½”ë“œë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤. <br>
`MessageCodesResolver` ë¥¼ í†µí•´ì„œ ìƒì„±ëœ ìˆœì„œëŒ€ë¡œ ì˜¤ë¥˜ ì½”ë“œë¥¼ ë³´ê´€í•œë‹¤.

### ì˜¤ë¥˜ ë©”ì‹œì§€ ì¶œë ¥
íƒ€ì„ë¦¬í”„ í™”ë©´ì„ ë Œë”ë§ í•  ë•Œ `th:errors` ê°€ ì‹¤í–‰ëœë‹¤. <br>
ë§Œì•½ ì´ë•Œ ì˜¤ë¥˜ê°€ ìˆë‹¤ë©´ ìƒì„±ëœ ì˜¤ë¥˜ ë©”ì‹œì§€ ì½”ë“œë¥¼ ìˆœì„œëŒ€ë¡œ ëŒì•„ê°€ë©´ì„œ ë©”ì‹œì§€ë¥¼ ì°¾ëŠ”ë‹¤. ê·¸ë¦¬ê³  ì—†ìœ¼ë©´ ë””í´íŠ¸ ë©”ì‹œì§€ë¥¼ ì¶œë ¥í•œë‹¤.

# ğŸ§© ì˜¤ë¥˜ ì½”ë“œì™€ ë©”ì‹œì§€ ì²˜ë¦¬ 5

í•µì‹¬ì€ êµ¬ì²´ì ì¸ ê²ƒì—ì„œ! ëœ êµ¬ì²´ì ì¸ ê²ƒìœ¼ë¡œ!<br>
`MessageCodesResolver` ëŠ” `required.item.itemName` ì²˜ëŸ¼ êµ¬ì²´ì ì¸ ê²ƒì„ ë¨¼ì € ë§Œë“¤ì–´ì£¼ê³ , `required` ì²˜ëŸ¼ ëœ êµ¬ì²´ì ì¸ ê²ƒì„ ê°€ì¥ ë‚˜ì¤‘ì— ë§Œë“ ë‹¤.<br>
ì´ë ‡ê²Œ í•˜ë©´ ì•ì„œ ë§í•œ ê²ƒ ì²˜ëŸ¼ ë©”ì‹œì§€ì™€ ê´€ë ¨ëœ ê³µí†µ ì „ëµì„ í¸ë¦¬í•˜ê²Œ ë„ì…í•  ìˆ˜ ìˆë‹¤.<br><br>
ì™œ ì´ë ‡ê²Œ ë³µì¡í•˜ê²Œ ì‚¬ìš©í•˜ëŠ”ê°€?<br>
ëª¨ë“  ì˜¤ë¥˜ ì½”ë“œì— ëŒ€í•´ì„œ ë©”ì‹œì§€ë¥¼ ê°ê° ë‹¤ ì •ì˜í•˜ë©´ ê°œë°œì ì…ì¥ì—ì„œ ê´€ë¦¬í•˜ê¸° ë„ˆë¬´ í˜ë“¤ë‹¤.<br>
í¬ê²Œ ì¤‘ìš”í•˜ì§€ ì•Šì€ ë©”ì‹œì§€ëŠ” ë²”ìš©ì„± ìˆëŠ” `requried` ê°™ì€ ë©”ì‹œì§€ë¡œ ëë‚´ê³ , ì •ë§ ì¤‘ìš”í•œ ë©”ì‹œì§€ëŠ” ê¼­ í•„ìš”í•  ë•Œ êµ¬ì²´ì ìœ¼ë¡œ ì ì–´ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ ë” íš¨ê³¼ì ì´ë‹¤.

## `errors.properties`
ì´ì œ ìš°ë¦¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì´ëŸ° ì˜¤ë¥˜ ì½”ë“œ ì „ëµì„ ë„ì…í•´ë³´ì.<br>
`src/main/resources/errors.properties`
```
#required.item.itemName=ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.
# range.item.price=ê°€ê²©ì€ {0} ~ {1} ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤.
# max.item.quantity=ìˆ˜ëŸ‰ì€ ìµœëŒ€ {0} ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤.
# totalPriceMin=ê°€ê²© * ìˆ˜ëŸ‰ì˜ í•©ì€ {0}ì› ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ ê°’ = {1}

#==========ObjectError==========
#Level1
totalPriceMin.item=ìƒí’ˆì˜ ê°€ê²© * ìˆ˜ëŸ‰ì˜ í•©ì€ {0}ì› ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ ê°’ = {1}

#Level2 - ìƒëµ
totalPriceMin=ì „ì²´ ê°€ê²©ì€ {0}ì› ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤. í˜„ì¬ ê°’ = {1}

#==========FieldError==========
#Level1
required.item.itemName=ìƒí’ˆ ì´ë¦„ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.
range.item.price=ê°€ê²©ì€ {0} ~ {1} ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤.
max.item.quantity=ìˆ˜ëŸ‰ì€ ìµœëŒ€ {0} ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤.

#Level2 - ìƒëµ

#Level3
required.java.lang.String = í•„ìˆ˜ ë¬¸ìì…ë‹ˆë‹¤.
required.java.lang.Integer = í•„ìˆ˜ ìˆ«ìì…ë‹ˆë‹¤.
min.java.lang.String = {0} ì´ìƒì˜ ë¬¸ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.
min.java.lang.Integer = {0} ì´ìƒì˜ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.
range.java.lang.String = {0} ~ {1} ê¹Œì§€ì˜ ë¬¸ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.
range.java.lang.Integer = {0} ~ {1} ê¹Œì§€ì˜ ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.
max.java.lang.String = {0} ê¹Œì§€ì˜ ë¬¸ìë¥¼ í—ˆìš©í•©ë‹ˆë‹¤.
max.java.lang.Integer = {0} ê¹Œì§€ì˜ ìˆ«ìë¥¼ í—ˆìš©í•©ë‹ˆë‹¤.

#Level4
required = í•„ìˆ˜ ê°’ ì…ë‹ˆë‹¤.
min= {0} ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.
range= {0} ~ {1} ë²”ìœ„ë¥¼ í—ˆìš©í•©ë‹ˆë‹¤.
max= {0} ê¹Œì§€ í—ˆìš©í•©ë‹ˆë‹¤.
```
í¬ê²Œ ê°ì²´ ì˜¤ë¥˜ì™€ í•„ë“œ ì˜¤ë¥˜ë¥¼ ë‚˜ëˆ„ì—ˆë‹¤. ê·¸ë¦¬ê³  ë²”ìš©ì„±ì— ë”°ë¼ ë ˆë²¨ì„ ë‚˜ëˆ„ì–´ë‘ì—ˆë‹¤.<br>
`itemName` ì˜ ê²½ìš° `required` ê²€ì¦ ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ ë°œìƒí•˜ë©´ ë‹¤ìŒ ì½”ë“œ ìˆœì„œëŒ€ë¡œ ë©”ì‹œì§€ê°€ ìƒì„±ëœë‹¤. 
1. `required.item.itemName`
2. `required.itemName`
3. `required.java.lang.String`
4. `required`

ê·¸ë¦¬ê³  ì´ë ‡ê²Œ ìƒì„±ëœ ë©”ì‹œì§€ ì½”ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìˆœì„œëŒ€ë¡œ `MessageSource` ì—ì„œ ë©”ì‹œì§€ì—ì„œ ì°¾ëŠ”ë‹¤.<br>
êµ¬ì²´ì ì¸ ê²ƒì—ì„œ ëœ êµ¬ì²´ì ì¸ ìˆœì„œëŒ€ë¡œ ì°¾ëŠ”ë‹¤. ë©”ì‹œì§€ì— 1ë²ˆì´ ì—†ìœ¼ë©´ 2ë²ˆì„ ì°¾ê³ , 2ë²ˆì´ ì—†ìœ¼ë©´ 3ë²ˆì„ ì°¾ëŠ”ë‹¤.<br>
ì´ë ‡ê²Œ ë˜ë©´ ë§Œì•½ì— í¬ê²Œ ì¤‘ìš”í•˜ì§€ ì•Šì€ ì˜¤ë¥˜ ë©”ì‹œì§€ëŠ” ê¸°ì¡´ì— ì •ì˜ëœ ê²ƒì„ ê·¸ëƒ¥ ì¬í™œìš© í•˜ë©´ ëœë‹¤!

## ValidationUtils
ì»¨íŠ¸ë¡¤ëŸ¬ì— ìˆëŠ” `addItemV4()`ì˜ ê²€ì¦ë¡œì§ ë¶€ë¶„ì´ë‹¤.
```java
// ValidationUtils ì‚¬ìš© ì „
if (!StringUtils.hasText(item.getItemName())){
  bindingResult.rejectValue("itemName", "required");
}

// ValidationUtils ì‚¬ìš© í›„
ValidationUtils.rejectIfEmptyOrWhitespace(bindingResult, "itemName", "required"); 
```
`ValidationUtils`ë¥¼ ì‚¬ìš©í•˜ë©´, ìœ„ì™€ ê°™ì´ í•œì¤„ë¡œ ê°€ëŠ¥í•˜ë‹¤. í•˜ì§€ë§Œ Emptyì™€ ê³µë°± ê°™ì€ ë‹¨ìˆœí•œ ê¸°ëŠ¥ë§Œ ì œê³µí•œë‹¤.

## ì •ë¦¬
1. `rejectValue()` í˜¸ì¶œ
2. `MessageCodesResolver` ë¥¼ ì‚¬ìš©í•´ì„œ ê²€ì¦ ì˜¤ë¥˜ ì½”ë“œë¡œ 4ê°€ì§€ ì¢…ë¥˜ì˜ ë©”ì‹œì§€ ì½”ë“œë“¤ì„ ìƒì„±
3. `new FieldError()` ë¥¼ ìƒì„±í•˜ë©´ì„œ ë©”ì‹œì§€ ì½”ë“œë“¤ì„ ë³´ê´€
4. `th:erros` ì—ì„œ ë©”ì‹œì§€ ì½”ë“œë“¤ë¡œ ë©”ì‹œì§€ë¥¼ ìˆœì„œëŒ€ë¡œ ë©”ì‹œì§€ì—ì„œ ì°¾ê³ , ë…¸ì¶œ

# ğŸ§© ì˜¤ë¥˜ ì½”ë“œì™€ ë©”ì‹œì§€ ì²˜ë¦¬ 6

ê²€ì¦ ì˜¤ë¥˜ ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ì´ 2ê°€ì§€ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.<br>
- ê°œë°œìê°€ ì§ì ‘ ì„¤ì •í•œ ì˜¤ë¥˜ ì½”ë“œ -> `rejectValue()` ë¥¼ ì§ì ‘ í˜¸ì¶œ 
- ìŠ¤í”„ë§ì´ ì§ì ‘ ê²€ì¦ ì˜¤ë¥˜ì— ì¶”ê°€í•œ ê²½ìš° (ì£¼ë¡œ íƒ€ì… ì •ë³´ê°€ ë§ì§€ ì•Šì„ ë•Œ)

ìŠ¤í”„ë§ì€ íƒ€ì… ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë©´ `typeMismatch` ë¼ëŠ” ì˜¤ë¥˜ ì½”ë“œë¥¼ ì‚¬ìš©í•œë‹¤. ì´ ì˜¤ë¥˜ ì½”ë“œê°€ `MessageCodesResolver` ë¥¼ í†µí•˜ë©´ì„œ 4ê°€ì§€ ë©”ì‹œì§€ ì½”ë“œê°€ ìƒì„±ëœ ê²ƒì´ë‹¤.<br>
ì•„ì§ `errors.properties` ì— ë©”ì‹œì§€ ì½”ë“œê°€ ì—†ê¸° ë•Œë¬¸ì— ìŠ¤í”„ë§ì´ ìƒì„±í•œ ê¸°ë³¸ ë©”ì‹œì§€ê°€ ì¶œë ¥ëœë‹¤.<br>
ê·¸ë ‡ë‹¤ë©´ ê¸°ë³¸ ë©”ì‹œì§€ê°€ ì•„ë‹Œ ì§ì ‘ ì„¤ì •í•œ ë©”ì‹œì§€ë¥¼ ë³´ì—¬ì£¼ë„ë¡ ë³€ê²½í•˜ì.

## `errors.properties`
`src/main/resources/errors.properties`ì— ë‹¤ìŒ ë‚´ìš©ì„ ì¶”ê°€í•˜ì.
```
#ì¶”ê°€
typeMismatch.java.lang.Integer=ìˆ«ìë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.
typeMismatch=íƒ€ì… ì˜¤ë¥˜ì…ë‹ˆë‹¤.
```

# ğŸ§© Validator ë¶„ë¦¬ 1





















***
<br>

    ğŸ’› ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ğŸ‘»

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}