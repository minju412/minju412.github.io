---
title:  "[SPRING] ë¡œê·¸ì¸ ì²˜ë¦¬ - 1. ì¿ í‚¤, ì„¸ì…˜ "

categories:
  - Spring
tags:
  - [Framework, Spring, Java]

toc: true
toc_sticky: true
 
date: 2022-07-05 16:30:54
last_modified_at: 2022-07-05 16:30:58
---
ì´ì „ í”„ë¡œì íŠ¸ì— ì´ì–´ì„œ ë¡œê·¸ì¸ ì²˜ë¦¬ ê¸°ëŠ¥ì„ í•™ìŠµí•œë‹¤.
# package êµ¬ì¡°
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-07-05 á„‹á…©á„’á…® 4 56 36](https://user-images.githubusercontent.com/59405576/177278866-30b0c82a-f5e0-47bf-abe2-0b5dde129091.png)<br>
ë„ë©”ì¸ì´ ê°€ì¥ ì¤‘ìš”í•˜ë‹¤.<br>
ë„ë©”ì¸ = í™”ë©´, UI, ê¸°ìˆ  ì¸í”„ë¼ ë“±ë“±ì˜ ì˜ì—­ì€ ì œì™¸í•œ ì‹œìŠ¤í…œì´ êµ¬í˜„í•´ì•¼ í•˜ëŠ” í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ì—…ë¬´ ì˜ì—­ì„ ë§í•¨<br><br>
í–¥í›„ webì„ ë‹¤ë¥¸ ê¸°ìˆ ë¡œ ë°”ê¾¸ì–´ë„ ë„ë©”ì¸ì€ ê·¸ëŒ€ë¡œ ìœ ì§€í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.<br>
ì´ë ‡ê²Œ í•˜ë ¤ë©´ webì€ domainì„ ì•Œê³ ìˆì§€ë§Œ domainì€ webì„ ëª¨ë¥´ë„ë¡ ì„¤ê³„í•´ì•¼ í•œë‹¤. <br>
ì´ê²ƒì„ webì€ domainì„ ì˜ì¡´í•˜ì§€ë§Œ, domainì€ webì„ ì˜ì¡´í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  í‘œí˜„í•œë‹¤. <br><br>
ì˜ˆë¥¼ ë“¤ì–´ web íŒ¨í‚¤ì§€ë¥¼ ëª¨ë‘ ì‚­ì œí•´ë„ domainì—ëŠ” ì „í˜€ ì˜í–¥ì´ ì—†ë„ë¡ ì˜ì¡´ê´€ê³„ë¥¼ ì„¤ê³„í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤. <br>
ë°˜ëŒ€ë¡œ ì´ì•¼ê¸°í•˜ë©´ domainì€ webì„ ì°¸ì¡°í•˜ë©´ ì•ˆëœë‹¤.

# íšŒì› ê°€ì…
## `Member`
`src/main/java/hello/login/domain/member/Member.java`
```java
@Data
public class Member {

    private Long id;

    @NotEmpty
    private String loginId; // ë¡œê·¸ì¸ ID
    @NotEmpty
    private String name;
    @NotEmpty
    private String password;
}
```

## `MemberRepository`
`src/main/java/hello/login/domain/member/MemberRepository.java`
```java
@Slf4j
@Repository
public class MemberRepository {

    private static Map<Long, Member> store = new HashMap<>(); // static ì‚¬ìš©
    private static long sequence = 0L; // static ì‚¬ìš©

    public Member save(Member member){
        member.setId(++sequence);
        log.info("save: member={}", member);
        store.put(member.getId(), member);
        return member;
    }

    public Member findById(Long id){
        return store.get(id);
    }

    public Optional<Member> findByLoginId(String loginId){
        return findAll().stream()
                .filter(m -> m.getLoginId().equals(loginId))
                .findFirst();
    }

    public List<Member> findAll(){
        return new ArrayList<>(store.values());
    }

    public void clearStore(){
        store.clear();
    }
}
```

## ì»¨íŠ¸ë¡¤ëŸ¬ - `MemberController`
`src/main/java/hello/login/web/member/MemberController.java`
```java
@Controller
@RequiredArgsConstructor
@RequestMapping("/members")
public class MemberController {

    private final MemberRepository memberRepository;

    @GetMapping("/add")
    public String addForm(@ModelAttribute("member") Member member){
        return "members/addMemberForm";
    }

    @PostMapping("/add")
    public String save(@Valid @ModelAttribute Member member, BindingResult bindingResult){
        if(bindingResult.hasErrors()){
            return "members/addMemberForm";
        }

        memberRepository.save(member);
        return "redirect:/";
    }
}
```
`@ModelAttribute("member")` ë¥¼ `@ModelAttribute` ë¡œ ë³€ê²½í•´ë„ ê²°ê³¼ëŠ” ê°™ë‹¤. ì—¬ê¸°ì„œëŠ” IDEì—ì„œ ì¸ì‹ ë¬¸ì œê°€ ìˆì–´ì„œ ì ìš©í–ˆë‹¤.

## ë·° í…œí”Œë¦¿ - `addMemberForm`
`src/main/resources/templates/members/addMemberForm.html`
```html
<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <link th:href="@{/css/bootstrap.min.css}"
          href="../css/bootstrap.min.css" rel="stylesheet">
    <style>
        .container {
            max-width: 560px;
        }
        .field-error {
            border-color: #dc3545;
            color: #dc3545;
        }
    </style>
</head>
<body>

<div class="container">

    <div class="py-5 text-center">
        <h2>íšŒì› ê°€ì…</h2>
    </div>

    <h4 class="mb-3">íšŒì› ì •ë³´ ì…ë ¥</h4>

    <form action="" th:action th:object="${member}" method="post">

        <div th:if="${#fields.hasGlobalErrors()}">
            <p class="field-error" th:each="err : ${#fields.globalErrors()}" th:text="${err}">ì „ì²´ ì˜¤ë¥˜ ë©”ì‹œì§€</p>
        </div>

        <div>
            <label for="loginId">ë¡œê·¸ì¸ ID</label>
            <input type="text" id="loginId" th:field="*{loginId}" class="form-control"
                   th:errorclass="field-error">
            <div class="field-error" th:errors="*{loginId}" />
        </div>
        <div>
            <label for="password">ë¹„ë°€ë²ˆí˜¸</label>
            <input type="password" id="password" th:field="*{password}" class="form-control"
                   th:errorclass="field-error">
            <div class="field-error" th:errors="*{password}" />
        </div>
        <div>
            <label for="name">ì´ë¦„</label>
            <input type="text" id="name" th:field="*{name}" class="form-control"
                   th:errorclass="field-error">
            <div class="field-error" th:errors="*{name}" />
        </div>


        <hr class="my-4">

        <div class="row">
            <div class="col">
                <button class="w-100 btn btn-primary btn-lg" type="submit">íšŒì› ê°€ì…</button>
            </div>
            <div class="col">
                <button class="w-100 btn btn-secondary btn-lg" onclick="location.href='items.html'"
                        th:onclick="|location.href='@{/}'|"
                        type="button">ì·¨ì†Œ</button>
            </div>
        </div>

    </form>

</div> <!-- /container -->
</body>
</html>
```

# ë¡œê·¸ì¸ ê¸°ëŠ¥





















***
<br>

    ğŸ’› ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ğŸ‘»

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}