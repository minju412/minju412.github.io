---
title:  "[SPRING] ë©”ì‹œì§€, êµ­ì œí™” "

categories:
  - Spring
tags:
  - [Framework, Spring, Java]

toc: true
toc_sticky: true
 
date: 2022-06-30 14:41:21
last_modified_at: 2022-06-30 14:41:23
---
ì´ì „ í”„ë¡œì íŠ¸ì— ì´ì–´ì„œ ë©”ì‹œì§€, êµ­ì œí™” ê¸°ëŠ¥ì„ í•™ìŠµí•´ë³´ì.

# ë©”ì‹œì§€, êµ­ì œí™” ì†Œê°œ
## ë©”ì‹œì§€
ì•…ë•? ê¸°íšìê°€ í™”ë©´ì— ë³´ì´ëŠ” ë¬¸êµ¬ê°€ ë§ˆìŒì— ë“¤ì§€ ì•ŠëŠ”ë‹¤ê³ , ìƒí’ˆëª…ì´ë¼ëŠ” ë‹¨ì–´ë¥¼ ëª¨ë‘ ìƒí’ˆì´ë¦„ìœ¼ë¡œ ê³ ì³ë‹¬ë¼ê³  í•˜ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ?<br>
ì—¬ëŸ¬ í™”ë©´ì— ë³´ì´ëŠ” ìƒí’ˆëª…, ê°€ê²©, ìˆ˜ëŸ‰ ë“±, label ì— ìˆëŠ” ë‹¨ì–´ë¥¼ ë³€ê²½í•˜ë ¤ë©´ ë‹¤ìŒ í™”ë©´ë“¤ì„ ë‹¤ ì°¾ì•„ê°€ë©´ì„œ ëª¨ë‘ ë³€ê²½í•´ì•¼ í•œë‹¤. <br>
ì§€ê¸ˆì²˜ëŸ¼ í™”ë©´ ìˆ˜ê°€ ì ìœ¼ë©´ ë¬¸ì œê°€ ë˜ì§€ ì•Šì§€ë§Œ í™”ë©´ì´ ìˆ˜ì‹­ê°œ ì´ìƒì´ë¼ë©´ ìˆ˜ì‹­ê°œì˜ íŒŒì¼ì„ ëª¨ë‘ ê³ ì³ì•¼ í•œë‹¤.<br><br>
ì™œëƒí•˜ë©´ í•´ë‹¹ HTML íŒŒì¼ì— ë©”ì‹œì§€ê°€ í•˜ë“œì½”ë”© ë˜ì–´ ìˆê¸° ë•Œë¬¸ì´ë‹¤.<br>
ì´ëŸ° ë‹¤ì–‘í•œ ë©”ì‹œì§€ë¥¼ í•œ ê³³ì—ì„œ ê´€ë¦¬í•˜ë„ë¡ í•˜ëŠ” ê¸°ëŠ¥ì„ ë©”ì‹œì§€ ê¸°ëŠ¥ì´ë¼ í•œë‹¤.<br><br>
ì˜ˆë¥¼ ë“¤ì–´ì„œ `messages.properties` ë¼ëŠ” ë©”ì‹œì§€ ê´€ë¦¬ìš© íŒŒì¼ì„ ë§Œë“¤ê³ 
```
item=ìƒí’ˆ 
item.id=ìƒí’ˆ ID 
item.itemName=ìƒí’ˆëª… 
item.price=ê°€ê²© 
item.quantity=ìˆ˜ëŸ‰
```
ê° HTMLë“¤ì€ ë‹¤ìŒê³¼ ê°™ì´ í•´ë‹¹ ë°ì´í„°ë¥¼ key ê°’ìœ¼ë¡œ ë¶ˆëŸ¬ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.<br><br>
addForm.html<br>
`<label for="itemName" th:text="#{item.itemName}"></label>`<br><br>
editForm.html<br>
`<label for="itemName" th:text="#{item.itemName}"></label>`


## êµ­ì œí™”
ë©”ì‹œì§€ì—ì„œ í•œ ë°œ ë” ë‚˜ê°€ë³´ì.<br>
ë©”ì‹œì§€ì—ì„œ ì„¤ëª…í•œ ë©”ì‹œì§€ íŒŒì¼( `messages.properties` )ì„ ê° ë‚˜ë¼ë³„ë¡œ ë³„ë„ë¡œ ê´€ë¦¬í•˜ë©´ ì„œë¹„ìŠ¤ë¥¼ êµ­ì œí™” í•  ìˆ˜ ìˆë‹¤.<br>
ì˜ˆë¥¼ ë“¤ì–´ì„œ ë‹¤ìŒê³¼ ê°™ì´ 2ê°œì˜ íŒŒì¼ì„ ë§Œë“¤ì–´ì„œ ë¶„ë¥˜í•œë‹¤.<br><br>
`messages_en.properties`
```
item=Item
item.id=Item ID
item.itemName=Item Name
item.price=price
item.quantity=quantity
```

`messages_ko.properties`
```
item=ìƒí’ˆ 
item.id=ìƒí’ˆ ID 
item.itemName=ìƒí’ˆëª… 
item.price=ê°€ê²© 
item.quantity=ìˆ˜ëŸ‰
```
<br>
ì˜ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ” ì‚¬ëŒì´ë©´ `messages_en.properties` ë¥¼ ì‚¬ìš©í•˜ê³ , í•œêµ­ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ” ì‚¬ëŒì´ë©´ `messages_ko.properties `ë¥¼ ì‚¬ìš©í•˜ê²Œ ê°œë°œí•˜ë©´ ëœë‹¤.<br>
ì´ë ‡ê²Œ í•˜ë©´ ì‚¬ì´íŠ¸ë¥¼ êµ­ì œí™” í•  ìˆ˜ ìˆë‹¤.<br><br>
í•œêµ­ì—ì„œ ì ‘ê·¼í•œ ê²ƒì¸ì§€ ì˜ì–´ì—ì„œ ì ‘ê·¼í•œ ê²ƒì¸ì§€ëŠ” ì¸ì‹í•˜ëŠ” ë°©ë²•ì€ HTTP `accept-language` í•´ë” ê°’ì„ ì‚¬ìš©í•˜ê±°ë‚˜ ì‚¬ìš©ìê°€ ì§ì ‘ ì–¸ì–´ë¥¼ ì„ íƒí•˜ë„ë¡ í•˜ê³ , ì¿ í‚¤ ë“±ì„ ì‚¬ìš©í•´ì„œ ì²˜ë¦¬í•˜ë©´ ëœë‹¤.<br><br>
ë©”ì‹œì§€ì™€ êµ­ì œí™” ê¸°ëŠ¥ì„ ì§ì ‘ êµ¬í˜„í•  ìˆ˜ë„ ìˆê² ì§€ë§Œ, ìŠ¤í”„ë§ì€ ê¸°ë³¸ì ì¸ ë©”ì‹œì§€ì™€ êµ­ì œí™” ê¸°ëŠ¥ì„ ëª¨ë‘ ì œê³µí•œë‹¤. <br>
ê·¸ë¦¬ê³  íƒ€ì„ë¦¬í”„ë„ ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ë©”ì‹œì§€ì™€ êµ­ì œí™” ê¸°ëŠ¥ì„ í¸ë¦¬í•˜ê²Œ í†µí•©í•´ì„œ ì œê³µí•œë‹¤. <br>
ì§€ê¸ˆë¶€í„° ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ë©”ì‹œì§€ì™€ êµ­ì œí™” ê¸°ëŠ¥ì„ ì•Œì•„ë³´ì.

# ë©”ì‹œì§€ ì†ŒìŠ¤ ì„¤ì •
## ìŠ¤í”„ë§
ìŠ¤í”„ë§ì€ ê¸°ë³¸ì ì¸ ë©”ì‹œì§€ ê´€ë¦¬ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.<br>
ë©”ì‹œì§€ ê´€ë¦¬ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” `MessageSource` ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ë©´ ë˜ëŠ”ë°, `MessageSource` ëŠ” ì¸í„°í˜ì´ìŠ¤ì´ë‹¤. ë”°ë¼ì„œ êµ¬í˜„ì²´ì¸ `ResourceBundleMessageSource` ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ë©´ ëœë‹¤.<br>
í•˜ì§€ë§Œ, ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ `MessageSource` ë¥¼ ìë™ìœ¼ë¡œ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê¸° ë•Œë¬¸ì— í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤! ğŸ˜²

## ìŠ¤í”„ë§ ë¶€íŠ¸
ìŠ¤í”„ë§ ë¶€íŠ¸ë¥¼ ì‚¬ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë©”ì‹œì§€ ì†ŒìŠ¤ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.<br>
`/resources/application.properties`
```
spring.messages.basename=messages,config.i18n.messages
``` 

### 1. ìŠ¤í”„ë§ ë¶€íŠ¸ ë©”ì‹œì§€ ì†ŒìŠ¤ ê¸°ë³¸ ê°’
`/resources/application.properties`
```
spring.messages.basename=messages
```
(ìœ„ ì½”ë“œëŠ” defaultì´ê¸° ë•Œë¬¸ì— ì§ì ‘ ë“±ë¡í•˜ì§€ ì•Šì•„ë„ ìë™ìœ¼ë¡œ ë“±ë¡ëœë‹¤.)<br><br>
`MessageSource` ë¥¼ ìŠ¤í”„ë§ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ì§€ ì•Šê³ , ìŠ¤í”„ë§ ë¶€íŠ¸ì™€ ê´€ë ¨ëœ ë³„ë„ì˜ ì„¤ì •ì„ í•˜ì§€ ì•Šìœ¼ë©´ `messages` ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ê¸°ë³¸ ë“±ë¡ëœë‹¤. <br>
ë”°ë¼ì„œ `messages_en.properties` , `messages_ko.properties` , `messages.properties` íŒŒì¼ë§Œ ë“±ë¡í•˜ë©´ ìë™ìœ¼ë¡œ ì¸ì‹ëœë‹¤.

### 2. ë©”ì‹œì§€ íŒŒì¼ ë§Œë“¤ê¸°
- `messages.properties` :ê¸°ë³¸ ê°’ìœ¼ë¡œ ì‚¬ìš©(í•œê¸€)
- `messages_en.properties` : ì˜ì–´ êµ­ì œí™” ì‚¬ìš©
<br><br>

`/resources/messages.properties`
```
hello=ì•ˆë…• 
hello.name=ì•ˆë…• {0}
```

`/resources/messages_en.properties`
```
hello=hello 
hello.name=hello {0}
```

### 3. ìŠ¤í”„ë§ ë©”ì‹œì§€ ì†ŒìŠ¤ ì‚¬ìš©
ìŠ¤í”„ë§ì´ ì œê³µí•˜ëŠ” ë©”ì‹œì§€ ì†ŒìŠ¤ë¥¼ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ í†µí•´ì„œ í•™ìŠµí•´ë³´ì.<br>
`test/java/hello/itemservice/message.MessageSourceTest.java` í¼ì•Œìš¸ ìƒì„±í•œë‹¤.
#### 1) `messages.properties`ì— ë©”ì‹œì§€ê°€ ìˆëŠ” ê²½ìš°
```java
@SpringBootTest // ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ìë™ìœ¼ë¡œ MessageSourceë¥¼ ë“±ë¡í•´ì¤€ë‹¤.
public class MessageSourceTest {

  @Autowired
  MessageSource ms;

  @Test
  void helloMessage(){
      String result = ms.getMessage("hello", null, null);
      assertThat(result).isEqualTo("ì•ˆë…•");
  }
}
```
- `ms.getMessage("hello", null, null)`<br>- code: `hello`<br>- args: `null`<br>- locale: `null`

ê°€ì¥ ë‹¨ìˆœí•œ í…ŒìŠ¤íŠ¸ëŠ” ë©”ì‹œì§€ ì½”ë“œë¡œ `hello` ë¥¼ ì…ë ¥í•˜ê³  ë‚˜ë¨¸ì§€ ê°’ì€ `null` ì„ ì…ë ¥í–ˆë‹¤.<br>
`locale` ì •ë³´ê°€ ì—†ìœ¼ë©´ `basename` ì—ì„œ ì„¤ì •í•œ ê¸°ë³¸ ì´ë¦„ ë©”ì‹œì§€ íŒŒì¼ì„ ì¡°íšŒí•œë‹¤. <br>
`basename` ìœ¼ë¡œ `messages` ë¥¼ ì§€ì • í–ˆìœ¼ë¯€ë¡œ `messages.properties` íŒŒì¼ì—ì„œ ë°ì´í„° ì¡°íšŒí•œë‹¤.

##### í•œê¸€ ì¸ì½”ë”© ì˜¤ë¥˜ê°€ ë°œìƒí•œë‹¤ë©´?
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-30 á„‹á…©á„’á…® 4 41 29](https://user-images.githubusercontent.com/59405576/176621161-303e4842-4547-4887-9aa9-a738182c31e8.png)
1. ì¸í…”ë¦¬ì œì´ì—ì„œ Preferenceì— ë“¤ì–´ê°„ë‹¤.
2. [Editor] -> [File Encodings] ë©”ë‰´ì—ì„œ<br>
Global Encodeing, Project Encoding, Default encoding for properties filesë¥¼ ëª¨ë‘ UTF-8ë¡œ ì„¤ì •í•˜ê³  ì¸í…”ë¦¬ì œì´ë¥¼ ì¬ì‹œì‘í•œë‹¤.
3. ê·¸ í›„ `messages.properties` ë¥¼ ë‹¤ì‹œ ì—´ì–´ë³´ë©´ í•œê¸€ì´ ê¹¨ì§„ìƒíƒœë¡œ ê¸°ë¡ë˜ì–´ìˆëŠ”ë°, <br>
ì´ê²ƒì„ ë‹¤ì‹œ í•œê¸€ë¡œ ì…ë ¥í•´ì„œ ì €ì¥í•œ í›„ í…ŒìŠ¤íŠ¸ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•œë‹¤.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-30 á„‹á…©á„’á…® 4 43 51](https://user-images.githubusercontent.com/59405576/176621612-15867be4-7527-47e5-860c-01cd1aa6e334.png)

#### 2) `messages.properties`ì— ë©”ì‹œì§€ê°€ ì—†ëŠ” ê²½ìš° & ê¸°ë³¸ ë©”ì‹œì§€
```java
@SpringBootTest // ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ìë™ìœ¼ë¡œ MessageSourceë¥¼ ë“±ë¡í•´ì¤€ë‹¤.
public class MessageSourceTest {

  @Autowired
  MessageSource ms;

  @Test
  void notFountMessageCode(){
      assertThatThrownBy(() -> ms.getMessage("no_code", null, null))
              .isInstanceOf(NoSuchMessageException.class);
  }

  @Test
  void notFountMessageCodeDefaultMessage(){
      String result = ms.getMessage("no_code", null, "ê¸°ë³¸ ë©”ì‹œì§€", null);
      assertThat(result).isEqualTo("ê¸°ë³¸ ë©”ì‹œì§€");
  }
}
```
- ë©”ì‹œì§€ê°€ ì—†ëŠ” ê²½ìš°ì—ëŠ” `NoSuchMessageException` ì´ ë°œìƒí•œë‹¤.
- ë©”ì‹œì§€ê°€ ì—†ì–´ë„ ê¸°ë³¸ ë©”ì‹œì§€( `defaultMessage` )ë¥¼ ì‚¬ìš©í•˜ë©´ ê¸°ë³¸ ë©”ì‹œì§€ê°€ ë°˜í™˜ëœë‹¤.

#### 3) ë§¤ê°œë³€ìˆ˜ ì‚¬ìš©
```java
@SpringBootTest // ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ìë™ìœ¼ë¡œ MessageSourceë¥¼ ë“±ë¡í•´ì¤€ë‹¤.
public class MessageSourceTest {

  @Autowired
  MessageSource ms;

  @Test
  void defaultLang(){
      assertThat(ms.getMessage("hello", null, null)).isEqualTo("ì•ˆë…•");
      assertThat(ms.getMessage("hello", null, Locale.KOREA)).isEqualTo("ì•ˆë…•");
  }
}
```
ë‹¤ìŒ ë©”ì‹œì§€ì˜ `{0}` ë¶€ë¶„ì€ ë§¤ê°œë³€ìˆ˜ë¥¼ ì „ë‹¬í•´ì„œ ì¹˜í™˜í•  ìˆ˜ ìˆë‹¤. <br>
`hello.name=ì•ˆë…• {0}` -> Spring ë‹¨ì–´ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ -> `ì•ˆë…• Spring`

#### 4) êµ­ì œí™” íŒŒì¼ ì„ íƒ
locale ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ êµ­ì œí™” íŒŒì¼ì„ ì„ íƒí•œë‹¤.
- `Locale`ì´ `en_US` ì˜ ê²½ìš° `messages_en_US` -> `messages_en` -> `messages` ìˆœì„œë¡œ ì°¾ëŠ”ë‹¤.
- `Locale`ì— ë§ì¶”ì–´ êµ¬ì²´ì ì¸ ê²ƒì´ ìˆìœ¼ë©´ êµ¬ì²´ì ì¸ ê²ƒì„ ì°¾ê³ , ì—†ìœ¼ë©´ ë””í´íŠ¸ë¥¼ ì°¾ëŠ”ë‹¤ê³  ì´í•´í•˜ë©´ ëœë‹¤.

```java
@SpringBootTest // ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ìë™ìœ¼ë¡œ MessageSourceë¥¼ ë“±ë¡í•´ì¤€ë‹¤.
public class MessageSourceTest {

  @Autowired
  MessageSource ms;

  @Test
  void defaultLang(){
      assertThat(ms.getMessage("hello", null, null)).isEqualTo("ì•ˆë…•");
      assertThat(ms.getMessage("hello", null, Locale.KOREA)).isEqualTo("ì•ˆë…•");
  }

  @Test
  void enLang(){
      assertThat(ms.getMessage("hello", null, Locale.ENGLISH)).isEqualTo("hello");
  }
}
```

### 4. ì›¹ ì–´í”Œë¦¬ì¼€ì´ì…˜ì— ë¯¸ì‹œì§€ ì ìš©í•˜ê¸°










***
<br>

    ğŸ’› ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ğŸ‘»

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}