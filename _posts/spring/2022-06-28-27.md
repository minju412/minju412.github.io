---
title:  "[SPRING] 타임리프 - 기본 기능 "

categories:
  - Spring
tags:
  - [Framework, Spring, Java]

toc: true
toc_sticky: true
 
date: 2022-06-28 15:18:20
last_modified_at: 2022-06-28 15:18:23
---

# 타임리프 특징
## 서버 사이드 HTML 렌더링 (SSR)
타임리프는 백엔드 서버에서 HTML을 동적으로 렌더링 하는 용도로 사용된다.

## 네츄럴 템플릿
타임리프는 순수 HTML을 최대한 유지하는 특징이 있다.<br><br>
타임리프로 작성한 파일은 HTML을 유지하기 때문에 웹 브라우저에서 파일을 직접 열어도 내용을 확인할 수 있고, 서버를 통해 뷰 템플릿을 거치면 동적으로 변경된 결과를 확인할 수 있다.
JSP를 포함한 다른 뷰 템플릿들은 해당 파일을 열면, 예를 들어서 JSP 파일 자체를 그대로 웹 브라우저에서 열어보면 JSP 소스코드와 HTML이 뒤죽박죽 섞여서 웹 브라우저에서 정상적인 HTML 결과를 확인할 수 없다. 오직 서버를 통해서 JSP가 렌더링 되고 HTML 응답 결과를 받아야 화면을 확인할 수 있다.<br><br>
반면에 타임리프로 작성된 파일은 해당 파일을 그대로 웹 브라우저에서 열어도 정상적인 HTML 결과를 확인할 수 있다. 물론 이 경우 동적으로 결과가 렌더링 되지는 않는다. 하지만 HTML 마크업 결과가 어떻게 되는지 파일만 열어도 바로 확인할 수 있다.<br><br>
이렇게 순수 HTML을 그대로 유지하면서 뷰 템플릿도 사용할 수 있는 타임리프의 특징을 네츄럴 템플릿 (natural templates)이라 한다.

## 스프링 통합 지원
타임리프는 스프링과 자연스럽게 통합되고, 스프링의 다양한 기능을 편리하게 사용할 수 있게 지원한다. 

# 타임리프 기본 기능
## 타임리프 사용 선언
```html
<html xmlns:th="http://www.thymeleaf.org">
```

## 1. 텍스트 - text, utext
### Escape - escape 처리 O
타임리프는 다음 두 가지 방법으로 텍스트를 출력할 수 있다.
- `th:text` 
- `[[...]]` 

컨트롤러에서 `model.addAttribute("data", "Hello <b>Spring!</b>");`로 모델을 추가한다.<br>
뷰는 아래와 같이 작성한다.
```html
<li>th:text 사용 <span th:text="${data}"></span></li>
<li>컨텐츠 안에서 직접 출력하기 = [[${data}]]</li>
```

웹 브라우저에서 실행 결과를 보자.<br>
- 웹 브라우저: `Hello <b>Spring!</b>`
- 소스보기: `Hello &lt;b&gt;Spring!&lt;/b&gt;`

웹 브라우저에서 `<b>` 태그가 그대로 나온다. 소스보기를 하면 `<` 부분이 `&lt;`로 변경된 것을 확인할 수 있다.

#### HTML 엔티티
웹브라우저는 `<`를 HTML 태그의 시작으로 인식한다. 따라서 `<`를 태그의 시작이 아니라 문자로 표현할 수 있는 방법이 필요한데, 이것을 HTML 엔티티라 한다. <br>
그리고 이렇게 HTML에서 사용하는 특수 문자를 HTML 엔티티로 변경하는 것을 이스케이프(escape)라 한다. <br>
그리고 타임리프가 제공하는 `th:text` , `[[...]]` 는 기본적으로 이스케이스(escape)를 제공한다.

- `<` -> `&lt;` 
- `>` -> `&gt;`
- 기타 수 많은 HTML 엔티티가 있다.

### Unescape - escape 처리 X
개발자가 의도한 것은 `<b>` 가 있으면 해당 부분을 강조하는 것이 목적이었다.<br>
이스케이프 기능을 사용하지 않으려면 어떻게 해야할까?<br>
타임리프는 다음 두 기능을 제공한다. 
- `th:text` -> `th:utext`
- `[[...]`] -> `[(...)]`

컨트롤러에서는 이전과 마찬가지로 `model.addAttribute("data", "Hello <b>Spring!</b>");`로 모델을 추가한다.<br>
뷰는 아래와 같이 작성한다.
```html
<li>th:utext 사용 <span th:utext="${data}"></span></li>
<li><span th:inline="none">[(...)] = </span>[(${data})]</li>
```

- `th:inline="none"`: 타임리프는 `[[...]]` 를 해석하기 때문에, 화면에 `[[...]]` 글자를 보여줄 수 없다. 이 태그 안에서는 타임리프가 해석하지 말라는 옵션이다.

실행해보면 다음과 같이 정상 수행되는 것을 확인할 수 있다. 
- 웹 브라우저: Hello <b>Spring!</b>
- 소스보기: `Hello <b>Spring!</b>`

> 🚨 주의!<br>
실제 서비스를 개발하다 보면 escape를 사용하지 않아서 HTML이 정상 렌더링 되지 않는 수 많은 문제가 발생한다. <br>
escape를 기본으로 하고, 꼭 필요한 때만 unescape를 사용하자.


***
<br>

    💛 개인 공부 기록용 블로그입니다. 👻

[맨 위로 이동하기](#){: .btn .btn--primary }{: .align-right}