---
title:  "[SPRING] íƒ€ì„ë¦¬í”„ - ê¸°ë³¸ ê¸°ëŠ¥ "

categories:
  - Spring
tags:
  - [Framework, Spring, Java]

toc: true
toc_sticky: true
 
date: 2022-06-28 15:18:20
last_modified_at: 2022-06-28 15:18:23
---

# íƒ€ì„ë¦¬í”„ íŠ¹ì§•
## ì„œë²„ ì‚¬ì´ë“œ HTML ë Œë”ë§ (SSR)
íƒ€ì„ë¦¬í”„ëŠ” ë°±ì—”ë“œ ì„œë²„ì—ì„œ HTMLì„ ë™ì ìœ¼ë¡œ ë Œë”ë§ í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©ëœë‹¤.

## ë„¤ì¸„ëŸ´ í…œí”Œë¦¿
íƒ€ì„ë¦¬í”„ëŠ” ìˆœìˆ˜ HTMLì„ ìµœëŒ€í•œ ìœ ì§€í•˜ëŠ” íŠ¹ì§•ì´ ìˆë‹¤.<br><br>
íƒ€ì„ë¦¬í”„ë¡œ ì‘ì„±í•œ íŒŒì¼ì€ HTMLì„ ìœ ì§€í•˜ê¸° ë•Œë¬¸ì— ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ íŒŒì¼ì„ ì§ì ‘ ì—´ì–´ë„ ë‚´ìš©ì„ í™•ì¸í•  ìˆ˜ ìˆê³ , ì„œë²„ë¥¼ í†µí•´ ë·° í…œí”Œë¦¿ì„ ê±°ì¹˜ë©´ ë™ì ìœ¼ë¡œ ë³€ê²½ëœ ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
JSPë¥¼ í¬í•¨í•œ ë‹¤ë¥¸ ë·° í…œí”Œë¦¿ë“¤ì€ í•´ë‹¹ íŒŒì¼ì„ ì—´ë©´, ì˜ˆë¥¼ ë“¤ì–´ì„œ JSP íŒŒì¼ ìì²´ë¥¼ ê·¸ëŒ€ë¡œ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì—´ì–´ë³´ë©´ JSP ì†ŒìŠ¤ì½”ë“œì™€ HTMLì´ ë’¤ì£½ë°•ì£½ ì„ì—¬ì„œ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì •ìƒì ì¸ HTML ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ì—†ë‹¤. ì˜¤ì§ ì„œë²„ë¥¼ í†µí•´ì„œ JSPê°€ ë Œë”ë§ ë˜ê³  HTML ì‘ë‹µ ê²°ê³¼ë¥¼ ë°›ì•„ì•¼ í™”ë©´ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.<br><br>
ë°˜ë©´ì— íƒ€ì„ë¦¬í”„ë¡œ ì‘ì„±ëœ íŒŒì¼ì€ í•´ë‹¹ íŒŒì¼ì„ ê·¸ëŒ€ë¡œ ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì—´ì–´ë„ ì •ìƒì ì¸ HTML ê²°ê³¼ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë¬¼ë¡  ì´ ê²½ìš° ë™ì ìœ¼ë¡œ ê²°ê³¼ê°€ ë Œë”ë§ ë˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. í•˜ì§€ë§Œ HTML ë§ˆí¬ì—… ê²°ê³¼ê°€ ì–´ë–»ê²Œ ë˜ëŠ”ì§€ íŒŒì¼ë§Œ ì—´ì–´ë„ ë°”ë¡œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.<br><br>
ì´ë ‡ê²Œ ìˆœìˆ˜ HTMLì„ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ë©´ì„œ ë·° í…œí”Œë¦¿ë„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” íƒ€ì„ë¦¬í”„ì˜ íŠ¹ì§•ì„ ë„¤ì¸„ëŸ´ í…œí”Œë¦¿ (natural templates)ì´ë¼ í•œë‹¤.

## ìŠ¤í”„ë§ í†µí•© ì§€ì›
íƒ€ì„ë¦¬í”„ëŠ” ìŠ¤í”„ë§ê³¼ ìì—°ìŠ¤ëŸ½ê²Œ í†µí•©ë˜ê³ , ìŠ¤í”„ë§ì˜ ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ í¸ë¦¬í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ì§€ì›í•œë‹¤. 

# íƒ€ì„ë¦¬í”„ ê¸°ë³¸ ê¸°ëŠ¥
## íƒ€ì„ë¦¬í”„ ì‚¬ìš© ì„ ì–¸
```html
<html xmlns:th="http://www.thymeleaf.org">
```

## 1. í…ìŠ¤íŠ¸ - text, utext

### ì»¨íŠ¸ë¡¤ëŸ¬
```java
@Controller
@RequestMapping("/basic")
public class BasicController {

  @GetMapping("/text-basic")
  public String textBasic(Model model){
      model.addAttribute("data", "<b>Hello Spring!</b>");
      return "basic/text-basic";
  }

  @GetMapping("/text-unescaped")
  public String textUnescaped(Model model){
      model.addAttribute("data", "Hello <b>Spring!</b>");
      return "basic/text-unescaped";
  }
}
```

### ë·°
#### Escape
íƒ€ì„ë¦¬í”„ëŠ” ë‹¤ìŒ ë‘ ê°€ì§€ ë°©ë²•ìœ¼ë¡œ í…ìŠ¤íŠ¸ë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆë‹¤.
- `th:text` 
- `[[...]]` 

```html
<li>th:text ì‚¬ìš© <span th:text="${data}"></span></li>
<li>ì»¨í…ì¸  ì•ˆì—ì„œ ì§ì ‘ ì¶œë ¥í•˜ê¸° = [[${data}]]</li>
```

ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰ ê²°ê³¼ë¥¼ ë³´ì.<br>
- ì›¹ ë¸Œë¼ìš°ì €: `Hello <b>Spring!</b>`
- ì†ŒìŠ¤ë³´ê¸°: `Hello &lt;b&gt;Spring!&lt;/b&gt;`

ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ `<b>` íƒœê·¸ê°€ ê·¸ëŒ€ë¡œ ë‚˜ì˜¨ë‹¤. ì†ŒìŠ¤ë³´ê¸°ë¥¼ í•˜ë©´ `<` ë¶€ë¶„ì´ `&lt;`ë¡œ ë³€ê²½ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

##### HTML ì—”í‹°í‹°
ì›¹ë¸Œë¼ìš°ì €ëŠ” `<`ë¥¼ HTML íƒœê·¸ì˜ ì‹œì‘ìœ¼ë¡œ ì¸ì‹í•œë‹¤. ë”°ë¼ì„œ `<`ë¥¼ íƒœê·¸ì˜ ì‹œì‘ì´ ì•„ë‹ˆë¼ ë¬¸ìë¡œ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ í•„ìš”í•œë°, ì´ê²ƒì„ HTML ì—”í‹°í‹°ë¼ í•œë‹¤. <br>
ê·¸ë¦¬ê³  ì´ë ‡ê²Œ HTMLì—ì„œ ì‚¬ìš©í•˜ëŠ” íŠ¹ìˆ˜ ë¬¸ìë¥¼ HTML ì—”í‹°í‹°ë¡œ ë³€ê²½í•˜ëŠ” ê²ƒì„ ì´ìŠ¤ì¼€ì´í”„(escape)ë¼ í•œë‹¤. <br>
ê·¸ë¦¬ê³  íƒ€ì„ë¦¬í”„ê°€ ì œê³µí•˜ëŠ” `th:text` , `[[...]]` ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì´ìŠ¤ì¼€ì´ìŠ¤(escape)ë¥¼ ì œê³µí•œë‹¤.

- `<` -> `&lt;` 
- `>` -> `&gt;`
- ê¸°íƒ€ ìˆ˜ ë§ì€ HTML ì—”í‹°í‹°ê°€ ìˆë‹¤.

#### Unescape
ê°œë°œìê°€ ì˜ë„í•œ ê²ƒì€ `<b>` ê°€ ìˆìœ¼ë©´ í•´ë‹¹ ë¶€ë¶„ì„ ê°•ì¡°í•˜ëŠ” ê²ƒì´ ëª©ì ì´ì—ˆë‹¤.<br>
ì´ìŠ¤ì¼€ì´í”„ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë ¤ë©´ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ?<br>
íƒ€ì„ë¦¬í”„ëŠ” ë‹¤ìŒ ë‘ ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. 
- `th:text` -> `th:utext`
- `[[...]`] -> `[(...)]`

```html
<li>th:utext ì‚¬ìš© <span th:utext="${data}"></span></li>
<li><span th:inline="none">[(...)] = </span>[(${data})]</li>
```

- `th:inline="none"`: íƒ€ì„ë¦¬í”„ëŠ” `[[...]]` ë¥¼ í•´ì„í•˜ê¸° ë•Œë¬¸ì—, í™”ë©´ì— `[[...]]` ê¸€ìë¥¼ ë³´ì—¬ì¤„ ìˆ˜ ì—†ë‹¤. ì´ íƒœê·¸ ì•ˆì—ì„œëŠ” íƒ€ì„ë¦¬í”„ê°€ í•´ì„í•˜ì§€ ë§ë¼ëŠ” ì˜µì…˜ì´ë‹¤.

ì‹¤í–‰í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì •ìƒ ìˆ˜í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 
- ì›¹ ë¸Œë¼ìš°ì €: Hello <b>Spring!</b>
- ì†ŒìŠ¤ë³´ê¸°: `Hello <b>Spring!</b>`

> ğŸš¨ ì£¼ì˜!<br>
ì‹¤ì œ ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•˜ë‹¤ ë³´ë©´ escapeë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ì„œ HTMLì´ ì •ìƒ ë Œë”ë§ ë˜ì§€ ì•ŠëŠ” ìˆ˜ ë§ì€ ë¬¸ì œê°€ ë°œìƒí•œë‹¤. <br>
escapeë¥¼ ê¸°ë³¸ìœ¼ë¡œ í•˜ê³ , ê¼­ í•„ìš”í•œ ë•Œë§Œ unescapeë¥¼ ì‚¬ìš©í•˜ì.

## 2. ë³€ìˆ˜ - SpringEL
### ì»¨íŠ¸ë¡¤ëŸ¬
```java
@Controller
@RequestMapping("/basic")
public class BasicController {

  @GetMapping("/variable")
  public String variable(Model model){
      User userA = new User("userA", 10);
      User userB = new User("userB", 20);

      List<User> list = new ArrayList<>();
      list.add(userA);
      list.add(userB);

      Map<String, User> map = new HashMap<>();
      map.put("userA", userA);
      map.put("userB", userB);

      model.addAttribute("user", userA);
      model.addAttribute("users", list);
      model.addAttribute("userMap", map);

      return "basic/variable";
  }

  @Data
  static class User{
      private String username;
      private int age;

      public User(String username, int age) {
          this.username = username;
          this.age = age;
      }
  }
}
```

### ë·°
```html
...

<body>
<h1>SpringEL í‘œí˜„ì‹</h1>
<ul>Object
    <li>${user.username} = <span th:text="${user.username}"></span></li>
    <li>${user['username']} = <span th:text="${user['username']}"></span></li>
    <li>${user.getUsername()} = <span th:text="${user.getUsername()}"></span></li>
</ul>
<ul>List
    <li>${users[0].username} = <span th:text="${users[0].username}"></span>
    </li>
    <li>${users[0]['username']} = <span th:text="${users[0]['username']}"></span>
    </li>
    <li>${users[0].getUsername()} = <span th:text="${users[0].getUsername()}"></span></li>
</ul>
<ul>Map
    <li>${userMap['userA'].username} = <span th:text="${userMap['userA'].username}"></span></li>
    <li>${userMap['userA']['username']} = <span th:text="${userMap['userA']['username']}"></span></li>
    <li>${userMap['userA'].getUsername()} = <span th:text="${userMap['userA'].getUsername()}"></span></li>
</ul>

<h1>ì§€ì—­ ë³€ìˆ˜ - (th:with)</h1>
<div th:with="first=${users[0]}">
    <p>ì²˜ìŒ ì‚¬ëŒì˜ ì´ë¦„ì€ <span th:text="${first.username}"></span></p>
</div>

</body>
</html>
```

#### Object
- `user.username` : userì˜ usernameì„ í”„ë¡œí¼í‹° ì ‘ê·¼ -> `user.getUsername()`<br>
- `user['username']` : ìœ„ì™€ ê°™ìŒ -> `user.getUsername()` <br>
- `user.getUsername()` : userì˜ `getUsername()` ì„ ì§ì ‘ í˜¸ì¶œ

#### List
- `users[0].username` : Listì—ì„œ ì²« ë²ˆì§¸ íšŒì›ì„ ì°¾ê³  username í”„ë¡œí¼í‹° ì ‘ê·¼ -> `list.get(0).getUsername()` <br>
- `users[0]['username']` : ìœ„ì™€ ê°™ìŒ
- `users[0].getUsername()` : Listì—ì„œ ì²« ë²ˆì§¸ íšŒì›ì„ ì°¾ê³  ë©”ì„œë“œ ì§ì ‘ í˜¸ì¶œ

#### Map
- `userMap['userA'].username` : Mapì—ì„œ userAë¥¼ ì°¾ê³ , username í”„ë¡œí¼í‹° ì ‘ê·¼ -> `map.get("userA").getUsername()`
- `userMap['userA']['username']` : ìœ„ì™€ ê°™ìŒ 
- `userMap['userA'].getUsername()` : Mapì—ì„œ userAë¥¼ ì°¾ê³  ë©”ì„œë“œ ì§ì ‘ í˜¸ì¶œ

#### ì§€ì—­ ë³€ìˆ˜ ì„ ì–¸
`th:with`ë¥¼ ì‚¬ìš©í•˜ë©´ ì§€ì—­ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì§€ì—­ ë³€ìˆ˜ëŠ” ì„ ì–¸í•œ í…Œê·¸ ì•ˆì—ì„œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

## 3. ê¸°ë³¸ ê°ì²´ì™€ í¸ì˜ ê°ì²´
íƒ€ì„ë¦¬í”„ëŠ” ê¸°ë³¸ ê°ì²´ë“¤ì„ ì œê³µí•œë‹¤. 
- `${#request}`
- `${#response}`
- `${#session} `
- `${#servletContext} `
- `${#locale}`

ê·¸ëŸ°ë° `#request` ëŠ” `HttpServletRequest` ê°ì²´ê°€ ê·¸ëŒ€ë¡œ ì œê³µë˜ê¸° ë•Œë¬¸ì— ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ë ¤ë©´ `request.getParameter("data")` ì²˜ëŸ¼ ë¶ˆí¸í•˜ê²Œ ì ‘ê·¼í•´ì•¼ í•œë‹¤.<br>
ì´ëŸ° ì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ í¸ì˜ ê°ì²´ë„ ì œê³µí•œë‹¤.

- HTTP ìš”ì²­ íŒŒë¼ë¯¸í„° ì ‘ê·¼: `param`<br>- ì˜ˆ) `${param.paramData}`
- HTTP ì„¸ì…˜ ì ‘ê·¼: `session`<br>- ì˜ˆ) `${session.sessionData}`
- ìŠ¤í”„ë§ ë¹ˆ ì ‘ê·¼:`@`<br>- ì˜ˆ) `${@helloBean.hello('Spring!')}`

### ì»¨íŠ¸ë¡¤ëŸ¬
```java
@Controller
@RequestMapping("/basic")
public class BasicController {

  @GetMapping("/basic-objects")
  public String basicObjects(HttpSession session){
      session.setAttribute("sessionData", "Hello Session");
      return "basic/basic-objects";
  }

  @Component("helloBean")
  static class HelloBean{
      public String hello(String data){
          return "Hello " + data;
      }
  }
}
```


### ë·°
```html
...

<body>
<h1>ì‹ ê¸°ë³¸ ê°ì²´ (Expression Basic Objects)</h1>
<ul>
    <li>request = <span th:text="${#request}"></span></li>
    <li>response = <span th:text="${#response}"></span></li>
    <li>session = <span th:text="${#session}"></span></li>
    <li>servletContext = <span th:text="${#servletContext}"></span></li>
    <li>locale = <span th:text="${#locale}"></span></li>
</ul>
<h1>í¸ì˜ ê°ì²´</h1>
<ul>
    <li>Request Parameter = <span th:text="${param.paramData}"></span></li>
    <li>session = <span th:text="${session.sessionData}"></span></li>
    <li>spring bean = <span th:text="${@helloBean.hello('Spring!')}"></span></li>
</ul>
</body>
</html>
```

#### ì‹¤í–‰ ê²°ê³¼
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-06-28 á„‹á…©á„’á…® 5 43 16](https://user-images.githubusercontent.com/59405576/176135525-7db0506b-4cea-4318-8139-49456289b055.png)<br>
`http://localhost:8080/basic/basic-objects?paramData=HelloParam`ì„ ì‹¤í–‰í•œë‹¤. (urlì— `paramData`ë¼ëŠ” íŒŒë¦¬ë¯¸í„°ê°€ ë“¤ì–´ê°€ìˆë‹¤.)

## 4. ìœ í‹¸ë¦¬í‹° ê°ì²´ì™€ ë‚ ì§œ








***
<br>

    ğŸ’› ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ğŸ‘»

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}