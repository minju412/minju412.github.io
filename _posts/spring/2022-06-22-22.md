---
title:  "[SPRING] HTTP ì‘ë‹µ "

categories:
  - Spring
tags:
  - [Framework, Spring, Java]

toc: true
toc_sticky: true
 
date: 2022-06-22 18:23:11
last_modified_at: 2022-06-22 18:23:14
---
# HTTP ì‘ë‹µ - ê°œìš”
ì‘ë‹µ ë°ì´í„°ëŠ” ì´ë¯¸ ì•ì—ì„œ ì¼ë¶€ ë‹¤ë£¬ ë‚´ìš©ë“¤ì´ì§€ë§Œ, ì‘ë‹µ ë¶€ë¶„ì— ì´ˆì ì„ ë§ì¶”ì–´ì„œ ì •ë¦¬í•´ë³´ì.<br>
ìŠ¤í”„ë§(ì„œë²„)ì—ì„œ ì‘ë‹µ ë°ì´í„°ë¥¼ ë§Œë“œëŠ” ë°©ë²•ì€ í¬ê²Œ 3ê°€ì§€ì´ë‹¤.
- ì •ì  ë¦¬ì†ŒìŠ¤<br>ì˜ˆ) ì›¹ ë¸Œë¼ìš°ì €ì— ì •ì ì¸ HTML, css, jsë¥¼ ì œê³µí•  ë•ŒëŠ”, ì •ì  ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•œë‹¤.
- ë·° í…œí”Œë¦¿ ì‚¬ìš©<br>ì˜ˆ) ì›¹ ë¸Œë¼ìš°ì €ì— ë™ì ì¸ HTMLì„ ì œê³µí•  ë•ŒëŠ” ë·° í…œí”Œë¦¿ì„ ì‚¬ìš©í•œë‹¤.
- HTTP ë©”ì‹œì§€ ì‚¬ìš©<br>- HTTP APIë¥¼ ì œê³µí•˜ëŠ” ê²½ìš°ì—ëŠ” HTMLì´ ì•„ë‹ˆë¼ ë°ì´í„°ë¥¼ ì „ë‹¬í•´ì•¼ í•˜ë¯€ë¡œ, HTTP ë©”ì‹œì§€ ë°”ë””ì— JSON ê°™ì€ í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì‹¤ì–´ ë³´ë‚¸ë‹¤.

# 1. ì •ì  ë¦¬ì†ŒìŠ¤
ìŠ¤í”„ë§ ë¶€íŠ¸ëŠ” í´ë˜ìŠ¤íŒ¨ìŠ¤ì˜ ë‹¤ìŒ ë””ë ‰í† ë¦¬ì— ìˆëŠ” ì •ì  ë¦¬ì†ŒìŠ¤ë¥¼ ì œê³µí•œë‹¤.<br>
`/static` , `/public` , `/resources` , `/META-INF/resources`<br><br>
`src/main/resources` ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ë³´ê´€í•˜ëŠ” ê³³ì´ê³ , ë˜ í´ë˜ìŠ¤íŒ¨ìŠ¤ì˜ ì‹œì‘ ê²½ë¡œì´ë‹¤. <br>
ë”°ë¼ì„œ ë‹¤ìŒ ë””ë ‰í† ë¦¬ì— ë¦¬ì†ŒìŠ¤ë¥¼ ë„£ì–´ë‘ë©´ ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ì •ì  ë¦¬ì†ŒìŠ¤ë¡œ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•œë‹¤.

## ì •ì  ë¦¬ì†ŒìŠ¤ ê²½ë¡œ
`src/main/resources/static`
> ì°¸ê³ <br>
ë‹¤ìŒ ê²½ë¡œì— íŒŒì¼ì´ ë“¤ì–´ìˆìœ¼ë©´ (`src/main/resources/static/basic/hello-form.html`)<br>
ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì‹¤í–‰í•˜ë©´ ëœë‹¤. (`http://localhost:8080/basic/hello-form.html`)<br>
ì •ì  ë¦¬ì†ŒìŠ¤ëŠ” í•´ë‹¹ íŒŒì¼ì„ ë³€ê²½ ì—†ì´ ê·¸ëŒ€ë¡œ ì„œë¹„ìŠ¤í•˜ëŠ” ê²ƒì´ë‹¤.<br>

# 2. ë·° í…œí”Œë¦¿
ë·° í…œí”Œë¦¿ì„ ê±°ì³ì„œ HTMLì´ ìƒì„±ë˜ê³ , ë·°ê°€ ì‘ë‹µì„ ë§Œë“¤ì–´ì„œ ì „ë‹¬í•œë‹¤.<br>
ì¼ë°˜ì ìœ¼ë¡œ HTMLì„ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•˜ì§€ë§Œ, ë‹¤ë¥¸ ê²ƒë“¤ë„ ê°€ëŠ¥í•˜ë‹¤. ë·° í…œí”Œë¦¿ì´ ë§Œë“¤ ìˆ˜ ìˆëŠ” ê²ƒì´ë¼ë©´ ë­ë“ ì§€ ê°€ëŠ¥í•˜ë‹¤.

## ë·° í…œí”Œë¦¿ ê²½ë¡œ
`src/main/resources/templates`

### ë·° í…œí”Œë¦¿ ìƒì„±
`src/main/resources/templates/response/hello.html`
```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<p th:text="${data}">empty</p>
</body>
</html>
```

## ë·° í…œí”Œë¦¿ì„ í˜¸ì¶œí•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬
### v1 - ModelAndView ë°˜í™˜
```java
@Controller
public class ResponseViewController {

    @RequestMapping("/response-view-v1")
    public ModelAndView responseViewV1(){

        ModelAndView mav = new ModelAndView("response/hello")
                .addObject("data", "hello!");
        return mav;
    }
}
```

### v2 - String ë°˜í™˜ ğŸŒŸ
```java
@Controller
public class ResponseViewController {

    @RequestMapping("/response-view-v2")
    public String responseViewV2(Model model){

        model.addAttribute("data", "hello!");
        return "response/hello"; // ë·°ì˜ ë…¼ë¦¬ ì´ë¦„ì„ ë°˜í™˜í•œë‹¤.
    }
}
```
ì—¬ê¸°ì„œëŠ” ë·°ì˜ ë…¼ë¦¬ ì´ë¦„ì¸ `response/hello` ë¥¼ ë°˜í™˜í•˜ë©´ ë‹¤ìŒ ê²½ë¡œì˜ ë·° í…œí”Œë¦¿ì´ ë Œë”ë§ ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.<br>
ì‹¤í–‰: `templates/response/hello.html`

### v3 - void ë°˜í™˜
```java
@Controller
public class ResponseViewController {

     @RequestMapping("/response/hello")
    public void responseViewV3(Model model){

        model.addAttribute("data", "hello!");
    }
}
```
- `@Controller` ë¥¼ ì‚¬ìš©í•˜ê³ , `HttpServletResponse` , `OutputStream(Writer)` ê°™ì€ HTTP ë©”ì‹œì§€ ë°”ë””ë¥¼ ì²˜ë¦¬í•˜ëŠ” íŒŒë¼ë¯¸í„°ê°€ ì—†ìœ¼ë©´ ìš”ì²­ URLì„ ì°¸ê³ í•´ì„œ ë…¼ë¦¬ ë·° ì´ë¦„ìœ¼ë¡œ ì‚¬ìš©<br>- ìš”ì²­ URL: `/response/hello`<br>- ì‹¤í–‰: `templates/response/hello.html`
- ì°¸ê³ ë¡œ ì´ ë°©ì‹ì€ ëª…ì‹œì„±ì´ ë„ˆë¬´ ë–¨ì–´ì§€ê³  ì´ë ‡ê²Œ ë”± ë§ëŠ” ê²½ìš°ë„ ë§ì´ ì—†ì–´ì„œ, ê¶Œì¥í•˜ì§€ ì•ŠëŠ”ë‹¤. ğŸš¨

# 3. HTTP ë©”ì‹œì§€ ì‚¬ìš©
HTTP APIë¥¼ ì œê³µí•˜ëŠ” ê²½ìš°ì—ëŠ” HTMLì´ ì•„ë‹ˆë¼ ë°ì´í„°ë¥¼ ì „ë‹¬í•´ì•¼ í•˜ë¯€ë¡œ, HTTP ë©”ì‹œì§€ ë°”ë””ì— JSON ê°™ì€ í˜•ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì‹¤ì–´ ë³´ë‚¸ë‹¤.<br>
HTTP ìš”ì²­ì—ì„œ ì‘ë‹µê¹Œì§€ ëŒ€ë¶€ë¶„ ë‹¤ë£¨ì—ˆìœ¼ë¯€ë¡œ ì´ ê¸€ì—ì„œëŠ” ì •ë¦¬ë¥¼ í•´ë³´ì.

> ì°¸ê³ <br>
HTMLì´ë‚˜ ë·° í…œí”Œë¦¿ì„ ì‚¬ìš©í•´ë„ HTTP ì‘ë‹µ ë©”ì‹œì§€ ë°”ë””ì— HTML ë°ì´í„°ê°€ ë‹´ê²¨ì„œ ì „ë‹¬ëœë‹¤. <br>
ì—¬ê¸°ì„œ ì„¤ëª…í•˜ëŠ” ë‚´ìš©ì€ ì •ì  ë¦¬ì†ŒìŠ¤ë‚˜ ë·° í…œí”Œë¦¿ì„ ê±°ì¹˜ì§€ ì•Šê³ , ì§ì ‘ HTTP ì‘ë‹µ ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•˜ëŠ” ê²½ìš°ë¥¼ ë§í•œë‹¤.

## String ì²˜ë¦¬
### v1 - HttpServletResponse
`ResponseBodyController`
```java
@Slf4j
@Controller
public class ResponseBodyController {

    @GetMapping("/response-body-string-v1")
    public void responseBodyV1(HttpServletResponse res) throws IOException {
        res.getWriter().write("ok");
    }
}
```
ì„œë¸”ë¦¿ì„ ì§ì ‘ ë‹¤ë£° ë•Œ ì²˜ëŸ¼ HttpServletResponse ê°ì²´ë¥¼ í†µí•´ì„œ HTTP ë©”ì‹œì§€ ë°”ë””ì— ì§ì ‘ ok ì‘ë‹µ ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•œë‹¤.

### v2 - ResponseEntity
`ResponseBodyController`
```java
@Slf4j
@Controller
public class ResponseBodyController {

    @GetMapping("/response-body-string-v2")
    public ResponseEntity<String> responseBodyV2() {
        return new ResponseEntity<>("ok", HttpStatus.OK);
    }
}
```
`ResponseEntity` ì—”í‹°í‹°ëŠ” `HttpEntity` ë¥¼ ìƒì† ë°›ì•˜ëŠ”ë°, `HttpEntity`ëŠ” HTTP ë©”ì‹œì§€ì˜ í—¤ë”, ë°”ë”” ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆë‹¤. <br>
`ResponseEntity` ëŠ” ì—¬ê¸°ì— ë”í•´ì„œ HTTP ì‘ë‹µ ì½”ë“œë¥¼ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.

### v3 - @ResponseBody
`ResponseBodyController`
```java
@Slf4j
@Controller
public class ResponseBodyController {

    @ResponseBody
    @GetMapping("/response-body-string-v3")
    public String responseBodyV3() {
        return "ok";
    }
}
```
`@ResponseBody`ë¥¼ ì‚¬ìš©í•˜ë©´ viewë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ , HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ í†µí•´ì„œ HTTP ë©”ì‹œì§€ë¥¼ ì§ì ‘ ì…ë ¥í•  ìˆ˜ ìˆë‹¤. `ResponseEntity`ë„ ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ë™ì‘í•œë‹¤.

## JSON ì²˜ë¦¬
### v4 - ResponseEntity
`ResponseBodyController`
```java
@Slf4j
@Controller
public class ResponseBodyController {

    @GetMapping("/response-body-json-v1")
    public ResponseEntity<HelloData> responseBodyJsonV1(){
        HelloData helloData = new HelloData();
        helloData.setUsername("userA");
        helloData.setAge(20);
        return new ResponseEntity<>(helloData, HttpStatus.OK);
    }
}
```
`ResponseEntity` ë¥¼ ë°˜í™˜í•œë‹¤. HTTP ë©”ì‹œì§€ ì»¨ë²„í„°ë¥¼ í†µí•´ì„œ JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜ë˜ì–´ì„œ ë°˜í™˜ëœë‹¤.

### v5 - ResponseBody ğŸŒŸ
`ResponseBodyController`
```java
@Slf4j
// @Controller
@RestController // @ResponseBody + @Controller
public class ResponseBodyController {

    @ResponseStatus(HttpStatus.OK)
    // @ResponseBody
    @GetMapping("/response-body-json-v2")
    public HelloData responseBodyJsonV2(){
        HelloData helloData = new HelloData();
        helloData.setUsername("userA");
        helloData.setAge(20);
        return helloData;
    }
}
```
- `ResponseEntity`ëŠ” HTTP ì‘ë‹µ ì½”ë“œë¥¼ ì„¤ì •í•  ìˆ˜ ìˆëŠ”ë°, `@ResponseBody`ë¥¼ ì‚¬ìš©í•˜ë©´ ì´ëŸ° ê²ƒì„ ì„¤ì •í•˜ê¸° ê¹Œë‹¤ë¡­ë‹¤.
- `@ResponseStatus(HttpStatus.OK)` ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©´ ì‘ë‹µ ì½”ë“œë„ ì„¤ì •í•  ìˆ˜ ìˆë‹¤.
- ë¬¼ë¡  ì• ë…¸í…Œì´ì…˜ì´ê¸° ë•Œë¬¸ì— ì‘ë‹µ ì½”ë“œë¥¼ ë™ì ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ëŠ” ì—†ë‹¤. í”„ë¡œê·¸ë¨ ì¡°ê±´ì— ë”°ë¼ì„œ ë™ì ìœ¼ë¡œ ë³€ê²½í•˜ë ¤ë©´ `ResponseEntity`ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
- ì‹¤ë¬´ì—ì„œ APIë¥¼ ë§Œë“¤ ë•Œ, ì´ëŸ¬í•œ ë°©ì‹ì„ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤.

#### @RestController
`@Controller` ëŒ€ì‹ ì— `@RestController` ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•˜ë©´, í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ì— ëª¨ë‘ `@ResponseBody` ê°€ ì ìš©ë˜ëŠ” íš¨ê³¼ê°€ ìˆë‹¤. <br>
ë”°ë¼ì„œ ë·° í…œí”Œë¦¿ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, HTTP ë©”ì‹œì§€ ë°”ë””ì— ì§ì ‘ ë°ì´í„°ë¥¼ ì…ë ¥í•œë‹¤. ì´ë¦„ ê·¸ëŒ€ë¡œ Rest API(HTTP API)ë¥¼ ë§Œë“¤ ë•Œ ì‚¬ìš©í•˜ëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ì´ë‹¤.<br>
ì°¸ê³ ë¡œ `@ResponseBody` ëŠ” í´ë˜ìŠ¤ ë ˆë²¨ì— ë‘ë©´ ì „ì²´ ë©”ì„œë“œì— ì ìš©ë˜ëŠ”ë°, `@RestController` ì—ë…¸í…Œì´ì…˜ ì•ˆì— `@ResponseBody` ê°€ ì ìš©ë˜ì–´ ìˆë‹¤.


















***
<br>

    ğŸ’› ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ğŸ‘»

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}