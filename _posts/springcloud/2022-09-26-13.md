---
title:  "API Gatewayλ€? "

categories:
  - SpringCloud
tags:
  - [SpringCloud]

toc: true
toc_sticky: true
 
date: 2022-09-26 01:25:09
last_modified_at: 2022-09-26 01:25:12
---
μ‚¬μ©μλ‚ μ™Έλ¶€ μ‹μ¤ν…μΌλ΅λ¶€ν„°μ μ”μ²­μ„ λ‹¨μΌν™”ν•μ—¬ μ²λ¦¬ν•  μ μλ„λ΅ ν•΄μ£Όλ” API Gateway Serviceμ— λ€ν•΄ μ•μ•„λ³΄μ.
# 1. API Gateway Service
## μ—­ν• 
API Gateway Serviceλ” μ‚¬μ©μκ°€ μ„¤μ •ν• λΌμ°ν… μ„¤μ •μ— λ”°λΌ κ°κ°μ μ—”λ“ν¬μΈνΈλ΅ ν΄λΌμ΄μ–ΈνΈλ¥Ό λ€μ‹ ν•΄ μ”μ²­ν•κ³ ,<br>
μ‘λ‹µμ„ λ°›μΌλ©΄ λ‹¤μ‹ ν΄λΌμ΄μ–ΈνΈμ—κ² μ „λ‹¬ν•΄μ£Όλ”λ” ν”„λ΅μ‹ μ—­ν• μ„ ν•κ² λλ‹¤.<br>
μ‹μ¤ν…μ λ‚΄λ¶€ κµ¬μ΅°λ” μ¨κΈ°κ³ , μ™Έλ¶€ μ”μ²­μ— λ€ν•΄ μ μ ν• ν•νƒλ΅ κ°€κ³µν•΄μ„ μ‘λ‹µν•  μ μλ‹¤λ” μ¥μ μ„ κ°€μ§€κ³  μλ‹¤.<br><br>
![α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2022-09-26 α„‹α…©α„α…¥α†« 2 09 06](https://user-images.githubusercontent.com/59405576/192156113-445fe870-d939-4521-9866-087314d55572.png)<br>
μ„ κ·Έλ¦Όμ€ λ§μ΄ν¬λ΅ μ†ν”„νΈμ›¨μ–΄ μ‚¬μ—μ„ ν΄λΌμ°λ“ μ•„ν‚¤ν…μ²μ— λ€ν•΄ μ„¤λ…ν• κ·Έλ¦Όμ΄λ‹¤.<br>
λ§μ΄ν¬λ΅ μ„λΉ„μ¤κ°€ μ„Έ κ°€μ§€ μλ‹¤κ³  κ°€μ •ν–μ„ λ•, ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“μ—μ„ λ§μ΄ν¬λ΅ μ„λΉ„μ¤λ¥Ό μ§μ ‘ νΈμ¶ν•λ” κ·Έλ¦ΌμΌλ΅ λ³Ό μ μλ‹¤.<br>
λ¨λ°”μΌ μ•±μ΄λ“  μ›Ήμ•±μ΄λ“  ν΄λΌμ΄μ–ΈνΈ μΈ΅μ—μ„ λ§μ΄ν¬λ΅μ„λΉ„μ¤μ μ£Όμ†λ¥Ό μ΄μ©ν•΄ μ§μ ‘ νλΌλ―Έν„° μ „λ‹¬μ„ ν•κ³  μ”μ²­ν•λ” ν•νƒμ΄λ‹¤.<br><br>
μƒλ΅μ΄ λ§μ΄ν¬λ΅ μ„λΉ„μ¤κ°€ μ¶”κ°€λκ±°λ‚, κΈ°μ΅΄μ— μ‚¬μ©ν•λ λ§μ΄ν¬λ΅ μ„λΉ„μ¤μ μ£Όμ†κ°€ λ³€κ²½λκ±°λ‚, νλΌλ―Έν„°μ μΈμ κ°’μ΄ λ³€κ²½λμ—λ‹¤κ³  κ°€μ •ν•΄λ³΄μ.<br>
λ§μ΄ν¬λ΅ μ„λΉ„μ¤λ” λ…λ¦½μ μΌλ΅ λΉλ“κ°€ λκ³  λ°°ν¬λ  μ μμΌλ―€λ΅ λ§μ΄ν¬λ΅ μ„λΉ„μ¤ μ½μ—λ” λ¬Έμ κ°€ μ—†λ‹¤.<br><br>
λ¬Έμ λ” ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“μ—μ„ λ°μƒν•λ”λ°,<br>
ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“μ—μ„ λ§μ΄ν¬λ΅ μ„λΉ„μ¤μ μ—”λ“ν¬μΈνΈλ¥Ό μ§μ ‘ νΈμ¶ν–μ„ κ²½μ°μ—λ”, ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“μ•  μλ” μ–΄ν”λ¦¬μΌ€μ΄μ…λ„ κ°™μ΄ μμ •, λ°°ν¬κ°€ λμ–΄μ•Όν•λ‹¤.<br><br>
![α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2022-09-26 α„‹α…©α„α…¥α†« 2 13 25](https://user-images.githubusercontent.com/59405576/192156267-3afd4d5d-db1b-4352-ac68-ca21304cd9da.png)<br>
λ”°λΌμ„ λ‹¨μΌ μ§„μ…μ μ„ κ°€μ§€κ³  μλ” ν•νƒλ΅ κ°λ°ν•λ” λ°©μ‹μ΄ ν•„μ”ν•κ² λμ—λ‹¤.<br>
μ„λ²„λ‹¨(λ°±μ—”λ“λ‹¨) μ¤‘κ°„μ— κ²μ΄νΈμ›¨μ΄(μ§„μ…λ΅) μ—­ν• μ„ ν•΄μ¤„ μ μλ” API Gatewayλ¥Ό ν•λ‚ λ‘κ³ ,<br>
κ°κ°μ λ§μ΄ν¬λ΅ μ„λΉ„μ¤λ΅ μ”μ²­λλ” λ¨λ“  μ •λ³΄μ— λ€ν•΄ API Gatewayκ°€ μΌκ΄„μ μΌλ΅ μ²λ¦¬ν•κ² λλ‹¤.<br><br>
λ¨λ°”μΌ μ•±λ„ μƒκ΄€ μ—†κ³ , SPA μ›Ήμ•±λ„ μƒκ΄€ μ—†κ³ , μ „ν†µμ μΈ μ›Ήμ•±λ„ μƒκ΄€μ—†μ„ κ²ƒμ΄λ‹¤.<br>
ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“μ— μλ” μ–΄ν”λ¦¬μΌ€μ΄μ…μ€ λ§μ΄ν¬λ΅ μ„λΉ„μ¤λ¥Ό μ§μ ‘ νΈμ¶ν•μ§€ μ•κ³  API Gatewayλ§ μƒλ€ν•κ² λλ‹¤.

## μ‚¬μ© μ‹ μ΄μ 
- μΈμ¦ λ° κ¶ν• λ¶€μ—¬
- (λ§μ΄ν¬λ΅) μ„λΉ„μ¤ κ²€μƒ‰ ν†µν•©
- μ‘λ‹µ μΊμ‹±
- μ •μ±…, νλ΅ μ°¨λ‹¨κΈ° λ° QoS λ‹¤μ‹ μ‹λ„
- μ†λ„ μ ν•
- λ¶€ν• λ¶„μ‚° (λ΅λ“λ°Έλ°μ‹±)
- λ΅κΉ…, μ¶”μ , μƒκ΄€ κ΄€κ³„
- ν—¤λ”, μΏΌλ¦¬ λ¬Έμμ—΄ λ° μ²­κµ¬ λ³€ν™
- IP ν—μ© λ©λ΅μ— μ¶”κ°€

# 2. Netflix Ribbon
API Gateway Serviceλ¥Ό μ‹¤μ λ΅ κµ¬ν„ν•κΈ° μ „μ—, Netflix Ribbonμ— λ€ν•΄ μ•μ•„λ³΄μ.<br><br>
Spring Cloudμ—μ„μ MSA κ°„ ν†µμ‹ 
1. RestTemplate
2. Feign Client

## RestTemplate
![α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2022-09-26 α„‹α…©α„α…¥α†« 2 23 55](https://user-images.githubusercontent.com/59405576/192156697-8d919d6a-3611-4cb3-b933-e28b653a973a.png){: width="500" height="500"}<br>
RestTemplateμ€ μ „ν†µμ μΌλ΅ ν•λ‚μ μ›Ή μ–΄ν”λ¦¬μΌ€μ΄μ…μ—μ„ λ‹¤λ¥Έ μ–΄ν”λ¦¬μΌ€μ΄μ…μ„ μ‚¬μ©ν•κΈ° μ„ν•΄ μ‚¬μ©λμ—λ api μ΄λ‹¤.<br>
μ‚¬μ©λ²•μ€ λ‹¤μκ³Ό κ°™λ‹¤.
- μΈμ¤ν„΄μ¤λ¥Ό λ§λ“ λ‹¤.
- μ ‘μ†ν•κ³ μν•λ” μ„λ²„μ μ£Όμ†μ™€ ν¬νΈλ²νΈ, νλΌλ―Έν„°λ¥Ό μ…λ ¥ν•λ‹¤
- get λ©”μ„λ“ νΉμ€ post λ©”μ„λ“ ν•μ‹μΌλ΅ νΈμ¶ν•λ‹¤. (ex.`getForObject`)

## Feign Client
![α„‰α…³α„α…³α„…α…µα†«α„‰α…£α†Ί 2022-09-26 α„‹α…©α„α…¥α†« 2 26 23](https://user-images.githubusercontent.com/59405576/192156799-f546de13-c43c-4c20-9180-1427f8f2c9b0.png){: width="500" height="500"}<br>
Spring Cloudμ—μ„λ” Feign ClientλΌλ” apiλ¥Ό μ΄μ©ν•΄ λ‹¤λ¥Έ λ§μ΄ν¬λ΅ μ„λΉ„μ¤λ¥Ό νΈμ¶ν•  μ μλ‹¤.<br>
μ‚¬μ©λ²•μ€ λ‹¤μκ³Ό κ°™λ‹¤.
- νΉμ • μΈν„°νμ΄μ¤λ¥Ό λ§λ“ λ‹¤.
- ν•΄λ‹Ή μΈν„°νμ΄μ¤μ—μ„ νΈμ¶ν•κ³  μ‹¶μ€ λ§μ΄ν¬λ΅ μ„λΉ„μ¤μ μ΄λ¦„μ„ λ“±λ΅ν•λ‹¤. (ex.`@FeignClient("stores")`)
- λ§μ΄ν¬λ΅ μ„λΉ„μ¤μ μ΄λ¦„μ„ ν†µν•΄ νΈμ¶ν•λ‹¤. (ex.`getStores()`)

λ§μ•½, user μ„λΉ„μ¤μ—μ„ store μ„λΉ„μ¤λ¥Ό νμΈ ν΄λΌμ΄μ–ΈνΈλ¥Ό λ“±λ΅ν•λ©΄,<br>
store μ„λΉ„μ¤λ¥Ό νΈμ¶ν•κ³  μ‹¶μ„ λ•, νΈμ¶ν•  λ§μ΄ν¬λ΅ μ„λΉ„μ¤μ μ΄λ¦„μ„ ν†µν•΄ νΈμ¶ν•  μ μλ‹¤. (ex.`getStores()`)

## Ribbon: ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“μ—μ„ μ‚¬μ©ν•  μ μλ” λ΅λ“λ°Έλ°μ„
RestTemplateκ³Ό Feign Clientμ λ¬Έμ λ”, λ΅λ“ λ°Έλ°μ„λ¥Ό μ–΄λ””μ— κµ¬μ¶•ν•  κ²ƒμΈκ°€μ΄λ‹¤.<br>
μ΄μ°½κΈ°μ μ¤ν”„λ§ ν΄λΌμ°λ“μ—μ„λ” λ΅λ“ λ°Έλ°μ„ μ—­ν• μ„ ν•κΈ° μ„ν•΄ Ribbonμ΄λΌλ” μ„λΉ„μ¤λ¥Ό μ κ³µν–λ‹¤.<br>
λ„·ν”λ¦­μ¤ μ‚¬μ λ΅λ“ λ°Έλ°μ‹± κΈ°μ μ΄ Ribbonμ΄λΌλ” μ„λΉ„μ¤λ΅ μ™„μ„±λμ—κ³ , μ΄λ” Spring Cloud μ¬λ‹¨μ— κΈ°λ¶€λ κ²ƒμ΄λ‹¤.
- λ§μ΄ν¬λ΅ μ„λΉ„μ¤ μ΄λ¦„μΌλ΅ ν΄λΌμ΄μ–ΈνΈ μ•μ—μ„ νΈμ¶
- Health Check: μ„λΉ„μ¤κ°€ μ •μƒ μ‘λ™ μ¤‘μΈμ§€ ν™•μΈ

<br>
μλ¥Ό λ“¤μ–΄, μ„Έ κ°€μ§€(UserService, OrderService, ProductService) λ§μ΄ν¬λ΅ μ„λΉ„μ¤κ°€ μλ‹¤κ³  κ°€μ •ν•μ.<br>
μ΄κ²ƒμ„ μ‚¬μ©ν•λ” ν΄λΌμ΄μ–ΈνΈκ°€ μμ„ λ•, ν΄λΌμ΄μ–ΈνΈκ°€ μ§μ ‘μ μΌλ΅ λ§μ΄ν¬λ΅ μ„λΉ„μ¤λ¥Ό νΈμ¶ν•λ” λ°©μ‹μ€ μΆ‹μ§€ μ•λ‹¤.<br><br>
λ”°λΌμ„ API Gatewayλ¥Ό μ¤‘κ°„μ— λ†“μ•„μ•Ό ν•λ”λ°, μ΄ μ‘μ—…μ„ λ³„λ„μ μ„λΉ„μ¤λ‚ μ‹μ¤ν…μ„ κµ¬μ¶•ν•μ§€ μ•κ³ ,<br>
ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“ λ‚΄λ¶€μ— Ribbonμ΄λΌλ” μ„λΉ„μ¤λ¥Ό κµ¬μ¶•ν•΄μ„ μ‚¬μ©ν–λ κ²ƒμ΄λ‹¤.<br>
λ”°λΌμ„ ν΄λΌμ΄μ–ΈνΈ ν”„λ΅κ·Έλ¨ μ•μ—μ„ μ΄λ™ν•κ³ μν•λ” λ§μ΄ν¬λ΅ μ„λΉ„μ¤μ μ£Όμ†κ°’μ„ μ§μ ‘ κ΄€λ¦¬ν•λ‹¤.<br><br>
ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄λ“μ—μ„ Ribbonμ„ μ‚¬μ©ν•  λ•μ μ΄μ μ€,<br>
μ™Έλ¶€μ— μλ” λ§μ΄ν¬λ΅ μ„λΉ„μ¤λ¥Ό νΈμ¶ν•κΈ° μ„ν•΄ `ip`μ™€ `port` λ²νΈλ¥Ό λ…μ‹ν•λ”κ² μ•„λ‹λΌ, λ§μ΄ν¬λ΅ μ„λΉ„μ¤μ μ΄λ¦„λ§ κ°€μ§€κ³  νΈμ¶ν•  μ μλ‹¤λ” κ²ƒμ΄λ‹¤.
> Spring Cloud Ribbonμ€ Spring Boot 2.4μ—μ„ Maintenance μƒνƒ<br>
Ribbonμ΄ λΉ„λ™κΈ°ν™” μ²λ¦¬κ°€ μ λμ§€ μ•κΈ° λ•λ¬Έμ— μµκ·Όμ—λ” μ μ‚¬μ©ν•μ§€ μ•λ”λ‹¤.<br>
(Maintenance μƒνƒλ” Spring Cloud ν€μ—μ„ ν•΄λ‹Ή λ¨λ“μ— λ” μ΄μƒ μƒλ΅μ΄ κΈ°λ¥μ„ μ¶”κ°€ν•μ§€ μ•λ”λ‹¤λ” κ²ƒμ„ μλ―Έν•λ‹¤.)<br>
λ”°λΌμ„ μµμ‹  λ²„μ „μ—μ„λ” Ribbonμ„ λ€μ‹ ν•΄ Spring Cloud Loadbalancerλ¥Ό μ‚¬μ©ν•λ‹¤.

# 3. Netflix Zuul
FirstServiceμ™€ SecondService λ‘ κ°€μ§€ λ§μ΄ν¬λ΅ μ„λΉ„μ¤λ¥Ό κµ¬μ„±ν•λ‹¤.<br>
κ·Έλ¦¬κ³  ν΄λΌμ΄μ–ΈνΈμ—μ„ μ΄λ¬ν• λ§μ΄ν¬λ΅ μ„λΉ„μ¤λ¥Ό νΈμ¶ν•¨μ— μμ–΄μ„ Netflix Zuulμ΄λΌλ” μ ν’μ„ μ΄μ©ν•΄ κ²μ΄νΈμ›¨μ΄ ν…μ¤νΈλ¥Ό ν•΄λ³Ό κ²ƒμ΄λ‹¤.<br><br>
ν΄λΌμ΄μ–ΈνΈκ°€ μƒλ€ν•λ” κ²ƒμ€ FirstServiceμ™€ SecondServiceκ°€ μ•„λ‹, κ²μ΄νΈμ›¨μ΄(Netflix Zuul)μ΄λ‹¤.<br>
ν΄λΌμ΄μ–ΈνΈκ°€ Netflix Zuulμ— λ°μ΄ν„°λ¥Ό μ”μ²­ν•λ©΄, Netflix Zuulμ΄ ν•΄λ‹Ή μ”μ²­μ„ FirstServiceμ™€ SecondServiceμ— μ „λ‹¬ν•λ‹¤.<br><br>
Netflix Zuulμ μ—­ν• 
- Routing
- API Gateway

> Spring Cloud Zuulμ€ Spring Boot 2.4μ—μ„ Maintenance μƒνƒ<br>
λ”°λΌμ„ μµμ‹  λ²„μ „μ—μ„λ” Zuulμ„ λ€μ‹ ν•΄ Spring Cloud Gatewayλ¥Ό μ‚¬μ©ν•λ‹¤.
















***
<br>


    π’› κ°μΈ κ³µλ¶€ κΈ°λ΅μ© λΈ”λ΅κ·Έμ…λ‹λ‹¤. π‘»

[λ§¨ μ„λ΅ μ΄λ™ν•κΈ°](#){: .btn .btn--primary }{: .align-right}