---
title:  "[E-commerce App] Users Microservice "

categories:
  - SpringCloud
tags:
  - [SpringCloud]

toc: true
toc_sticky: true
 
date: 2022-09-29 00:25:29
last_modified_at: 2022-09-29 00:25:33
---

# ê°œìš”
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-29 á„‹á…©á„Œá…¥á†« 12 01 54](https://user-images.githubusercontent.com/59405576/192814194-cb5977c6-04a5-4d24-9d1b-680805ef3f7e.png){: width="800" height="800"}<br>
`user-microservice`ëŠ” UIëŠ” ì—†ì´ REST API í˜•ì‹ìœ¼ë¡œ êµ¬í˜„í•  ê²ƒì´ë‹¤.<br>
ê·¸ë¦¬ê³  ìœ„ ì‚¬ì§„ì—ì„œ ë³´ì´ëŠ” ê¸°ëŠ¥ë“¤ì„ ê°œë°œí•  ê²ƒì´ë‹¤.

## APIs
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-29 á„‹á…©á„Œá…¥á†« 12 04 31](https://user-images.githubusercontent.com/59405576/192814869-ed4ee880-fd85-4627-a3fc-d3e82d96269d.png){: width="800" height="800"}<br>
API Gateway ì‚¬ìš© ì‹œì—ëŠ” uriì— `/user-service`ë¼ëŠ” prefixê°€ ë¶™ì–´ì•¼í•˜ë©°, ëª¨ë“  ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ì— ëŒ€í•´ ê°™ì€ í¬íŠ¸(ex.`8000`)ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤.<br>
ë¯¸ì‚¬ìš© ì‹œ prefix ì—†ì´ í˜¸ì¶œí•˜ê³ ìí•˜ëŠ” end pointë§Œ ì…ë ¥í•˜ë©´ ë˜ê³ , í•´ë‹¹í•˜ëŠ” ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ì˜ í¬íŠ¸(ex.`8081`)ë¡œ í˜¸ì¶œí•´ì•¼ í•œë‹¤.<br><br>


# Users Microservice - ê¸°ë³¸ì ì¸ ì‚¬ìš©ì ê°€ì…ê³¼ ì „ì²´ íšŒì› ëª©ë¡ ì¡°íšŒ
## í”„ë¡œì íŠ¸ ìƒì„±
- Dependencies<br>- DevTools, Lombok, Spring Web, Eureka Discovery Client

## ì‹¤í–‰
### ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬(= ìœ ë ˆì¹´ ì„œë²„) ì‹¤í–‰
ì¸í…”ë¦¬ì œì´ì—ì„œ ì‹¤í–‰í•˜ëŠ” ê²ƒ ìì²´ê°€ ë¶€í•˜ê°€ í¬ê¸° ë•Œë¬¸ì— í„°ë¯¸ë„ë¡œ ì‹¤í–‰í•˜ì.<br>
ë¨¼ì €, í„°ë¯¸ë„ ìƒì—ì„œ ìœ ë ˆì¹´ ì„œë²„ê°€ ìˆëŠ” ê³³ìœ¼ë¡œ ì´ë™í•˜ì.
```
$ cd service-discovery
$ mvn spring-boot:run # ìœ ë ˆì¹´ ì„œë²„ ì‹¤í–‰
```
<br>

### `user-service` ì‹¤í–‰
í„°ë¯¸ë„ì„ ì´ìš©í•´ ìœ ë ˆì¹´ ì„œë²„ë¥¼ ë¨¼ì € ì‹¤í–‰í•œ ë’¤,<br>
ì¸í…”ë¦¬ì œì´ì—ì„œ `user-service`ë¥¼ ì‹¤í–‰í•œë‹¤.<br>
ê·¸ ë‹¤ìŒ, `http://localhost:8761`ì— ì ‘ì†í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ì„œë¹„ìŠ¤ ë””ìŠ¤ì»¤ë²„ë¦¬ì— `user-service`ê°€ ë“±ë¡ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.<br>
<img width="1061" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-29 á„‹á…©á„Œá…¥á†« 12 54 09" src="https://user-images.githubusercontent.com/59405576/192827115-b66337be-6943-4119-bfbb-d42a9d50a9bb.png"><br><br>
í•´ë‹¹ urlì„ í´ë¦­í•˜ì—¬ í¬íŠ¸ë²ˆí˜¸ë¥¼ í™•ì¸í•œ ë’¤, end pointë¥¼ `/health-check`ë¡œ ë°”ê¾¼ë‹¤.<br>
<img width="477" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-09-29 á„‹á…©á„Œá…¥á†« 12 52 44" src="https://user-images.githubusercontent.com/59405576/192826785-6716ccfa-daab-47df-9623-902b76c00f9b.png"><br>
ìœ„ì™€ ê°™ì´ ì˜ ì‹¤í–‰ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.<br>
ì°¸ê³ ë¡œ, ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ë¥¼ ì¬ì‹œë™ í•  ë•Œ ë§ˆë‹¤ í¬íŠ¸ë²ˆí˜¸ëŠ” ë°”ë€ë‹¤.<br><br>

## `welcome()` ë©”ì„œë“œ ìƒì„±
ì´ë²ˆì—ëŠ” í™”ë©´ì— ê°„ë‹¨í•œ ì¸ì‚¬ë§ì„ ë„ì›Œë³¼ ê²ƒì´ë‹¤.<br>
`application.yml`ì— ì¸ì‚¬ë§ì„ ì •ì˜í• ê±´ë°, ì´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë°©ë²•ì—ëŠ” ë‘ ê°€ì§€ê°€ ìˆë‹¤.<br>
ìš°ì„  `application.yml`ì˜ ë§¨ ì•„ë˜ì— ì•„ë˜ ì½”ë“œë¥¼ ì¶”ê°€í•˜ì.
```yml
greeting:
  message: Welcome to the Simple E-commerce.
```

### ë°©ë²• 1. Environment ì´ìš©
`controller/UserController.java`
```java
@RestController
@RequestMapping("/")
public class UserController {

    private Environment env;

    @Autowired
    public UserController(Environment env) {
        this.env = env;
    }

    @GetMapping("welcome")
    public String welcome() {
        return env.getProperty("greeting.message");
    }
}
```

### ë°©ë²• 2. `@Value` ì´ìš©
`vo/Greeting.java`
```java
@Component
@Data
public class Greeting {

    @Value("${greeting.message}")
    private String message;
}
```

`controller/UserController.java`
```java
@RestController
@RequestMapping("/")
public class UserController {

    @Autowired // ì´ì²˜ëŸ¼ ì§ì ‘ ì£¼ì… ë°›ëŠ” ê²ƒì€ ê¶Œì¥í•˜ì§€ ì•ŠëŠ”ë‹¤.
    private Greeting greeting;

    @GetMapping("welcome")
    public String welcome() {
        return greeting.getMessage();
    }
}
```





***
<br>


    ğŸ’› ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ğŸ‘»

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}