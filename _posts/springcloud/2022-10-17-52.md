---
title:  "[E-commerce App] Docker ì´ë¯¸ì§€ ìƒì„±ê³¼ Public registryì— Push "

categories:
  - SpringCloud
tags:
  - [SpringCloud]

toc: true
toc_sticky: true
 
date: 2022-10-17 01:52:12
last_modified_at: 2022-10-17 01:52:14
---

Dockerfileì„ ì´ìš©í•´ `user-service`ë¼ëŠ” ë§ˆì´í¬ë¡œ ì„œë¹„ìŠ¤ì˜ ì´ë¯¸ì§€ íŒŒì¼ì„ ìƒì„±í•´ë³´ì.
> [https://hub.docker.com](https://hub.docker.com)

# ë°©ë²•
## `Dockerfile`
```Dockerfile
FROM openjdk:8-jdk-alpine

VOLUME /tmp

COPY target/users-ws-0.1.jar users-service.jar

ENTRYPOINT ["java",
"-Djava.security.egd=file:/dev/./urandom",
"-jar",
"users-service.jar"]
```
- `FROM openjdk:8-jdk-alpine`<br>- ë² ì´ìŠ¤ë¥¼ `8-jdk-alpine` ë¡œ í•œë‹¤.
- `VOLUME /tmp`<br>ë„ì»¤ ì—”ì§„ì´ ê°€ì§€ê³  ìˆëŠ” ê°€ìƒì˜ ë””ë ‰í† ë¦¬í•˜ê³ , ì»¨í…Œì´ë„ˆ ì•ˆì˜ `tmp`ë¼ëŠ” í´ë”ë¥¼ ë§Œë“¤ì–´ì„œ ë³¼ë¥¨ì„ ë§ˆìš´íŠ¸í•œë‹¤.
- `COPY target/users-ws-0.1.jar users-service.jar`<br>- `target/users-ws-0.1.jar` íŒŒì¼ì„, ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì˜ `users-service.jar` íŒŒì¼ë¡œ ë³µì‚¬í•œë‹¤.


## ë¹Œë“œ í›„ ë„ì»¤ í—ˆë¸Œì— ì—…ë¡œë“œ
```bash
# ë¹Œë“œ
$ docker  build  -t  edowon0623/users-service:1.0  .  

# ë„ì»¤ í—ˆë¸Œì— ì—…ë¡œë“œ
$ docker push edowon0623/user-service:1.0

# ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
$ docker pull edowon0623/user-service:1.0
```

# `user-service`
ì´ì œ ìœ„ ë‚´ìš©ì„ ì‹¤ì œ í”„ë¡œì íŠ¸ì—ì„œ ì§„í–‰í•´ë³´ì.

## `Dockerfile`
```Dockerfile
FROM openjdk:17-ea-11-jdk-slim

VOLUME /tmp

COPY target/user-service-0.0.1-SNAPSHOT.jar UserService.jar

ENTRYPOINT ["java","-jar","UserService.jar"]
```

## ë¹Œë“œ í›„ ë„ì»¤ í—ˆë¸Œì— ì—…ë¡œë“œ
ì¸í…”ë¦¬ì œì´ í„°ë¯¸ë„ì„ ì‚¬ìš©í•´ë„ ë˜ê³ , iTermì„ ì‚¬ìš©í•´ë„ ëœë‹¤.
```bash
# ìµœì‹  ë²„ì „ìœ¼ë¡œ ì»´íŒŒì¼
$ mvn clean compile package -DskipTests=true 
# cleanì€ ê¸°ì¡´ íŒŒì¼ì„ ì§€ìš´ë‹¤.
# package ì˜µì…˜ìœ¼ë¡œ jar íŒŒì¼ê¹Œì§€ ìƒì„±í•  ìˆ˜ ìˆë‹¤.
# í…ŒìŠ¤íŠ¸ ì½”ë“œëŠ” skip

# ì´ë¯¸ì§€ íŒŒì¼ ë¹Œë“œ
$ docker build -t ln8847/user-service:1.0  .  

# ìƒì„±ëœ ì´ë¯¸ì§€ í™•ì¸
$ docker images | grep user-service

# ë„ì»¤ í—ˆë¸Œì— ì—…ë¡œë“œ
$ docker push ln8847/user-service:1.0

# ì´ë¯¸ì§€ ì‚­ì œ
$ docker rmi [ì´ë¯¸ì§€ ID]

# ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ
$ docker pull ln8847/user-service:1.0
```
ì»´íŒŒì¼ í›„ì— `user-service-0.0.1-SNAPSHT.jar` íŒŒì¼ì´ ìƒì„±ë˜ì—ˆë‹¤.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-17 á„‹á…©á„Œá…¥á†« 2 11 36](https://user-images.githubusercontent.com/59405576/196048754-28b62c8b-313e-465c-8bae-4ad1f245f9bd.png)<br><br>
ê·¸ë¦¬ê³  `docker images` ì»¤ë§¨ë“œë¡œ ìƒì„±ëœ ì´ë¯¸ì§€ë¥¼ í™•ì¸í•´ë³´ì.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-17 á„‹á…©á„Œá…¥á†« 2 18 01](https://user-images.githubusercontent.com/59405576/196049002-2c6045c1-6ae0-4acf-82a7-1fbbefbcf54c.png)<br><br>
ê·¸ë¦¬ê³  `docker push ln8847/user-service:1.0` ì»¤ë§¨ë“œë¡œ ì´ë¯¸ì§€ë¥¼ í‘¸ì‹œí•œ ë’¤ì—, ë„ì»¤ í—ˆë¸Œì— ì ‘ì†í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-17 á„‹á…©á„Œá…¥á†« 2 20 07](https://user-images.githubusercontent.com/59405576/196049089-bad2312e-af0a-41df-8f59-f7852d4f4de8.png)<br><br>
ì´ì œ ë°©ê¸ˆ ë„ì»¤ í—ˆë¸Œì— ì˜¬ë¦° ì´ë¯¸ì§€ë¥¼ ë‚´ë ¤ë°›ì•„ë³´ì.<br>
ê·¸ëŸ¬ê¸° ìœ„í•´ ê¸°ì¡´ ì´ë¯¸ì§€ë¥¼ ì‚­ì œí•œ ë’¤ì— ì§„í–‰í•˜ì.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-17 á„‹á…©á„Œá…¥á†« 2 24 10](https://user-images.githubusercontent.com/59405576/196049280-736c5148-b8fd-4436-b165-bad9374c5b62.png)<br>
ì„±ê³µì ìœ¼ë¡œ ë°›ì•„ì™”ë‹¤!<br><br>
ë‹¤ìŒ ê¸€ì—ì„œ `user-service`ë¥¼ ì œì™¸í•œ ë‹¤ë¥¸ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë“¤ë„ ë„ì»¤ ì´ë¯¸ì§€ë¡œ ë§Œë“¤ê³ ,<br>
í•´ë‹¹ ì„œë¹„ìŠ¤ë“¤ì„ ê¸°ë™í•˜ëŠ”ë° í•„ìš”í•œ kafka, zipkin, rabbitmq, prometheus ë“±ì˜ ì„œë¹„ìŠ¤ë“¤ë„ ë„ì»¤ë¡œ ê¸°ë™í•´ë³¼ ê²ƒì´ë‹¤.












***
<br>


    ğŸ’› ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ğŸ‘»

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}