---
title:  "[E-commerce App] Native File Repository "

categories:
  - SpringCloud
tags:
  - [SpringCloud]

toc: true
toc_sticky: true
 
date: 2022-10-05 15:30:24
last_modified_at: 2022-10-05 15:30:27
---

<br>
ì´ë²ˆì—ëŠ” Gitì— ì—°ë™í•˜ì§€ ì•Šê³  Local íŒŒì¼ ì‹œìŠ¤í…œì— ìˆëŠ” êµ¬ì„± ì •ë³´ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ì.<br>
(Native File RepositoryëŠ” ë¡œì»¬ì— ìˆëŠ” ë””ë ‰í† ë¦¬ë¥¼ ë§í•œë‹¤.)

# ë¡œì»¬ì— ë””ë ‰í† ë¦¬ ìƒì„±
ë””ë ‰í† ë¦¬ ì´ë¦„ì€ `native-file-repo`ë¼ê³  ì§€ì •í–ˆë‹¤.<br>
`native-file-repo`ëŠ” ê¹ƒê³¼ ì—°ë™í•  í•„ìš”ê°€ ì—†ê³ , ì•„ë˜ íŒŒì¼ë“¤ì´ ë“¤ì–´ìˆë‹¤.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-05 á„‹á…©á„’á…® 4 21 36](https://user-images.githubusercontent.com/59405576/194003337-21ab788c-843a-4ccb-8629-ee9031e6b8b7.png)<br><br>

`application.yml`
```yml
token:
  expiration_time: 864000000
  secret: user_token_native_application

gateway:
  ip: 127.0.0.1
```
<br>

`ecommerce.yml`
```yml
token:
  expiration_time: 864000000
  secret: user_token_native_ecommerce

gateway:
  ip: 127.0.0.1
```
<br>

`user-service.yml`
```yml
token:
  expiration_time: 864000000
  secret: user_token_native_user_service

gateway:
  ip: 127.0.0.1
```
<br>

ì´ì „ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ native file repositoryì—ì„œë„ profilesë¥¼ ë¶™ì—¬ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.<br>
`ecommerce-dev.yml`
```yml
token:
  expiration_time: 864000000
  secret: user_token_native_ecommerce_dev

gateway:
  ip: 127.0.0.1
```

# `config-service`
## `application.yml`
```yml
server:
  port: 8888

spring:
  application:
    name: config-service
  profiles:
    active: native # ğŸŒŸ native repository ì‚¬ìš©
  cloud:
    config:
      server:
        native:
          search-locations: file://${user.home}/study/msa/native-file-repo # ğŸŒŸ ì¶”ê°€
        git:
          uri: https://github.com/minju412/spring-cloud-config
```
<br>

> ì°¸ê³ <br>
MacOSëŠ” `file://` ì²˜ëŸ¼ ìŠ¬ë˜ì‹œë¥¼ ë‘ ê°œ ì“°ê³ , WindowsëŠ” `file:///` ì²˜ëŸ¼ ìŠ¬ë˜ì‹œë¥¼ ì„¸ ê°œ ì“´ë‹¤.
```
MacOS) file://${user.home}/study/msa/native-file-rep
Windows) file:///${user.home}/study/msa/native-file-rep
```

## í…ŒìŠ¤íŠ¸
### application
`http://localhost:8888/application/native`ë¡œ ì ‘ì†í•´ `application.yml` íŒŒì¼ì˜ ë‚´ìš©ì„ í™•ì¸í•´ë³´ì.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-05 á„‹á…©á„’á…® 3 59 59](https://user-images.githubusercontent.com/59405576/193999936-04bf41f2-fe04-4708-bd82-9b4144fc2e93.png)

### ecommerce
ì´ë²ˆì—ëŠ” `http://localhost:8888/ecommerce/native`ë¡œ ì ‘ì†í•´ `ecommerce.yml` íŒŒì¼ì˜ ë‚´ìš©ì„ í™•ì¸í•´ë³´ì.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-05 á„‹á…©á„’á…® 4 01 06](https://user-images.githubusercontent.com/59405576/194000107-4616f929-f8c5-43b9-a830-ad12e9f552ec.png)<br>
ì´ë•ŒëŠ” ì•„ë˜ì— ë³´ë©´ default íŒŒì¼ì¸ `application.yml`ì˜ ì •ë³´ë„ ê°™ì´ ê°€ì ¸ì˜¨ë‹¤.

### user-service
ë§ˆì§€ë§‰ìœ¼ë¡œ `http://localhost:8888/user-service/native`ë¡œ ì ‘ì†í•´ `user-service.yml` íŒŒì¼ì˜ ë‚´ìš©ì„ í™•ì¸í•´ë³´ì.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-05 á„‹á…©á„’á…® 4 01 41](https://user-images.githubusercontent.com/59405576/194000119-defa7311-9275-433d-98c1-63ddbde946ea.png)<br>

### ecommerce-dev
ë§ˆì§€ë§‰ìœ¼ë¡œ `http://localhost:8888/ecommerce/dev`ë¡œ ì ‘ì†í•´ `ecommerce-dev.yml` íŒŒì¼ì˜ ë‚´ìš©ì„ í™•ì¸í•´ë³´ì.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-05 á„‹á…©á„’á…® 4 16 47](https://user-images.githubusercontent.com/59405576/194002599-ea5bfded-abc2-4a30-9918-c8d2f6f8e94a.png)<br>
ìœ„ ì‚¬ì§„ì—ì„œì²˜ëŸ¼, native ë ˆí¬ì§€í† ë¦¬ì—ì„œ ê°ê°ì˜ profilesì— ë§ëŠ” êµ¬ì„± ì •ë³´ë¥¼ ê°€ì ¸ì™”ìŒì„ ì•Œ ìˆ˜ ìˆë‹¤.<br><br>




***
<br>


    ğŸ’› ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ğŸ‘»

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}