---
title:  "[GCP] spring boot + jenkins + docker ë°°í¬í•˜ê¸° - 2. ì  í‚¨ìŠ¤ ì„œë²„ "

categories:
  - GCP
tags:
  - [GCP]

toc: true
toc_sticky: true
 
date: 2022-10-13 20:35:21
last_modified_at: 2022-10-13 20:35:24
---

GCP í”„ë¡œì íŠ¸ ìƒì„±ë¶€í„° jenkins ì„¤ì¹˜ê¹Œì§€ëŠ” [ì´ì „ ê¸€](https://minju412.github.io/gcp/1/)ì—ì„œ ë‹¤ë¤˜ë‹¤.<br><br>
ìš°ì„ , ì´ì „ì— ë§Œë“  `jenkins` ì¸ìŠ¤í„´ìŠ¤ì—ì„œ [ìœ ì‚¬í•˜ê²Œ ë§Œë“¤ê¸°]ë¡œ `web` ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ì.<br>
ìƒì„± í›„ì—ëŠ” ì™¸ë¶€ ê³ ì • IPë„ í• ë‹¹í•˜ì.<br>
(ê¸°ì¡´ì— ìˆë˜ `instance-1`ì€ ubuntu ì˜€ìœ¼ë¯€ë¡œ ì¼ë‹¨ ì¤‘ì§€í•´ë†“ì.)<br><br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 9 31 17](https://user-images.githubusercontent.com/59405576/195596730-9ca43c1c-7011-4a6c-ba3c-9ffae5f58acd.png)<br>
í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì¸ìŠ¤í„´ìŠ¤ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.
- `jenkins`: ì  í‚¨ìŠ¤ ì„œë²„, Centos7
- `web`: ë°°í¬ ì„œë²„, Centos7

ì  í‚¨ìŠ¤ ì„œë²„ì—ì„œëŠ” Dockerë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ ,<br>
ë°°í¬ ì„œë²„ì—ì„œëŠ” Dockerë¥¼ ì‚¬ìš©í•  ê²ƒì´ë‹¤.

<br>

# 0. ì‹œë‚˜ë¦¬ì˜¤
> [ì´ ê¸€](https://dev-gorany.tistory.com/345)ì„ ì°¸ê³ í–ˆë‹¤.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 9 32 22](https://user-images.githubusercontent.com/59405576/195596855-1d9b623e-495e-4c70-89e8-50a569de2b20.png){: width="500" height="500"}
1. ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤.
2. ê¹ƒí—™ì— Pushí•œë‹¤.
3. Webhookì´ ê±¸ë ¤ ì  í‚¨ìŠ¤ì—ê²Œ Jobì„ ì‹¤í–‰í•˜ë¼ê³  í•œë‹¤.
4. ì  í‚¨ìŠ¤ê°€ Buildí•´ì¤€ ê²°ê³¼ë¥¼ ë°°í¬ ì„œë²„ì— ë„˜ê¸´ë‹¤.
5. ë°°í¬ ì„œë²„ì—ì„œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•´ ìë™ ë°°í¬í•œë‹¤.



# ì  í‚¨ìŠ¤ ì„œë²„ (`jenkins`)
> [ì´ ê¸€](https://dev-gorany.tistory.com/345)ì„ ì°¸ê³ í–ˆë‹¤.

## 1) ë©”íƒ€ë°ì´í„° ssh ì ‘ê·¼ ì„¤ì •
í‚¤ ìƒì„±ê³¼ ë“±ë¡ì€ ì´ì „ ê¸€ì—ì„œ ì´ë¯¸ ì§„í–‰í–ˆë‹¤.

## 2) ì  í‚¨ìŠ¤ ì„œë²„ êµ¬ë™
ì  í‚¨ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì— SSH ì ‘ì†í•œ ë’¤ì— ì•„ë˜ ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•œë‹¤.
```bash
$ sudo service jenkins start systemctl enable jenkins
```
`http://[ì  í‚¨ìŠ¤ ì„œë²„ ì™¸ë¶€IP]:9090`ìœ¼ë¡œ ì›¹ ë¸Œë¼ìš°ì €ì— ì ‘ì†í•œë‹¤.


## 3) Publish Over SSH
> [ì´ ê¸€](https://barbera.tistory.com/60)ì„ ì°¸ê³ í–ˆë‹¤.

### ì„¤ì¹˜
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 9 38 50](https://user-images.githubusercontent.com/59405576/195598306-3d54819f-c28c-4e74-88ef-490d7bc3cb72.png)<br><br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 9 45 30](https://user-images.githubusercontent.com/59405576/195599713-a9de5b05-1aec-44c2-8829-4976928f6bb0.png)<br><br>
ìœ„ í”ŒëŸ¬ê·¸ì¸ì„ ì„¤ì¹˜í•œë‹¤.

### ì„¤ì •
ë¨¼ì €, ê³µê°œí‚¤ì™€ ê°œì¸í‚¤ë¥¼ í™•ì¸í•´ë³´ì.<br>
```bash
# ê³µê°œí‚¤ í™•ì¸
$ cat .ssh/id_rsa.pub

# ê°œì¸í‚¤ í™•ì¸
$ cat .ssh/id_rsa # ë³µì‚¬í•´ë‘ì!
```
ì´ë•Œ í™•ì¸í•œ ê°œì¸í‚¤ë¥¼ ë³µì‚¬í•´ë‘ì!<br><br>
ì´ì œ Publish Over SSH ì„¤ì •ì„ í•´ë³´ì.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 10 15 58](https://user-images.githubusercontent.com/59405576/195606720-bca8e141-8a80-472f-b8ed-0c8f154c752d.png)<br><br>
[Jenkins ê´€ë¦¬ > ì‹œìŠ¤í…œ ì„¤ì •]ì— ë“¤ì–´ê°„ë‹¤.<br>
ë§¨ ì•„ë˜ ë³´ë©´ Publish Over SSH ê´€ë ¨ ì„¤ì •ì´ ìˆë‹¤.<br>
ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•´ì£¼ì—ˆë‹¤.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 10 27 13](https://user-images.githubusercontent.com/59405576/195609746-77041c2e-8313-4247-95ab-ad7da7a7fa7d.png)<br><br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 10 26 35](https://user-images.githubusercontent.com/59405576/195609738-2901380e-c97e-4d4e-8692-701193937bcd.png)

> ê°ê°ì˜ ì…ë ¥ì€ ì•„ë˜ì˜ ê³¼ì •ì„ ê±°ì¹˜ë©´ ëœë‹¤.<br>
1. ì•„ë˜ì˜ ê·¸ë¦¼ì—ì„œ Nameì€ ê°€ê¸‰ì ì´ë©´ GCPì—ì„œ ì¸ìŠ¤í„´ìŠ¤ì˜ ì´ë¦„ê³¼ ë™ì¼í•˜ê²Œ ì§€ì–´ì£¼ëŠ”ê²ƒì´ ì¢‹ë‹¤. (ë‚˜ëŠ” ë°°í¬ ì¸ìŠ¤í„´ìŠ¤ì˜ ì´ë¦„ì„ ì ì—ˆë‹¤.)
2. Hostnameì€ IPë¥¼ ì ì–´ì£¼ë©´ ë˜ëŠ”ë° ì›Œì»¤ ì¸ìŠ¤í„´ìŠ¤ê°€ ì  í‚¨ìŠ¤ì™€ ê°™ì€ ë„¤íŠ¸ì›Œí¬ìƒì— ìˆìœ¼ë©´ ë‚´ë¶€IPë¥¼ ì‚¬ìš©í•´ë„ ëœë‹¤. (ë‚˜ëŠ” ë‚´ë¶€ IPë¥¼ ì‚¬ìš©í–ˆë‹¤.)<br>
(ê°™ì€ Regionì— ë‚´ë¶€ IPê°€ ë¹„ìŠ·í•˜ë‹¤ë©´ ê°™ì€ ë„¤íŠ¸ì›Œí¬)
3. Usernameì€ ì¸ìŠ¤í„´ìŠ¤ì™€ ì—°ê²°ëœ Usernameì— ëŒ€í•œ ì •ë³´ì´ë‹¤. GCPì—ì„œ ë¡œê·¸ì¸í• ë•Œ ì‚¬ìš©í•˜ëŠ” ê³„ì • IDë¥¼ ì ì–´ì£¼ë©´ ëœë‹¤.<br>
4. Remote DirectoryëŠ” í™ˆ ë””ë ‰í† ë¦¬ë¥¼ ì‚¬ìš©í–ˆë‹¤. í™ˆ ë””ë ‰í† ë¦¬ ì •ë³´ëŠ” í™ˆ ê²½ë¡œ(~)ì—ì„œ ìŠ¤í¬ë¦½íŠ¸ ëª…ë ¹ì–´ 'pwd'ë¥¼ ì…ë ¥í•˜ë©´ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
5. Test Configurationì„ í´ë¦­í•˜ì—¬ ì •ìƒì ìœ¼ë¡œ ì„¤ì •ì´ ë˜ì—ˆëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì˜ ë˜ì—ˆë‹¤ë©´ ì™¼ìª½ í•˜ë‹¨ì— 'Success' ë¼ëŠ” ì¶œë ¥ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
6. ëª¨ë“  ì…ë ¥ì´ ëë‚œ í›„ì—ëŠ” ì €ì¥ì„ í•´ì£¼ë©´ ëœë‹¤

## 3) Jenkinsì™€ Github Webhooksë¥¼ ì´ìš©í•˜ì—¬ ë°°í¬ ìë™í™” í•˜ê¸°
> [ì´ ê¸€](https://barbera.tistory.com/65)ì„ ì°¸ê³ í–ˆë‹¤.

### ìƒˆë¡œìš´ Item ìƒì„±
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 10 56 51](https://user-images.githubusercontent.com/59405576/195617030-3c25ee56-6909-4760-8b12-8ac1e227f0e8.png)<br>
item nameì„ ì ê³ (ë‚˜ëŠ” ë°°í¬í•  í”„ë¡œì íŠ¸ì˜ ì´ë¦„ì„ ì ì—ˆë‹¤), Freestyle projectë¥¼ ì„ íƒí•˜ì.

### Githubì™€ ì—°ë™

#### Jenkins ë‚´ Git ê²½ë¡œ ì„¤ì •
Jenkins ë‚´ Git ê²½ë¡œëŠ” ì•„ë˜ì—ì„œ ì„¤ì •í•œë‹¤.<br><br>
Dashboard ë©”ë‰´ ì¤‘ Jenkins ê´€ë¦¬ ì„ íƒ<br>
Global Tool Configuration ì„ íƒ<br>
í•˜ë‹¨ì˜ Git ì„¤ì • ì¤‘ Path to Git executableì— ì•ì„œ í™•ì¸ í•œ git.exeì˜ ì „ì²´ ê²½ë¡œ ë¶™ì—¬ë„£ê¸° í›„ Save<br>
Jenkins ë‚´ Git ê²½ë¡œê°€ ì œëŒ€ë¡œ ì„¤ì •ë˜ì–´ ìˆì§€ ì•Šì„ ê²½ìš° ì•„ë˜ì˜ ì—ëŸ¬ê°€ ë¹¨ê°„ìƒ‰ ê¸€ì”¨ë¡œ ë‚˜íƒ€ë‚˜ ìˆì„ ê²ƒì´ë‹¤.<br><br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 11 37 50](https://user-images.githubusercontent.com/59405576/195627057-82f16e70-d491-4a32-a741-9701fad40d99.png)


#### private repository ë“±ë¡
> [ì´ ê¸€](https://mingzz1.github.io/development/basic/2021/04/19/jenkins_with_private_repo.html/)ì„ ì°¸ê³ í–ˆë‹¤.

ë‚˜ëŠ” private repositoryì— í”„ë¡œì íŠ¸ê°€ ìˆìœ¼ë¯€ë¡œ ì•„ë˜ ì„¤ì •ì„ í•´ì£¼ì–´ì•¼í•œë‹¤.<br><br>
ì  í‚¨ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ì´ì „ì— ìƒì„±í•œ ê³µê°œí‚¤, ë¹„ë°€í‚¤ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤.
```bash
# ê³µê°œí‚¤ í™•ì¸
$ cat .ssh/id_rsa.pub

# ë¹„ë°€í‚¤ í™•ì¸
$ cat .ssh/id_rsa
```
ìƒì„±í•œ ê³µê°œí‚¤ë¥¼ `key`ìë¦¬ì— ë“±ë¡í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ Deploy keyë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 11 10 17](https://user-images.githubusercontent.com/59405576/195620295-4374f796-8e5c-4f61-a21e-4b449f9d4c25.png)<br><br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 11 12 37](https://user-images.githubusercontent.com/59405576/195621089-2bf86caf-63c9-4c9a-ac5b-dd2c8659e9b8.png)<br><br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 11 14 12](https://user-images.githubusercontent.com/59405576/195621158-e500b7b4-156e-4b85-a453-7961c850ce91.png)<br><br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 11 14 30](https://user-images.githubusercontent.com/59405576/195621227-bdc9ec42-95b5-4a48-b608-3e12c300020f.png)<br><br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 11 14 49](https://user-images.githubusercontent.com/59405576/195621314-d753a9a5-ba01-40da-8c58-d4a1aeb1e802.png)<br><br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 11 18 21](https://user-images.githubusercontent.com/59405576/195622338-56988d88-dc40-4a71-874a-764abb9c3b09.png)<br><br>
ì´ ë•Œ, ë¹„ë°€í‚¤ë¥¼ ë³µì‚¬ í›„ ë¶™ì—¬ë„£ê¸° í•˜ì.
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 11 20 58](https://user-images.githubusercontent.com/59405576/195622991-9f3a8517-d40a-4958-bfae-044f14a2b4c2.png)<br>
credentialì„ ìƒì„±í–ˆë‹¤!

#### github ì—°ë™
ì´ëŸ° ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤ë©´?<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 11 28 48](https://user-images.githubusercontent.com/59405576/195624791-f1840089-5ef9-4cc1-9091-bf5e09047672.png)<br><br>

```bash
$ /usr/bin/git ls-remote -h git@github.com:minju412/docker-test.git HEAD
```








=================

## 3) Global Config
### JDK


### Git


## 4) System Config
### Github Repository


### Github


### Publish Over SSH


## 5) Create Jenkins' Job





## 6) Git Clone



## 7) Build



## 8) Deploy















======================
# spring boot ë°°í¬í•˜ê¸°
> [ì´ ê¸€](https://wings2pc.tistory.com/entry/%EB%8F%84%EC%BB%A4Docker-Dockerfile%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%98%EC%97%AC-springboot-app-%EB%B0%B0%ED%8F%AC-%EB%B0%8F-GCP-%EB%B0%A9%ED%99%94%EB%B2%BD-%EC%84%A4%EC%A0%95)ì„ ì°¸ê³ í–ˆë‹¤.









***
<br>


    ğŸ’› ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ğŸ‘»

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}