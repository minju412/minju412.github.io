---
title:  "[GCP] GCP(Google Cloud Platform)ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± í›„ jenkins ì„¤ì¹˜"
# excerpt: "sprintfì— ëŒ€í•´ ì•Œì•„ë³´ì"

categories:
  - GCP
tags:
  - [GCP]

toc: true
toc_sticky: true
 
date: 2022-10-12 18:59:51
last_modified_at: 2022-10-12 18:59:54
---

ì„œë²„ë¥¼ ë°°í¬í•˜ë˜ ì¤‘, AWS í”„ë¦¬í‹°ì–´ì˜ ì‚¬ì–‘ì´ ë¶€ì¡±í•´ ì›í™œí•˜ê²Œ ìˆ˜í–‰ë˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤.<br>
ê°™ì€ ë¬¸ì œê°€ ë°œìƒí–ˆë‹¤ëŠ” [ê¸€](https://blog.naver.com/PostView.naver?blogId=gmlwo308&logNo=222210877767&parentCategoryNo=&categoryNo=&viewDate=&isShowPopularPosts=false&from=postView)ë„ ë°œê²¬í–ˆë‹¤.<br>
ë”°ë¼ì„œ GCPë¥¼ ì´ìš©í•´ë³´ë ¤ê³  í•œë‹¤.<br>
êµ¬ê¸€ í´ë¼ìš°ë“œì— ê°€ì…í•˜ëŠ” ë²•ì€ [ì´ ê¸€](https://bluewins.tistory.com/entry/%EA%B5%AC%EA%B8%80%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C-GCP-%EA%B0%80%EC%9E%85%ED%95%B4%EC%84%9C-%EB%AC%B4%EB%A3%8C-%ED%81%AC%EB%A0%88%EB%94%A7-300-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0)ì„ ì°¸ê³ í•˜ì.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-12 á„‹á…©á„’á…® 7 24 55](https://user-images.githubusercontent.com/59405576/195318838-12747313-8868-4d6f-a3dd-96434a278ff6.png){: width="200" height="200"}

> ì°¸ê³ ğŸŒŸ<br>
ë¯¸ë¦¬ ë§í•˜ìë©´, spring boot ì•±ì„ ë°°í¬í•˜ê¸° ìœ„í•´ì„œ ì´ ë‘ ê°œì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ ì˜ˆì •ì´ë‹¤.<br>
í•˜ë‚˜ëŠ” `instance-1`ì´ë¼ëŠ” ì´ë¦„ì˜ ë°°í¬í•  spring boot í”„ë¡œì íŠ¸ ìš© ì¸ìŠ¤í„´ìŠ¤ì´ê³ ,<br>
ë‹¤ë¥¸ í•˜ë‚˜ëŠ” `instance-jenkins`ë¼ëŠ” ì´ë¦„ì˜ jenkin ìš© ì¸ìŠ¤í„´ìŠ¤ì´ë‹¤.<br><br>
ì´ ê¸€ì—ì„œëŠ” ë‘ ê°œì˜ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± í›„ `instance-jenkins`ì— jenkinsë¥¼ ì„¤ì¹˜í•´ë³´ëŠ” ê²ƒê¹Œì§€ ë‹¤ë£¬ë‹¤.<br>
(ë§¤ìš° ê¸´ Trouble Shooting ê³¼ì •ì´ ë‚˜ì˜¬ ì˜ˆì •ì´ë‹¤..ğŸ˜±)

# 1. ë¦¬ëˆ…ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±í•˜ê¸°
> ì „ì²´ì ìœ¼ë¡œ [ì´ ê¸€](https://wings2pc.tistory.com/entry/%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C-GCPGoogle-Cloud-Platform-%EC%97%90%EC%84%9C-%EB%A6%AC%EB%88%85%EC%8A%A4-%EC%83%9D%EC%84%B1-%ED%95%98%EA%B8%B0)ì„ ì°¸ê³ í–ˆìœ¼ë©°, ë¬´ë£Œ ë²„ì „ê³¼ ê´€ë ¨í•´ì„œëŠ” [ì´ ê¸€](https://wildeveloperetrain.tistory.com/154)ì„ ì°¸ê³ í–ˆë‹¤.

- ë¦¬ì „: ì‚¬ìš°ìŠ¤ìºë¡¤ë¼ì´ë‚˜(us-east1)
- ë¶€íŒ… ë””ìŠ¤í¬<br>- ìš´ì˜ì²´ì œ: Ubuntu<br>- ë²„ì „: Ubuntu 20.04 LTS<br>- ë¶€íŒ… ë””ìŠ¤í¬ ìœ í˜•: í‘œì¤€ ì˜êµ¬ ë””ìŠ¤í¬<br>- í¬ê¸°: 30
- ë°©í™”ë²½<br>- HTTP íŠ¸ë˜í”½ í—ˆìš©<br>- HTTPS íŠ¸ë˜í”½ í—ˆìš©

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-12 á„‹á…©á„’á…® 7 32 52](https://user-images.githubusercontent.com/59405576/195320534-db81ed43-4ec9-43a5-ac43-fcb5d97cf820.png){: width="800" height="800"}<br><br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-12 á„‹á…©á„’á…® 7 44 00](https://user-images.githubusercontent.com/59405576/195322841-db1078df-1edc-42a2-bcf6-981c6a7efe9d.png){: width="800" height="800"}<br><br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-12 á„‹á…©á„’á…® 7 31 06](https://user-images.githubusercontent.com/59405576/195320329-a0b44bd0-8198-4516-86e9-0913abc14979.png){: width="500" height="500"}<br><br>

## ìƒì„± ì™„ë£Œ
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-12 á„‹á…©á„’á…® 7 50 48](https://user-images.githubusercontent.com/59405576/195324223-80b6683e-fe5a-4115-9364-834c95ee3a3a.png){: width="800" height="800"}<br><br>
"ë¸Œë¼ìš°ì € ì°½ì—ì„œ ì—´ê¸°"ë¥¼ í´ë¦­í•˜ë©´ ë°”ë¡œ ssh ì ‘ì†ì„ í•  ìˆ˜ ìˆë‹¤.

> ì°¸ê³ <br>
ë¬´ë£Œ ì„œë²„ì´ê¸° ë•Œë¬¸ì— ê³¼ê¸ˆì˜ ìš°ë ¤ëŠ” ì—†ì§€ë§Œ, <br>
ì•„ë˜ ë¸”ë¡œê·¸ì— í˜¹ì‹œë‚˜ ê³¼ê¸ˆì´ ë°œìƒí–ˆì„ ê²½ìš° ë©”ì¼ë¡œ ì•Œë¦¼ì„ ë°›ì„ ìˆ˜ ìˆë„ë¡ ì„¤ì •í•˜ëŠ” ë°©ë²•ì´ ë‚˜ì™€ìˆë‹¤. <br>
í•„ìš”í•œ ê²½ìš°ì— ì°¸ê³ í•˜ì!<br>
[https://wildeveloperetrain.tistory.com/154](https://wildeveloperetrain.tistory.com/154)

### 1) ì™¸ë¶€ IP ê³ ì •
1. ìƒì„±ëœ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ë§¨ ì˜¤ë¥¸ìª½ ì  ì„¸ ê°œë¥¼ í´ë¦­í•œ ë’¤, [ë„¤íŠ¸ì›Œí¬ ì„¸ë¶€ì •ë³´ ë³´ê¸°]ë¥¼ í´ë¦­í•œë‹¤.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-12 á„‹á…©á„’á…® 9 27 37](https://user-images.githubusercontent.com/59405576/195342418-4e08a46f-7ba5-4b6b-9754-52db6816b877.png){: width="200" height="200"}

2. [IP ì£¼ì†Œ > ì™¸ë¶€ IP ì£¼ì†Œ > ì™¸ë¶€ ê³ ì • ì£¼ì†Œ ì˜ˆì•½]ì„ í´ë¦­í•œë‹¤.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-12 á„‹á…©á„’á…® 9 28 09](https://user-images.githubusercontent.com/59405576/195343021-6805ab8f-0c99-4517-878e-a68059e1daef.png){: width="800" height="800"}

3. ì•„ë˜ì™€ ê°™ì´ ì—°ê²° ëŒ€ìƒì— ë°©ê¸ˆ ë§Œë“  ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì§€ì •í•œ ë’¤ [ì˜ˆì•½]ì„ í´ë¦­íŒë‹¤.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-12 á„‹á…©á„’á…® 9 30 04](https://user-images.githubusercontent.com/59405576/195343030-a5b05e0c-05c1-492d-8b12-cca77c15d9fe.png){: width="300" height="300"}

### 2) ë°©í™”ë²½
> [ì´ ê¸€](https://4whomtbts.tistory.com/90)ì„ ì°¸ê³ í–ˆë‹¤.

í¬íŠ¸ë¥¼ ì—´ì–´ì£¼ì–´ì•¼ í•œë‹¤<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-12 á„‹á…©á„’á…® 10 22 14](https://user-images.githubusercontent.com/59405576/195354132-e2bc6687-a055-4687-86b6-994ecaaba22e.png){: width="400" height="400"}<br>
ìœ„ì— ì‚¬ì§„ì²˜ëŸ¼ ë°©í™”ë²½ ê·œì¹™ì„ ë§Œë“ ë‹¤.<br><br>
ê·¸ë¦¬ê³  ë°©ê¸ˆ ë§Œë“  ì¸ìŠ¤í„´ìŠ¤ì— ì ìš©ê¹Œì§€ í•´ì£¼ì–´ì•¼ í•œë‹¤!<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-12 á„‹á…©á„’á…® 10 25 23](https://user-images.githubusercontent.com/59405576/195354859-0c771c91-f2c8-4fe6-b754-6263336a18d1.png){: width="400" height="400"}<br><br>
ì´ì œ [ìœ ì‚¬í•˜ê²Œ ë§Œë“¤ê¸°]ë¥¼ í†µí•´ jenkins ìš© ì¸ìŠ¤í„´ìŠ¤ë¥¼ í•˜ë‚˜ ë” ë§Œë“¤ì.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-12 á„‹á…©á„’á…® 10 38 57](https://user-images.githubusercontent.com/59405576/195357976-5172ec5f-cf51-4927-8b73-eae2007e5025.png)<br>
ê·¸ë¦¬ê³  ì´ì „ì²˜ëŸ¼ ê³ ì • IPì™€ ë°©í™”ë²½ ì„¤ì •ê¹Œì§€ í•´ì¤€ë‹¤. ("ë¹„ìŠ·í•˜ê²Œ ë§Œë“¤ê¸°"ë¡œ ìƒì„±í•˜ë©´ ë°©í™”ë²½ì€ ì €ì ˆë¡œ ì„¤ì •ë˜ì–´ ìˆì„ ê²ƒì´ë‹¤.)


# 2. `instance-jenkins`
## 1) ë©”íƒ€ë°ì´í„° ssh ì ‘ê·¼ ì„¤ì •
> [ì´ ê¸€](https://psawesome.tistory.com/55)ì„ ì°¸ê³ í–ˆë‹¤.

jenkinsì™€ webì´ ì†Œí†µí•  ìˆ˜ ìˆë„ë¡ ssh public keyë¥¼ ì„¤ì •í•˜ëŠ” ê³¼ì •ì´ë‹¤.<br>
`instance-jenkins`ì— SSH ì ‘ì†í•œ ë’¤, ì•„ë˜ ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•˜ì.

```bash
# ssh-keygenì„ í†µí•´ public/private key ìƒì„±
$ ssh-keygen -t rsa # ì—”í„° ì„¸ ë²ˆ ì…ë ¥

# ë³µì‚¬ë¥¼ ìœ„í•´ publickey ì¶œë ¥
$ cat .ssh/id_rsa.pub # ì¶œë ¥ ê°’ì„ ë³µì‚¬í•˜ì.
```
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-12 á„‹á…©á„’á…® 10 45 43](https://user-images.githubusercontent.com/59405576/195359682-5090e481-9740-4613-a3bc-e566ab4b6e13.png){: width="800" height="800"}<br><br>
ì´ì œ GCPë¡œ ëŒì•„ì™€, ì•„ë˜ ì‚¬ì§„ì— ë³´ì´ëŠ” [ë©”íƒ€ë°ì´í„° > SSH í‚¤ > SSH í‚¤ ì¶”ê°€]ë¥¼ í´ë¦­í•˜ì.<br>
<img width="1420" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-12 á„‹á…©á„’á…® 10 48 23" src="https://user-images.githubusercontent.com/59405576/195360854-ca0ea4e2-36df-404d-8b1a-8f1c692921e3.png">{: width="800" height="800"}<br>
ê·¸ë¦¬ê³  ì•„ê¹Œ ë³µì‚¬í•œ ê°’ì„ ë¶™ì—¬ë„£ê³ , í‚¤ë¥¼ ì¶”ê°€í•œë‹¤.<br>
<img width="1046" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-12 á„‹á…©á„’á…® 10 53 47" src="https://user-images.githubusercontent.com/59405576/195361807-89f82015-cc6b-4d79-ac33-65ed9ecdeeba.png"><br>
publickeyë¥¼ ë©”íƒ€ë°ì´í„°ì— ë“±ë¡í•˜ë©´ ëª¨ë“  ì¸ìŠ¤í„´ìŠ¤ì— publickeyê°€ ê³µìœ ë˜ì–´ ì¸ìŠ¤í„´ìŠ¤ë¼ë¦¬ ì ‘ê·¼ì´ ê°€ëŠ¥í•´ì§„ë‹¤.<br><br>
ê·¸ëŸ¼ ì´ì œ `instance-1`ì— ì ‘ê·¼í•´ë³´ì.

```bash
# í˜•ì‹: ssh -i [instance name] [ë‚´ë¶€ ip]
$ ssh -i instance-1 10.178.0.3
```
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-12 á„‹á…©á„’á…® 10 56 55](https://user-images.githubusercontent.com/59405576/195362877-ab87e9ef-c167-43ce-a1a5-e4cb5f09f14f.png)<br>
ì´í›„ ìœ ì €ë¥¼ ë³´ë©´, `instance-1`ìœ¼ë¡œ ì „í™˜ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.<br>
`exit` ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´ ë‹¤ì‹œ `instance-jenkins`ë¡œ ëŒì•„ì˜¨ë‹¤.

## 2) jenkins ì„¤ì¹˜ ë° êµ¬ë™
`instance-jenkins`ì—ì„œ ì•„ë˜ ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•˜ì.
```bash
# jenkins êµ¬ë™ì„ ìœ„í•œ jdk ì„¤ì¹˜
$ sudo apt-get install openjdk-11-jdk -y

# repository key ì„¤ì •
$ wget -q -O - https://pkg.jenkins.io/debian-stable/jenkins.io.key | sudo apt-key add -

# repository ëª©ë¡ ê°±ì‹ 
$ sudo sh -c 'echo deb http://pkg.jenkins.io/debian-stable binary/ > /etc/apt/sources.list.d/jenkins.list'

$ sudo apt-get update

# ì  í‚¨ìŠ¤ ì„¤ì¹˜
$ sudo apt-get install jenkins -y
```

### Trouble Shooting ğŸ”¥
ë§¨ ë§ˆì§€ë§‰ì— ì  í‚¨ìŠ¤ë¥¼ ì„¤ì¹˜í•  ë•Œ ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-12 á„‹á…©á„’á…® 11 15 38](https://user-images.githubusercontent.com/59405576/195367153-20df884f-34f1-4b1d-a75b-c5219d3690fb.png)

#### ì‹œë„ 1) í¬íŠ¸ ë³€ê²½
ì•„ë˜ ì»¤ë§¨ë“œë¡œ í¬íŠ¸ ë²ˆí˜¸ë¥¼ 8080ì—ì„œ 9090ìœ¼ë¡œ ë³€ê²½í–ˆë‹¤.
```bash
$ sudo vi /etc/init.d/jenkins
$ sudo vi /etc/default/jenkins
```
ì•„ì§ í•´ê²°ë˜ì§€ ì•Šì•˜ë‹¤..<br>
ìš°ì„  ë°”ê¾¼ í¬íŠ¸ ë²ˆí˜¸ëŠ” ê·¸ëŒ€ë¡œ ë‘ì—ˆë‹¤.

#### ì‹œë„ 2) PATH ì¶”ê°€
ì´ë²ˆì—ëŠ” java ê²½ë¡œë¥¼ ì¶”ê°€í•´ë³´ì.<br>
ë¨¼ì €, ì•„ë˜ ì»¤ë§¨ë“œë¥¼ í†µí•´ java ê²½ë¡œë¥¼ í™•ì¸í•˜ì.
```bash
$ update-alternatives --list java
# ì¶œë ¥: /usr/lib/jvm/java-11-openjdk-amd64/bin/java
```
ì´ì œ ì•„ë˜ ì»¤ë§¨ë“œë¡œ íŒŒì¼ì„ ìˆ˜ì •í•˜ì.<br>
(readonly íŒŒì¼ì´ë¼ sudo ê¶Œí•œìœ¼ë¡œ ìˆ˜ì •í•´ì•¼í•œë‹¤.)
```bash
$ sudo vi /etc/init.d/jenkins
```
<img width="592" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-12 á„‹á…©á„’á…® 11 29 35" src="https://user-images.githubusercontent.com/59405576/195370625-c13ab450-ab2d-43b7-aabb-c4ced5dcdfeb.png">

```
PATH=/usr/lib/jvm/java-11-openjdk-amd64/bin:/bin:/usr/bin:/sbin:/usr/sbin:
```

#### ì‹œë„ 3) java ë²„ì „ ë³€ê²½: 11 -> 8
ê·¸ëŒ€ë¡œ ì—ëŸ¬ê°€ ê³„ì† ë°œìƒí•´ì„œ ì´ë²ˆì—ëŠ” javaì˜ ë²„ì „ì„ 11ì—ì„œ 8ë¡œ ë°”ê¿”ë³´ì•˜ë‹¤.
```bash
# ê¸°ì¡´ java ì œê±°
$ sudo apt-get purge openjdk*

# ì‚­ì œ í™•ì¸
$ java -version

# java8 ì„¤ì¹˜
$ sudo apt-get install openjdk-8-jdk -y

# ë²„ì „ í™•ì¸
$ java -version
```
<img width="589" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-12 á„‹á…©á„’á…® 11 55 57" src="https://user-images.githubusercontent.com/59405576/195377000-e341a77c-dd83-4ba4-b6ff-de8a38f56e71.png"><br>
ì´ì œ ì•„ê¹Œ java ê²½ë¡œì—ì„œ 11ì„ 8ë¡œ ë°”ê¿”ì£¼ì.
```
PATH=/usr/lib/jvm/java-8-openjdk-amd64/bin:/bin:/usr/bin:/sbin:/usr/sbin:
```

ê·¸ë˜ë„ ì•ˆëœë‹¤...

#### ì‹œë„ 4) ë˜ í¬íŠ¸ ë³€ê²½
êµ¬ê¸€ë§ í•˜ë˜ ì¤‘, í¬íŠ¸ ë²ˆí˜¸ë¥¼ í•œ êµ°ë° ë” ë°”ê¿”ì•¼í•œë‹¤ëŠ” ê¸€ì´ ìˆì—ˆë‹¤.
```bash
$ sudo vi /lib/systemd/system/jenkins.service
```
ì—­ì‹œ ê¸°ì¡´ 8080ì—ì„œ 9090ìœ¼ë¡œ ë°”ê¿¨ë‹¤.<br>
ê·¸ë˜ë„ ì•ˆëœë‹¤...

#### ì‹œë„ 5) java ë²„ì „ ë³€ê²½: 8 -> 11
ë‹¤ì‹œ java ë²„ì „ì„ 11ë¡œ ë³€ê²½í•˜ê³  pathë„ ë³€ê²½í–ˆë‹¤ã… 
```bash
$ sudo apt remove openjdk-8-jdk

# ê¸°ë³¸ ìë°”ë¥¼ openjdk-11ë¡œ ì„¤ì •
$ sudo update-java-alternatives --set java-11-openjdk-amd64
```

#### ì‹œë„ 6) í™˜ê²½ë³€ìˆ˜ ì„¤ì •
`echo $JAVA_HOME` ì»¤ë§¨ë“œë¥¼ ì…ë ¥í•´ë´¤ë”ë‹ˆ, í™˜ê²½ë³€ìˆ˜ ì„¤ì •ì´ ì•ˆë˜ì–´ìˆê¸¸ë˜, ì´ë²ˆì—ëŠ” í™˜ê²½ë³€ìˆ˜ ì„¤ì •ì„ í•´ë³´ì<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„Œá…¥á†« 12 25 32](https://user-images.githubusercontent.com/59405576/195384068-80be4ff4-98d7-4fca-bb97-12e311ee0e69.png)<br><br>
ë¨¼ì €, ì•„ë˜ ì»¤ë§¨ë“œë¥¼ í†µí•´ java ê²½ë¡œë¥¼ í™•ì¸í•˜ì.<br>
ì¶œë ¥ë˜ëŠ” ê²½ë¡œì—ì„œ ë§¨ ë§ˆì§€ë§‰ `/bin/java`ë¥¼ ì œì™¸í•˜ê³  ë³µì‚¬í•˜ì.
```bash
$ update-alternatives --list java
# ì¶œë ¥: /usr/lib/jvm/java-11-openjdk-amd64/bin/java

$ sudo vi /etc/environment
# ì¶”ê°€: JAVA_HOME="/usr/lib/jvm/java-11-openjdk-amd64"

# ë³€ê²½ ì‚¬í•­ ì ìš©
$ source /etc/environment

# ë³€ê²½ í™•ì¸
$ echo $JAVA_HOME
```
<img width="396" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„Œá…¥á†« 12 29 30" src="https://user-images.githubusercontent.com/59405576/195385051-f3af7c6f-9d47-4db3-8990-26a5d17df7e2.png"><br><br>
<img width="347" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„Œá…¥á†« 12 30 30" src="https://user-images.githubusercontent.com/59405576/195385298-c4e9a696-b3de-466d-8750-b0f7c31c1f27.png"><br><br>
ë˜ ì•ˆëœë‹¤..ã…œã…œ

#### ì‹œë„ 7) ì²˜ìŒë¶€í„° ë‹¤ì‹œ
```bash
# ì  í‚¨ìŠ¤ ì €ì¥ì†Œ í‚¤ ì„¤ì •
$ wget -q -O - https://pkg.jenkins.io/debian/jenkins.io.key | sudo apt-key add -

# ì  í‚¨ìŠ¤ ì €ì¥ì†Œ ëª©ë¡ ê°±ì‹ 
$ sudo sh -c 'echo deb http://pkg.jenkins.io/debian-stable binary/ | sudo tee /etc/apt/sources.list.d/jenkins.list'

# ì„¤ì¹˜ëª©ë¡ ìµœì‹  ê°±ì‹ 
$ sudo apt-get update

# Java Install 
# $ sudo apt-get install openjdk-11-jdk # ì´ê±°ëŠ” ë¹¼ê³  í–ˆë‹¤.

# Jenkins Install
$ sudo apt-get install jenkins
```
<img width="946" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„Œá…¥á†« 12 42 15" src="https://user-images.githubusercontent.com/59405576/195388005-b1bd9f0c-c765-41c0-ac11-48ecba3d1e6e.png"><br>
ì´ëŸ° ì‹ìœ¼ë¡œ ë‚˜ì™”ëŠ”ë°, ê¸°ë™ì´ ë˜ì§€ ì•Šì•„ ìƒíƒœë¥¼ í™•ì¸í•´ë´¤ë”ë‹ˆ ì•„ë˜ì™€ ê°™ì•˜ë‹¤.<br>
<img width="950" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„Œá…¥á†« 12 51 50" src="https://user-images.githubusercontent.com/59405576/195390174-dec6838b-4b59-49ec-9227-3271877d8970.png"><br>
ì´ˆê¸° ë¹„ë°€ë²ˆí˜¸(`initialAdminPassword`)ëŠ” ìƒì„±ë˜ì—ˆëŠ”ë° ê¸°ë™ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤..<br><br>
ì„¤ì¹˜ë¥¼ ë‹¤ì‹œ í•´ë³´ë‹ˆ ì²˜ìŒê³¼ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤..<br>
<img width="936" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„Œá…¥á†« 12 55 49" src="https://user-images.githubusercontent.com/59405576/195390949-5c317034-1520-473a-a184-f924730ef405.png">

#### ì‹œë„ 8) PATH ì‚­ì œ
ì˜ˆì „ì—ëŠ” PATHë¥¼ ì¶”ê°€í•˜ì§€ ì•Šì•„ë„ ëì—ˆë˜ ê°™ì•„ì„œ ì£¼ì„ì²˜ë¦¬ í•´ë³´ì•˜ë‹¤.<br>
`ì‹œë„2`ë¥¼ ë³´ê³  í•˜ì.<br><br>
<img width="1361" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„Œá…¥á†« 1 06 37" src="https://user-images.githubusercontent.com/59405576/195393321-ffe02516-0d71-41c9-b551-6f64fb11fbfb.png"><br>
ì´ëŸ° ì—ëŸ¬ê°€ ë°œìƒí•´ ë‹¤ì‹œ ì£¼ì„ì„ í•´ì œí–ˆë‹¤.

#### ì‹œë„ 9) ì´ë¯¸ì§€ë¥¼ ë°”ê¿” `jenkins` ì¸ìŠ¤í„´ìŠ¤ ë‹¤ì‹œ ìƒì„± -> ì„±ê³µ ğŸ‘
> [ì´ ê¸€](https://noong2.tistory.com/38)ì„ ì°¸ê³ í–ˆë‹¤.

ê¸°ì¡´ì—ëŠ” Ubuntu 20.04 LTS ì˜€ëŠ”ë°, Centos 7ë¡œ ë‹¤ì‹œ ë§Œë“¤ì—ˆë‹¤.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 6 29 28](https://user-images.githubusercontent.com/59405576/195559651-558b78e3-f7dd-4d57-8982-b46f41fad755.png)<br><br>
ì´ë²ˆì—ëŠ” ubuntuê°€ ì•„ë‹ˆë¼ centos ì´ê¸°ë•Œë¬¸ì— ì»¤ë§¨ë“œê°€ ì•½ê°„ ë‹¬ë¼ì§„ë‹¤.

```bash
# jdk ì„¤ì¹˜ ë° ì„¤ì •
$ sudo yum list java-1.8.0-openjdk-devel*
$ sudo yum install java-1.8.0-openjdk-devel.x86_64

# ì„¤ì¹˜ëœ ê²½ë¡œì™€ ë²„ì „ í™•ì¸
$ which javac /usr/bin/javac
$ readlink -f /usr/bin/javac /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.282.b08-1.el7_9.x86_64/bin/javac

# JAVA_HOME êµ¬ì„±
$ sudo vi /etc/profile
# ë§¨ í•˜ë‹¨ì— ì•„ë˜ ëª…ë ¹ì–´ ì¶”ê°€
export JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.252.b09-2.el7_8.x86_64 PATH=$PATH:$JAVA_HOME/bin export PATH

# ë³€ê²½ì‚¬í•­ ì ìš©
$ source /etc/profile

# ë²„ì „ í™•ì¸
$ echo $JAVA_HOME /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.282.b08-1.el7_9.x86_64
# ì¶œë ¥: /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.252.b09-2.el7_8.x86_64 /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.282.b08-1.el7_9.x86_64

# wget ì„¤ì¹˜
$ sudo yum install wget -y

# MAVEN_HOME êµ¬ì„±
$ sudo vim /etc/profile
# ë§¨ í•˜ë‹¨ì— ì•„ë˜ ëª…ë ¹ì–´ ì¶”ê°€
export MAVEN_HOME=/usr/local/apple/Tools/apache-maven-3.6.3 PATH=$PATH:$JAVA_HOME/bin:$MAVEN_HOME/bin export PATH

# ë³€ê²½ì‚¬í•­ ì ìš©
source /etc/profile

# ë²„ì „ í™•ì¸
$ echo $MAVEN_HOME /usr/local/apple/Tools/apache-maven-3.6.3

# git ì„¤ì¹˜
sudo yum install git

# yum repository ì‚¬ìš©ì„ ìœ„í•´ public keyë¥¼ ë“±ë¡
$ sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo 
$ sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key

# jenkins ì„¤ì¹˜
$ sudo yum install jenkins
```

ì´ì œ ë°©í™”ë²½ ì„¤ì •ì„ í•˜ì.<br>
...

í¬íŠ¸ë¥¼ ë³€ê²½í•˜ì. (8080 -> 9090)
```bash
$ sudo vi /etc/sysconfig/jenkins # JENKINS_PORT="9090"
$ sudo vi /lib/systemd/system/jenkins.service # Environment="JENKINS_PORT=9090"

# ë°©í™”ë²½ ì„¤ì •
$ sudo firewall-cmd --permanent --zone=public --add-port=9090/tcp
$ sudo firewall-cmd --reload

# jenkins ì‹œì‘
$ sudo service jenkins start systemctl enable jenkins

# $ sudo systemctl daemon-reload
# $ sudo systemctl start jenkins
# $ sudo systemctl enable jenkins
```
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 6 58 06](https://user-images.githubusercontent.com/59405576/195566657-be9ba1de-9ea6-49fc-87fe-41299a6c3598.png)<br><br>
ì—ëŸ¬ ë°œìƒ..<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 7 18 34](https://user-images.githubusercontent.com/59405576/195571147-f316d5dd-e290-4d9c-b914-e6bee1e9e75b.png)<br><br>
ì‹œë„ 1) java ê²½ë¡œ ì¶”ê°€<br>
```bash
$ sudo vi /etc/init.d/jenkins
# ì•„ë˜ path ì¶”ê°€
/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.252.b09-2.el7_8.x86_64
```
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 7 25 35](https://user-images.githubusercontent.com/59405576/195572661-aea9bd33-1bb5-4569-bfbc-766fd7b13a47.png)<br>
ë§¨ ì•„ë˜ ì¶”ê°€í–ˆë‹¤.<br>
ê·¸ëŸ¬ë‚˜ ì‹¤íŒ¨í–ˆë‹¤.<br><br>
ì‹œë„ 2) java installation folderì— ê¶Œí•œ ë¶€ì—¬
```bash
$ cd /usr/lib
$ sudo chmod 755 jvm

# í™ˆìœ¼ë¡œ ì´ë™
$ cd
$ sudo systemctl start jenkins
```
ì´ë²ˆì—ë„ ì‹¤íŒ¨í–ˆë‹¤.<br><br>
ì‹œë„ 3) java ë‹¤ë¥¸ ë²„ì „ ì„¤ì¹˜ (8 -> 11)
```bash
# ì„¤ì¹˜í•  ìˆ˜ ìˆëŠ” ë²„ì „ í™•ì¸
$ sudo yum list java-11-openjdk

# ì„¤ì¹˜
$ sudo yum install java-11-openjdk.x86_64

# ê¸°ë³¸ ìë°” ì„ íƒ
$ sudo update-alternatives --config java
```
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 7 54 54](https://user-images.githubusercontent.com/59405576/195578613-2067fb22-f4b4-404a-9f93-ac8d1484f2a8.png)<br>
ì„¤ì¹˜ëœ ê²½ë¡œëŠ” ì•„ë˜ì™€ ê°™ë‹¤.
```
/usr/lib/jvm/java-11-openjdk-11.0.16.1.1-1.el7_9.x86_64/bin/java
```
ì´ì œ JAVA_HOMEì„ ì„¤ì •í•˜ì.
```bash
# JAVA_HOME êµ¬ì„±
$ sudo vi /etc/profile
# ë§¨ í•˜ë‹¨ì— JAVA_HOMEì„ ì•„ë˜ ì»¤ë§¨ë“œë¡œ ë³€ê²½
export JAVA_HOME=/usr/lib/jvm/java-11-openjdk-11.0.16.1.1-1.el7_9.x86_64 PATH=$PATH:$JAVA_HOME/bin export PATH

# ë³€ê²½ì‚¬í•­ ì ìš©
$ source /etc/profile

# path ì¶”ê°€
$ sudo vi /etc/init.d/jenkins
# ì•„ë˜ ë‘ ê°œ path ì¶”ê°€
/usr/lib/jvm/java-11-openjdk-11.0.16.1.1-1.el7_9.x86_64
/usr/lib/jvm/java-11-openjdk-11.0.16.1.1-1.el7_9.x86_64/bin/java

# jenkins ì‹œì‘
$ sudo service jenkins start systemctl enable jenkins
```
ë“œë””ì–´ ì„±ê³µí–ˆë‹¤!!!<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 8 09 15](https://user-images.githubusercontent.com/59405576/195581293-2234b3d2-d25e-41f6-bea8-fe40b9e71635.png)


### jenkins ì„¤ì¹˜ ë° êµ¬ë™ ì„±ê³µ ê³¼ì •
ë§ˆì¹¨ë‚´ jenkins êµ¬ë™ì— ì„±ê³µí–ˆë‹¤...<br>
ë‚˜ì¤‘ì„ ìœ„í•´ í•œ ì¼ë“¤ì„ ì •ë¦¬í•´ë³´ì.
- centos 7 ì¸ìŠ¤í„°ìŠ¤ ìƒì„±
- ì™¸ë¶€ ê³ ì • IP í• ë‹¹
- openjdk-11 ì„¤ì¹˜ ë° ê¸°ë³¸ ìë°”ë¡œ ì„¤ì •
- JAVA_HOME
- `/etc/init.d/jenkins`ì— java path ì¶”ê°€
- wget ì„¤ì¹˜
- MAVEN_HOME
- git ì„¤ì¹˜
- public key ë“±ë¡
- jenkins ì„¤ì¹˜
- (gcp í™ˆì—ì„œ) 9090 í¬íŠ¸ ì—´ê¸°
- `/etc/sysconfig/jenkins`, `/lib/systemd/system/jenkins.service` 9090ìœ¼ë¡œ í¬íŠ¸ ë³€ê²½
- ë°©í™”ë²½ ì„¤ì •
- jenkins êµ¬ë™

```bash
# jdk ì„¤ì¹˜í•  ìˆ˜ ìˆëŠ” ë²„ì „ í™•ì¸
$ sudo yum list java-11-openjdk

# jdk ì„¤ì¹˜
$ sudo yum install java-11-openjdk.x86_64

# ê¸°ë³¸ ìë°” ì„ íƒ
$ sudo update-alternatives --config java

# JAVA_HOME êµ¬ì„±
$ sudo vi /etc/profile
# ë§¨ í•˜ë‹¨ì— ì•„ë˜ ëª…ë ¹ì–´ ì¶”ê°€
export JAVA_HOME=/usr/lib/jvm/java-11-openjdk-11.0.16.1.1-1.el7_9.x86_64 PATH=$PATH:$JAVA_HOME/bin export PATH

# ë³€ê²½ì‚¬í•­ ì ìš©
$ source /etc/profile

# path ì¶”ê°€
$ sudo vi /etc/init.d/jenkins
# ì•„ë˜ ë‘ ê°œ path ì¶”ê°€
/usr/lib/jvm/java-11-openjdk-11.0.16.1.1-1.el7_9.x86_64
/usr/lib/jvm/java-11-openjdk-11.0.16.1.1-1.el7_9.x86_64/bin/java

# wget ì„¤ì¹˜
$ sudo yum install wget -y

# MAVEN_HOME êµ¬ì„±
$ sudo vim /etc/profile
# ë§¨ í•˜ë‹¨ì— ì•„ë˜ ëª…ë ¹ì–´ ì¶”ê°€
export MAVEN_HOME=/usr/local/apple/Tools/apache-maven-3.6.3 PATH=$PATH:$JAVA_HOME/bin:$MAVEN_HOME/bin export PATH

# ë³€ê²½ì‚¬í•­ ì ìš©
source /etc/profile

# git ì„¤ì¹˜
sudo yum install git

# yum repository ì‚¬ìš©ì„ ìœ„í•´ public keyë¥¼ ë“±ë¡
$ sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo 
$ sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key

# jenkins ì„¤ì¹˜
$ sudo yum install jenkins

### gcp í™ˆì— ë‚˜ê°€ì„œ ë°©í™”ë²½ 9090 í¬íŠ¸ ì—´ê¸° ###

$ sudo vi /etc/sysconfig/jenkins # JENKINS_PORT="9090"
$ sudo vi /lib/systemd/system/jenkins.service # Environment="JENKINS_PORT=9090"

# ë°©í™”ë²½ ì„¤ì •
$ sudo firewall-cmd --permanent --zone=public --add-port=9090/tcp
$ sudo firewall-cmd --reload

# jenkins ì‹œì‘
$ sudo service jenkins start systemctl enable jenkins
# ë§Œì•½ì— ì‹œì‘ì´ ì•ˆëœë‹¤ë©´...
$ sudo chmod 755 /usr/lib/jvm
```

## 3) jenkins ì›¹ ë¸Œë¼ìš°ì € ì ‘ì†
ì ‘ì† ì£¼ì†ŒëŠ” `http://[jenkins ì¸ìŠ¤í„´ìŠ¤ ì™¸ë¶€ IP]:9090`ì´ë‹¤.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 8 05 40](https://user-images.githubusercontent.com/59405576/195580718-a0d7b223-48e6-4859-a21c-abbbdbabac75.png){: width="700" height="700"}<br><br>
ì´ì œ ìœ„ ì‚¬ì§„ì— ë‚˜ì˜¨ ê²½ë¡œì—ì„œ passwordë¥¼ ì•Œì•„ë‚´ì.
```bash
$ sudo cat /var/lib/jenkins/secrets/initialAdminPassword
```
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 8 10 51](https://user-images.githubusercontent.com/59405576/195581642-f13290cd-e092-40c6-83bb-8dd3662d2206.png){: width="500" height="500"}<br><br>
ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•œ ë’¤ì—ëŠ”, ë‚˜ì˜¤ëŠ” ìˆœì„œëŒ€ë¡œ ì •ë³´ë¥¼ ì…ë ¥í•˜ë©´ ëœë‹¤.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 8 16 27](https://user-images.githubusercontent.com/59405576/195582746-3176ea84-4f09-4ab4-90b0-a6b3df3d15c6.png){: width="500" height="500"}<br><br>
ì•„ë˜ URLì€ ë³€ê²½ ì—†ì´ ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°€ë©´ ëœë‹¤.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 8 16 47](https://user-images.githubusercontent.com/59405576/195582753-f00b2343-f699-49b3-83ea-44904af0ee9a.png){: width="500" height="500"}<br><br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 8 17 01](https://user-images.githubusercontent.com/59405576/195582760-de3a471e-1f92-486d-ac8c-a6a6b2ea95db.png){: width="300" height="300"}<br><br>
ì•„ë˜ì²˜ëŸ¼ ë‚˜ì˜¤ë©´ ì„¤ì •ì„ ë§ˆì¹œ ê²ƒì´ë‹¤!<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-10-13 á„‹á…©á„’á…® 8 37 11](https://user-images.githubusercontent.com/59405576/195586415-cd994a90-0cf5-42d6-aab7-2bbddcec5fa5.png)






***
<br>


    ğŸ’› ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ğŸ‘»

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}