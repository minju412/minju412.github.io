---
title:  "[GCP] GCP(Google Cloud Platform)에서 리눅스 생성하기"
# excerpt: "sprintf에 대해 알아보자"

categories:
  - GCP
tags:
  - [GCP]

toc: true
toc_sticky: true
 
date: 2022-10-12 18:59:51
last_modified_at: 2022-10-12 18:59:54
---

서버를 배포하던 중, AWS 프리티어의 사양이 부족해 원활하게 수행되지 않는 문제가 발생했다.<br>
같은 문제가 발생했다는 [글](https://blog.naver.com/PostView.naver?blogId=gmlwo308&logNo=222210877767&parentCategoryNo=&categoryNo=&viewDate=&isShowPopularPosts=false&from=postView)도 발견했다.<br>
따라서 GCP를 이용해보려고 한다.<br>
구글 클라우드에 가입하는 법은 [이 글](https://bluewins.tistory.com/entry/%EA%B5%AC%EA%B8%80%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C-GCP-%EA%B0%80%EC%9E%85%ED%95%B4%EC%84%9C-%EB%AC%B4%EB%A3%8C-%ED%81%AC%EB%A0%88%EB%94%A7-300-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0)을 참고하자.<br>

![스크린샷 2022-10-12 오후 7 24 55](https://user-images.githubusercontent.com/59405576/195318838-12747313-8868-4d6f-a3dd-96434a278ff6.png)

# 1. 리눅스 인스턴스 생성하기
> 전체적으로 [이 글](https://wings2pc.tistory.com/entry/%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C-GCPGoogle-Cloud-Platform-%EC%97%90%EC%84%9C-%EB%A6%AC%EB%88%85%EC%8A%A4-%EC%83%9D%EC%84%B1-%ED%95%98%EA%B8%B0)을 참고했으며, 무료 버전과 관련해서는 [이 글](https://wildeveloperetrain.tistory.com/154)을 참고했다.

- 리전: 사우스캐롤라이나(us-east1)
- 부팅 디스크<br>- 운영체제: Ubuntu<br>- 버전: Ubuntu 20.04 LTS<br>- 부팅 디스크 유형: 표준 영구 디스크<br>- 크기: 30
- 방화벽<br>- HTTP 트래픽 허용<br>- HTTPS 트래픽 허용

![스크린샷 2022-10-12 오후 7 32 52](https://user-images.githubusercontent.com/59405576/195320534-db81ed43-4ec9-43a5-ac43-fcb5d97cf820.png){: width="800" height="800"}<br><br>
![스크린샷 2022-10-12 오후 7 44 00](https://user-images.githubusercontent.com/59405576/195322841-db1078df-1edc-42a2-bcf6-981c6a7efe9d.png){: width="800" height="800"}<br><br>
![스크린샷 2022-10-12 오후 7 31 06](https://user-images.githubusercontent.com/59405576/195320329-a0b44bd0-8198-4516-86e9-0913abc14979.png){: width="500" height="500"}<br><br>

## 생성 완료
![스크린샷 2022-10-12 오후 7 50 48](https://user-images.githubusercontent.com/59405576/195324223-80b6683e-fe5a-4115-9364-834c95ee3a3a.png){: width="800" height="800"}<br><br>
"브라우저 창에서 열기"를 클릭하면 바로 ssh 접속을 할 수 있다.<br>
이제 인스턴스에 도커를 설치해보자.

> 참고<br>
무료 서버이기 때문에 과금의 우려는 없지만, 아래 이어지는 내용은 혹시나 과금이 발생했을 경우 메일로 알림을 받을 수 있도록 설정하는 부분입니다. 필요하신 분들만 참고해주시면 좋을 것 같습니다.<br>
[https://wildeveloperetrain.tistory.com/154](https://wildeveloperetrain.tistory.com/154)

### 1) 외부 IP 고정
1. 생성된 인스턴스에서 맨 오른쪽 점 세 개를 클릭한 뒤, [네트워크 세부정보 보기]를 클릭한다.<br>
![스크린샷 2022-10-12 오후 9 27 37](https://user-images.githubusercontent.com/59405576/195342418-4e08a46f-7ba5-4b6b-9754-52db6816b877.png){: width="200" height="200"}

2. [IP 주소 > 외부 IP 주소 > 외부 고정 주소 예약]을 클릭한다.<br>
![스크린샷 2022-10-12 오후 9 28 09](https://user-images.githubusercontent.com/59405576/195343021-6805ab8f-0c99-4517-878e-a68059e1daef.png){: width="800" height="800"}

3. 아래와 같이 연결 대상에 방금 만든 인스턴스를 지정한 뒤 [예약]을 클릭힌다.<br>
![스크린샷 2022-10-12 오후 9 30 04](https://user-images.githubusercontent.com/59405576/195343030-a5b05e0c-05c1-492d-8b12-cca77c15d9fe.png){: width="300" height="300"}

### 2) 방화벽
> [이 글](https://4whomtbts.tistory.com/90)을 참고했다.

포트를 열어주어야 한다<br>
![스크린샷 2022-10-12 오후 10 22 14](https://user-images.githubusercontent.com/59405576/195354132-e2bc6687-a055-4687-86b6-994ecaaba22e.png){: width="400" height="400"}<br>
위에 사진처럼 방화벽 규칙을 만든다.<br><br>
그리고 방금 만든 인스턴스에 적용까지 해주어야 한다!<br>
![스크린샷 2022-10-12 오후 10 25 23](https://user-images.githubusercontent.com/59405576/195354859-0c771c91-f2c8-4fe6-b754-6263336a18d1.png){: width="400" height="400"}


# 2. 인스턴스에 도커 설치하기
> [이 글](https://wings2pc.tistory.com/entry/%EB%8F%84%EC%BB%A4Docker-%EB%A6%AC%EB%88%85%EC%8A%A4linux%EC%97%90-%EB%8F%84%EC%BB%A4-%EC%84%A4%EC%B9%98%ED%81%B4%EB%9D%BC%EC%9A%B0%EB%93%9C-%ED%99%9C%EC%9A%A9)을 참고했다.


[](https://blog.dalso.org/google-cloud-platform-2/nas-project/8618)


```bash
$ sudo apt-get update

# 필수 패키지 설치
$ sudo apt-get install apt-transport-https ca-certificates curl gnupg-agent software-properties-common

# GCP Key 인증
$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -

# finger pring 확인
$ sudo apt-key fingerprint 0EBFCD88

# docker repository emdfhr
$ sudo add-apt-repository \
"deb [arch=amd64] https://download.docker.com/linux/ubuntu \
$(lsb_release -cs) \
stable"

# docker 설치
$ sudo apt-get update && sudo apt-get install docker-ce docker-ce-cli containerd.io

$ docker -v

$ sudo systemctl enable docker && service docker start

# 권한 부여
$ sudo usermod -aG docker $USER
```




# 3. spring boot 배포하기
> [이 글](https://wings2pc.tistory.com/entry/%EB%8F%84%EC%BB%A4Docker-Dockerfile%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%98%EC%97%AC-springboot-app-%EB%B0%B0%ED%8F%AC-%EB%B0%8F-GCP-%EB%B0%A9%ED%99%94%EB%B2%BD-%EC%84%A4%EC%A0%95)을 참고했다.














# Ref.





***
<br>


    💛 개인 공부 기록용 블로그입니다. 👻

[맨 위로 이동하기](#){: .btn .btn--primary }{: .align-right}