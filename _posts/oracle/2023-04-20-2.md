---
title:  "[Oracle] dockerë¡œ oracle ì‹¤í–‰í•˜ê¸° (with colima)"
# excerpt: "sprintfì— ëŒ€í•´ ì•Œì•„ë³´ì"

categories:
  - Oracle
tags:
  - [DataBase, Oracle, SqlPlus]

toc: true
toc_sticky: true
 
date: 2023-04-20 14:25:49
last_modified_at: 2023-04-20 14:25:52
---

# Oracle ì„¤ì¹˜ (with Colima)

> [ì´ ê¸€](https://shanepark.tistory.com/400)ê³¼ [ì´ ê¸€](https://king-ja.tistory.com/107)ì„ ì°¸ê³ í–ˆë‹¤.

Apple Siliconì—ì„œëŠ” ì•„í‚¤í…ì²˜ê°€ ë°”ë€Œì–´ì„œ orcale ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë„ìš¸ ìˆ˜ ì—†ì—ˆë‹¤.<br>
ê´€ë ¨ ì •ë³´ë¥¼ ì°¾ì•„ê°€ë©° ì‹œë„ í•´ë´¤ì§€ë§Œ sqlplus ì ‘ì† ì‹œ ì‚¬ìš©ì ì´ë¦„ê³¼ passwordë¥¼ ì…ë ¥í•˜ëŠ” ë‹¨ê³„ì—ì„œ ê³„ì† <br>
`ORA-01034: ORACLE not available`, `ORA-27101: shared memory realm does not exist` ë¼ëŠ” ì˜¤ë¥˜ë¥¼ ë§Œë‚¬ë‹¤.<br><br>
ëª‡ ì‹œê°„ì˜ ì‚½ì§ˆ ëì— ë°©ë²•ì„ ì°¾ì•˜ë‹¤..!<br>
ì˜¤í”ˆ ì†ŒìŠ¤ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ì¸ Colimaë¥¼ ì‚¬ìš©í•´ oci-oracle-xe ì´ë¯¸ì§€ë¥¼ x86/64 í™˜ê²½ìœ¼ë¡œ ë„ìš´ë‹¤ë©´, <br>
M1 ë§¥ë¶ì—ì„œë„ ì˜¤ë¼í´ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë„ìš¸ ìˆ˜ ìˆë‹¤ê³  í•œë‹¤!

## ë§¥ë¶ì—ì„œ Dockerë¡œ oracle DB ì„¤ì¹˜ (colima ì‚¬ìš©)
dockerê°€ ì•„ì§ ì„¤ì¹˜ë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´ ì„¤ì¹˜í•˜ê³ , <br>
ê¸°ì¡´ì— ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ìˆë‹¤ë©´ ì‹¤í–‰ì¤‘ì¸ Docker desktopì„ ì¢…ë£Œë§Œ í•˜ê³  ì•„ë˜ì˜ Colima ì‹¤í–‰ìœ¼ë¡œ ë„˜ì–´ê°€ì.<br>
(ë‚˜ëŠ” ì´ë¯¸ ì„¤ì¹˜ë˜ì–´ ìˆì—ˆê¸° ë•Œë¬¸ì— ì•„ë˜ ì‚¬ì§„ì²˜ëŸ¼ Docker desktopë§Œ Quit í–ˆë‹¤.)<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-04-20 á„‹á…©á„’á…® 3 36 32](https://user-images.githubusercontent.com/59405576/233279330-08979142-5545-491f-b30f-e6aa42eda3fc.png)<br><br>

```bash
# colima ì„¤ì¹˜
$ brew install colima

# colimaë¥¼ x86_64 í™˜ê²½ìœ¼ë¡œ ì‹¤í–‰ (Colimaë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  Docker Desktop í™˜ê²½ì—ì„œëŠ” oci-oracle-xe ì´ë¯¸ì§€ë¡œ ì»¨í…Œì´ë„ˆë¥¼ ë„ì› ì„ ë•Œ ì•„í‚¤í…ì²˜ê°€ ë‹¬ë¼ ë¬¸ì œê°€ ë˜ì—ˆì—ˆëŠ”ë°, ê·¸ê±¸ Colimaê°€ í•´ê²° í•´ ì¤ë‹ˆë‹¤.)
$ colima start --memory 4 --arch x86_64

# ì˜¤ë¼í´ ì»¨í…Œì´ë„ˆ êµ¬ë™ (ë¹„ë°€ë²ˆí˜¸ëŠ” ì›í•˜ëŠ”ê±¸ë¡œ ì„¤ì •)
# $ docker run --restart unless-stopped --name oracle -e ORACLE_PASSWORD=pass -p 1521:1521 -d jaspeen/oracle-xe-11g
# ìœ„ì— ì»¤ë§¨ë“œë¡œ í•˜ë‹ˆê¹Œ sql developerì—ì„œ passwordë¥¼ oracleë¡œ í•´ì•¼ì§€ ì„±ê³µí•œë‹¤...
$ docker run --restart unless-stopped --name oracle -e ORACLE_PASSWORD=pass -p 1521:1521 -d gvenzl/oracle-xe

# ì‹¤í–‰ ê²°ê³¼ ë° ë¡œê·¸ í™•ì¸
$ docker ps -a
$ docker logs -f oracle
```

ì‹¤í–‰ì¤‘<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-04-20 á„‹á…©á„’á…® 3 22 21](https://user-images.githubusercontent.com/59405576/233275968-0586a0e9-f70f-46a8-bcb6-a1cc8246f8b8.png)<br><br>

ì„±ê³µ í™”ë©´<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-04-20 á„‹á…©á„’á…® 3 22 31](https://user-images.githubusercontent.com/59405576/233275917-506cf276-bf2b-4b7b-b0e6-77c83135b986.png)

## Trouble Shooting
ì›ë˜ëŠ” colimaë¥¼ ì´ìš©í•˜ì§€ ì•Šê³  docker composeë§Œ ì´ìš©í•´ êµ¬ë™í•˜ë ¤ í–ˆë‹¤. (ê²°ë¡ ì ìœ¼ë¡œëŠ” ì‹¤íŒ¨í–ˆë‹¤..!ã…œ)

> [docker compose ì°¸ê³ ](https://jonghyeok-dev.tistory.com/56)

`docker-compose.yml`
```yml
version: '2'
services:
  database:
    container_name: oracle
    platform: linux/amd64
    # shm_size: 1G
    image: jaspeen/oracle-xe-11g
    # image: oracle/database:11.2.0.2-xe
    # environment:
    #   - ORACLE_SID=xe
      # - ORACLE_PDB=test
      # - ORACLE_PWD=test
    # volumes:
    #   - ./oracle/oradata:/opt/oracle/oradata # persistent oracle database data.
    #   - ./data-bridge:/data-bridge # just to have someplace to put data into the running container if needed
    #   - ./initscripts:/u01/app/oracle/scripts/startup # please here init scripts
    ports:
      - 1521:1521
      - 8080:8080
      # - 5500:5500
    networks:
      - dev
networks:
  dev:
    driver: bridge
```
ê·¸ë¦¬ê³  ì•„ë˜ ì»¤ë§¨ë“œë¥¼ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰í–ˆë‹¤.

```bash
$ docker-compose up -d
$ docker ps -a # ì—¬ê¸°ê¹Œì§€ëŠ” oracle ì»¨í…Œì´ë„ˆ ì •ìƒ êµ¬ë™
$ docker exec -it oracle sqlplus # ì—ëŸ¬ ë°œìƒ
```

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-04-20 á„‹á…©á„’á…® 2 26 38](https://user-images.githubusercontent.com/59405576/233266418-92c81088-f300-4aa9-941e-12bcde766d3f.png)<br>
í•˜ì§€ë§Œ ê³„ì†í•´ì„œ ìœ„ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤.. <br>
ì—ëŸ¬ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ startupì„ í•˜ë©´ ëœë‹¤ê³  í•´ì„œ ì•„ë˜ì²˜ëŸ¼ ì‹œë„í•´ë³´ì•˜ë‹¤.
```bash
$ docker exec -it oracle bin/bash
root@c3acdb41c5f6:/# sqlplus /nolog
SQL> conn sys/ as sysdba # Enter passwordê°€ ë‚˜ì˜¤ë©´ oracle ì…ë ¥
SQL> startup
```
í•˜ì§€ë§Œ `startup`ì„ ì…ë ¥í•˜ë‹ˆ `ORA-00443: background process "PMON" did not start`ë¼ëŠ” ë˜ë‹¤ë¥¸ ì—ëŸ¬ê°€ ë°œìƒí•˜ì—¬ ë‹¤ë¥¸ ë°©ë²•ì„ ì°¾ê¸°ë¡œ í–ˆë‹¤ã…œ

# SQL Developer ì„¤ì¹˜
> [ì´ ê¸€](https://eunoia3jy.tistory.com/88)ê³¼ [ì´ ê¸€](https://fomaios.tistory.com/entry/Oracle-Mac-OS%EC%97%90-SQL-Developer-%EC%84%A4%EC%B9%98%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95)ì„ ì°¸ê³ í–ˆë‹¤.

## SQL Developerë€?
SQL DeveloperëŠ” Oracleì—ì„œ ë¬´ë£Œë¡œ ì œê³µí•˜ëŠ” GUIíˆ´ì´ë‹¤.<br>
(ì½˜ì†”ì—ì„œ ì§ì ‘ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ í”„ë¡œê·¸ë¨ì„ í†µí•´ì„œ ì‰½ê²Œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì´ë‹¤.)

## ì„¤ì¹˜
[í™ˆí˜ì´ì§€](https://www.oracle.com/database/sqldeveloper/technologies/download/)ì—ì„œ OSì— ë§ëŠ” ì˜¤ë¼í´ì„ ë‹¤ìš´ë¡œë“œí•œë‹¤.<br>

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-04-20 á„‹á…©á„’á…® 3 17 09](https://user-images.githubusercontent.com/59405576/233274914-fd8e9cb4-e26c-43a1-9083-2219d272fe46.png)

## ì—°ê²°í…ŒìŠ¤íŠ¸
ìœ„ì—ì„œ ì„¤ì¹˜í•œ SQL Developerë¥¼ ì‹¤í–‰í•œ ë’¤ ì—°ê²°ì„ í…ŒìŠ¤íŠ¸í•´ë³´ì.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-04-20 á„‹á…©á„’á…® 3 26 01](https://user-images.githubusercontent.com/59405576/233276588-e0c4d658-7bd4-479d-b206-df2cba5871f1.png)<br>
- Nameì€ ì›í•˜ëŠ” ì´ë¦„
- ì‚¬ìš©ì ì´ë¦„ì€ `system`
- ë¹„ë°€ë²ˆí˜¸ëŠ” `pass` (ì•„ê¹Œ ìœ„ì—ì„œ ì˜µì…˜ìœ¼ë¡œ ì¤€ ê°’)
- SIDëŠ” `xe`

<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-04-20 á„‹á…©á„’á…® 3 26 58](https://user-images.githubusercontent.com/59405576/233276776-6e2368f2-9c2d-45f4-b9a6-189fd0222492.png)<br>
í…ŒìŠ¤íŠ¸ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ `ì„±ê³µ`ì´ë¼ê³  ëœ¬ë‹¤!<br>
ê·¸ë¦¬ê³  ì ‘ì† ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì•„ë˜ì²˜ëŸ¼ ì‹¤í–‰ëœë‹¤.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-04-20 á„‹á…©á„’á…® 3 28 44](https://user-images.githubusercontent.com/59405576/233277120-d329fb38-4829-4629-b798-8daba9c17fa9.png)


# ìƒ˜í”Œ ë°ì´í„° ìˆ˜ë™ ì„¤ì¹˜ - HR Schema
> [ì´ ê¸€](https://jhnyang.tistory.com/274)ì„ ì°¸ê³ í–ˆë‹¤.

í˜„ì¬ ì˜¤ë¼í´ì„ dockerë¡œ êµ¬ë™ì¤‘ì´ë‹¤.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-04-20 á„‹á…©á„’á…® 3 53 53](https://user-images.githubusercontent.com/59405576/233284677-808386aa-d7a8-4613-8647-7cff059b8264.png)<br><br>
sql plusë¥¼ ì‹¤í–‰í•˜ì—¬ ìƒ˜í”Œ ë°ì´í„°ë¥¼ ì„¤ì¹˜í•˜ì.

> [ìƒ˜í”Œ ë°ì´í„° ë‹¤ìš´](https://github.com/oracle-samples/db-sample-schemas/releases/tag/v19.2)

```bash
$ docker exec -it oracle sqlplus # oracle ìë¦¬ì—ëŠ” ì»¨í…Œì´ë„ ì´ë¦„
# user-nameì€ sys as sysdba, passwordëŠ” ê·¸ëƒ¥ ì—”í„° (user-nameì€ system, passwordëŠ” pass ë„ ê°€ëŠ¥í•˜ë‹¤!)

# ìœ ì € ìƒì„± ê°€ëŠ¥ (ê°•ì˜ 14:00)
SQL> alter session set "_ORACLE_SCRIPT"=true;
SQL> @?/demo/schema/human_resources/hr_main.sql
# 1ì˜ ê°’: hr
# 2ì˜ ê°’: users
# 3ì˜ ê°’: temp
# 4ì˜ ê°’: /product/21c/dbhomeXE/demo/schema/log/
```



=====
# docker compose ì´ìš©

```
docker exec -it oracle /bin/bash
```
product/21c/dbhomeXE/demo/schema/ -> ì´ ì•ˆì— log ì¡´ì¬<br>
í•˜ì§€ë§Œ `human_resoures`ê°€ ì—†ë‹¤!!<br><br>
ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë¡œì»¬ì—ì„œ ìƒ˜í”Œ ì½”ë“œë¥¼ ë”°ë¡œ ë‹¤ìš´ë°›ì€ í›„, <br>
Dockerfileì„ í†µí•´ ì»¨í…Œì´ë„ˆ ë‚´ë¶€ë¡œ ì˜®ê¸°ê³ ì í–ˆë‹¤.<br><br>
ì „ì²´ ë””ë ‰í„°ë¦¬ êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.
```
docker-files
â¿ oracle
 â¿ docker-compose.yml
 â¿ Dockerfile
 â¿ db-sample-schemas-19.2
```

`docker-compose.yml`
```yml
version: '2'
services:
  database:
    build:
      context: ./oracle/
      dockerfile: Dockerfile
    container_name: oracle
    platform: linux/amd64
    # image: gvenzl/oracle-xe
    restart: always
    environment:
      - ORACLE_PASSWORD=pass
    ports:
      - 1521:1521
    networks:
      - dev
networks:
  dev:
    driver: bridge
```


`Dockerfile`
```Dockerfile
FROM gvenzl/oracle-xe
ADD db-sample-schemas-19.2/human_resources $HOME/product/21c/dbhomeXE/demo/schema/human_resources
```

`db-sample-schemas-19.2`ëŠ” ìƒ˜í”Œ ë°ì´í„°ë“¤ì´ ë‹´ê¸´ ë””ë ‰í† ë¦¬ì´ë‹¤. <br>
ìƒ˜í”Œ ë°ì´í„°ëŠ” [ì—¬ê¸°](https://github.com/oracle-samples/db-sample-schemas/releases/tag/v19.2)ì„œ ë°›ì„ ìˆ˜ ìˆë‹¤.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-04-20 á„‹á…©á„’á…® 5 50 43](https://user-images.githubusercontent.com/59405576/233312936-16d84e94-69c2-434b-b640-46435036a66b.png)







***
<br>


    ğŸ’› ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ğŸ‘»

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}