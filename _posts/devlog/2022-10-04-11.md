---
title:  "EC2 + Jenkins를 이용해 CI/CD 구축하기 "

categories:
  - Devlog
tags:
  - [Devlog]

toc: true
toc_sticky: true
 
date: 2022-10-04 19:56:18
last_modified_at: 2022-10-04 19:56:21
---

# 1. Mac에서 Jenkins 설치하기
## 1) Jenkins 설치
brew를 통해 젠킨스를 설치한다.
```
$ brew install jenkins
```
젠킨스를 설치한다음 아래의 명령어로 젠킨스를 제어할 수 있다. start 명령어를 통해 젠킨스를 실행한다.
```
$ brew services start jenkins // 젠킨스 시작
$ brew services stop jenkins // 젠킨스 종료
$ brew services restart jenkins //젠킨스 재시작
```
<img width="458" alt="스크린샷 2022-10-04 오후 8 29 49" src="https://user-images.githubusercontent.com/59405576/193808908-393755d6-fb3b-46ad-84bc-ad452416d4be.png">

### 젠킨스(어드민화면) 포털 설정
젠킨스를 시작한 뒤에 `localhost:8080`에 접속하면, 아래와 같이 나온다.<br>
![스크린샷 2022-10-04 오후 8 28 33](https://user-images.githubusercontent.com/59405576/193808492-739715fb-e426-4166-87fe-09945cb56522.png)<br>
Administrator password를 입력하면 되는데,<br>
패스워드는 위 사진에 나와있는 경로에 있는 파일을 열어서 복사 후 입력하면 된다.
```
$ cat /Users/minju/.jenkins/secrets/initialAdminPassword
```
<img width="427" alt="스크린샷 2022-10-04 오후 8 31 08" src="https://user-images.githubusercontent.com/59405576/193809240-bd07e7ae-8b5e-4552-bd04-1ac686c8bfa8.png">

### 플러그인 설치 화면
패스워드를 입력 후 아래와 같이 플러그인 설치화면이 나오는데 특별히 설치할 플러그인이 필요없다면 install suggested plugins를 선택한다.<br>
![스크린샷 2022-10-04 오후 8 34 28](https://user-images.githubusercontent.com/59405576/193809678-4c6d076e-4f4a-45e7-8fe8-e2f405ee8826.png)<br>
그럼 아래처럼 Getting Started 페이지가 나올 것이다. 잠시 기다리자.<br>
![스크린샷 2022-10-04 오후 8 35 10](https://user-images.githubusercontent.com/59405576/193809804-f85b1777-f1f0-49f2-a0c3-cd6a18964d48.png)

### Admin 계정 생성
기다리면 이렇게 Admin 사용자를 생성하는 페이지가 나오는데, Admin 사용자를 생성하고 다음 화면을 누르면 Jenkins 화면이 보이는 것을 확인할 수 있다.<br>
![스크린샷 2022-10-04 오후 8 40 15](https://user-images.githubusercontent.com/59405576/193810618-7654bddd-cfca-495a-9128-a6247c1e3450.png)

### Instance Configuration
마지막으로 젠킨스의 TCP 포트를 앞으로도 계속 같은 포트를 쓸 것인지 물어본다.<br>
나는 9090으로 변경했다.<br>
![스크린샷 2022-10-04 오후 8 49 19](https://user-images.githubusercontent.com/59405576/193812147-63dff917-d33b-4a9a-9f6e-f81019259733.png)

### 끝
이제 설정이 끝났다. Start using Jenkins를 누르자.<br>
![스크린샷 2022-10-04 오후 8 51 42](https://user-images.githubusercontent.com/59405576/193812599-6d380d79-123e-4fcb-ad30-043c55eec549.png)<br>
그럼 아래와 같은 대시보드가 나온다.<br>
![스크린샷 2022-10-04 오후 8 52 56](https://user-images.githubusercontent.com/59405576/193812824-f32c2a1f-17e8-4b67-a223-3d50c82c80ed.png)

## 2) 외부 IP로 접근 가능하도록 설정
해당 Mac 호스트를 CI 전용 서버로 쓰는 경우 localhost:8080 이외의 도메인이나 공인IP, 외부 IP로 접속하기를 원할 수 있다. <br>
이럴경우 `/usr/local/opt/jenkins/homebrew.mxcl.jenkins.plist` 파일 --httpListenAddress 값을 <br>
127.0.0.1에서 아래와 같이 0.0.0.0으로 변경해야한다. 그래야 공인IP또는 사설 IP로 접근 가능하다.
```bash
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
  <dict>
    <key>Label</key>
    <string>homebrew.mxcl.jenkins</string>
    <key>ProgramArguments</key>
    <array>
      <string>/usr/libexec/java_home</string>
      <string>-v</string>
      <string>1.8</string>
      <string>--exec</string>
      <string>java</string>
      <string>-Dmail.smtp.starttls.enable=true</string>
      <string>-jar</string>
      <string>/usr/local/opt/jenkins/libexec/jenkins.war</string>
      <string>--httpListenAddress=0.0.0.0</string> 
      <string>--httpPort=8888</string>
    </array>
    <key>RunAtLoad</key>
    <true/>
  </dict>
</plist>
```

# 2. Jenkins SSH를 이용한 GitHub 연동방법



















## Ref.
- [https://velog.io/@sa1341/Jenkins-SSH%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-GitHub-%EC%97%B0%EB%8F%99%EB%B0%A9%EB%B2%95](https://velog.io/@sa1341/Jenkins-SSH%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%9C-GitHub-%EC%97%B0%EB%8F%99%EB%B0%A9%EB%B2%95)
- [https://wan-blog.tistory.com/74?category=776763](https://wan-blog.tistory.com/74?category=776763)
- [https://blog.naver.com/PostView.nhn?blogId=sharplee7&logNo=221429164857](https://blog.naver.com/PostView.nhn?blogId=sharplee7&logNo=221429164857) - 포트 번호


***
<br>


    💛 개인 공부 기록용 블로그입니다. 👻

[맨 위로 이동하기](#){: .btn .btn--primary }{: .align-right}