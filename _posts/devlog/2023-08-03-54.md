---
title:  "EC2ë¥¼ ì´ìš©í•œ Docker ë°°í¬ (with. Docker Hub)"
# excerpt: "sprintfì— ëŒ€í•´ ì•Œì•„ë³´ì"

categories:
  - Devlog
tags:
  - [Devlog]

toc: true
toc_sticky: true
 
date: 2023-08-03 17:53:45
last_modified_at: 2023-08-03 17:53:47
---

# ğŸ“Œ í”„ë¡œì íŠ¸ì—ì„œ
## 1) ì´ë¯¸ì§€ ë¹Œë“œ
```bash
$ ./gradlew build jar -x test # jar íŒŒì¼ ë¹Œë“œ

# docker build -t [dockerHub ID]/[ì´ë¯¸ì§€ëª…]:[íƒœê·¸ëª…] . # ë§¨ ë’¤ .ì€ [DockerFileìœ„ì¹˜]
# docker build -t [dockerHub ID]/[ì´ë¯¸ì§€ëª…] . # íƒœê·¸ lastestë¡œ ì§€ì •ë¨
$ docker-compose -f docker-compose.dev.yml build  # ì´ë¯¸ì§€ ë¹Œë“œ 
$ docker-image ls # ë„ì»¤ ì´ë¯¸ì§€ í™•ì¸ 
```

## 2) Docker hubë¡œ ì´ë¯¸ì§€ push
```bash
$ docker login -u ln8847 # í•´ë‹¹ ì»¤ë§¨ë“œ ì‹¤í–‰ í›„ Password ì…ë ¥.
$ docker push ln8847/[ìƒì„±í•œ ì´ë¯¸ì§€ ì´ë¦„]:[tag]
```


# ğŸ“Œ Ubuntu ì¸ìŠ¤í„´ìŠ¤ì—ì„œ

## 0) ì¸ìŠ¤í„´ìŠ¤ ìƒì„± í›„ ë³´ì•ˆê·¸ë£¹ ì—´ê¸°



## 1) Docker Engine ì„¤ì¹˜
> [ê³µì‹ ì‚¬ì´íŠ¸](https://docs.docker.com/engine/install/ubuntu/)ë¥¼ ì°¸ê³ í–ˆë‹¤.

### Repository ì„¤ì •
```bash
# apt-get ì—…ë°ì´íŠ¸
$ sudo apt-get update

$ sudo apt-get install \
ca-certificates \
curl \
gnupg \
lsb-release

$ sudo mkdir -p /etc/apt/keyrings

$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg

$ echo \
"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
$(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
```

### Docker Engine ì„¤ì¹˜ ë° ì‹¤í–‰
```bash
$ sudo apt-get update

# ì„¤ì¹˜
$ sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin

# ë„ì»¤ ì‹¤í–‰
$ sudo service docker start

# ìƒíƒœ í™•ì¸
$ sudo service docker status
```

### ê¶Œí•œ ì„¤ì •
linuxì—ì„œ root ê¶Œí•œì´ ì•„ë‹Œ ìƒíƒœë¡œ dockerë¥¼ ì‹¤í–‰í•˜ë©´ ê¶Œí•œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤.
```
[linux@localhost ]$ docker ps
Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get http://%2Fvar%2Frun%2Fdocker.sock/v1.40/containers/json: dial unix /var/run/docker.sock: connect: permi
ssion denied
```
ì´ëŸ° ê²½ìš° ë§¤ë²ˆ sudoë¡œ ì»¤ë§¨ë“œë¥¼ ì‹¤í–‰í•´ë„ ë˜ì§€ë§Œ, ë²ˆê±°ë¡­ê¸° ë•Œë¬¸ì— docker groupì— í•´ë‹¹ ìœ ì €ë¥¼ ì¶”ê°€í•´ì£¼ë©´ í•´ê²°í•  ìˆ˜ ìˆë‹¤.<br>
```bash
# ë³´í†µì€ docker groupì´ ìƒê²¼ì„í…Œì§€ë§Œ, ë§Œì•½ ì—†ìœ¼ë©´ ìƒì„±í•´ì¤€ë‹¤.
$ sudo groupadd docker

# docker groupì— í•´ë‹¹ ìœ ì €ë¥¼ ì¶”ê°€
$ sudo usermod -aG docker $USER

# ë¡œê·¸ì•„ì›ƒ í›„ ë‹¤ì‹œ ë¡œê·¸ì¸í•˜ê±°ë‚˜ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰ì‹œì¼œì•¼ ì ìš©ì´ ëœë‹¤.
$ newgrp docker
```


## 2) ë„ì»¤ ì»´í¬ì¦ˆ ì„¤ì¹˜

```bash
$ sudo apt  install docker-compose
$ docker-compose --version
```

## ğŸ’¥ ë§Œì•½ ìœ„ ë°©ë²•ìœ¼ë¡œ ë„ì»¤ ì»´í¬ì¦ˆë¥¼ ì„¤ì¹˜í•˜ê³  ë²„ì „ì„ í™•ì¸í–ˆì„ ë•Œ `build unknown`ì´ ë‚˜ì˜¨ë‹¤ë©´?
> [ì´ ê¸€](https://velog.io/@dailylifecoding/ubuntu-20.04-docker-and-dockercompose-install) ì°¸ê³ 

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-06-05 á„‹á…©á„’á…® 6 38 36](https://github.com/minju412/jenkins-test/assets/59405576/706400d2-1be3-4fce-8d07-c469c58128a7)

```bash
$ sudo apt remove docker-compose # ì´ì „ì— ì„¤ì¹˜í•œ docker-composeë¥¼ ì œê±°

$ sudo curl -L "https://github.com/docker/compose/releases/download/v2.5.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/bin/docker-compose
# ì´ ëª…ë ¹ì–´ëŠ” ì™¸ë¶€ì—ì„œ ê·¸ëŒ€ë¡œ íŒŒì¼ì„ ê°€ì ¸ì™€ì„œ í˜„ì¬ì˜ ì‹œìŠ¤í…œì— ì˜¬ë ¤ ë†“ëŠ” ê²ƒì´ë‹¤.
# ê²°ê³¼ì ìœ¼ë¡œ "/usr/bin/" ê²½ë¡œì— "docker-compose" ë¼ëŠ” ì´ë¦„ì˜ íŒŒì¼ë¡œ ë‹¤ìš´ëœë‹¤.
# ì°¸ê³ ) https://github.com/docker/compose/releases ì—ì„œ ìµœì‹  ë²„ì „ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤.
# ìµœì‹  ë²„ì „ì„ ì„¤ì¹˜í•˜ê³  ì‹¶ë‹¤ë©´ ìœ„ ëª…ë ¹ì–´ì— ë³´ì´ëŠ” 1.28.5 ë¼ëŠ” ë²„ì „ ìˆ«ìë¥¼ ë°”ê¿”ì£¼ë©´ ëœë‹¤!

$ sudo chmod +x /usr/bin/docker-compose # chmod ë¥¼ í†µí•´ì„œ ì‹¤í–‰ì´ ê°€ëŠ¥í•˜ê²Œ ì„¸íŒ…

$ docker-compose --version
```
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-06-05 á„‹á…©á„’á…® 6 42 40](https://github.com/minju412/jenkins-test/assets/59405576/ad5fa9b1-c856-4e0d-927e-21664f91821c)




## 3) ë°°í¬ (=ì»¨í…Œì´ë„ˆ ì‹¤í–‰)
```bash
$ docker run -d -p 8080:8080 ln8847/boot-prac # pullê¹Œì§€ ë°›ì•„ì˜¨ë‹¤
```





***
<br>


    ğŸ’› ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ğŸ‘»

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}