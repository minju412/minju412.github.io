---
title:  "[SonarQube] ì†Œë‚˜íë¸Œë¥¼ í†µí•œ ì½”ë“œ ì •ì  ë¶„ì„ ë° ì½”ë“œ í’ˆì§ˆ í–¥ìƒ "

categories:
  - Devlog
tags:
  - [Devlog]

toc: true
toc_sticky: true
 
date: 2023-03-20 18:30:23
last_modified_at: 2023-03-20 18:30:27
---

ì†Œë‚˜íë¸Œë¥¼ ì´ìš©í•´ ì½”ë“œ ì •ì  ë¶„ì„ì„ ì‹¤ì‹œí•˜ì˜€ë‹¤.<br>
ì•„ë˜ì™€ ê°™ì´ ìˆ˜ë§ì€ Code Smellê³¼ Bug ë˜í•œ ë°œê²¬ë˜ì—ˆë‹¤.<br>
![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2023-03-20 á„‹á…©á„’á…® 6 31 43](https://user-images.githubusercontent.com/59405576/226299752-7a284e45-0c64-43a8-9789-27dded41b866.png)<br><br>
ì´ì œë¶€í„° ì½”ë“œë¥¼ ìˆ˜ì •í•˜ë©´ì„œ ê¸°ì–µì— ë‚¨ëŠ” ê²ƒ ìœ„ì£¼ë¡œ ê¸°ë¡í•˜ë ¤ í•œë‹¤.

## [Bug] A "NullPointerException" could be thrown; "pet" is nullable here.

ê¸°ì¡´
```java
private Pet findPet(Pet reqPet, User user) {
  Pet pet = null;
  if (reqPet != null) {
      pet = petRepository.findByPetNameAndOwner(reqPet.getPetName(), user)
              .orElseThrow(() -> new CustomException(PET_NOT_FOUND));
  }
  return pet;
}
```

ë³€ê²½
```java
private Pet findPet(Pet reqPet, User user) {
  return petRepository.findByPetNameAndOwner(reqPet.getPetName(), user)
              .orElseThrow(() -> new CustomException(PET_NOT_FOUND));
}
```
`reqPet` ìë¦¬ì—ëŠ” `protectionEndReqDto.getPet()`ê°€ ë“¤ì–´ì˜¤ëŠ”ë°, <br>
í•´ë‹¹ DtoëŠ” `@NotNull(message = "ëŒ€ìƒ ë™ë¬¼ì€ í•„ìˆ˜ ì„ íƒ ê°’ì…ë‹ˆë‹¤.")` ì²˜ë¦¬ë¥¼ í•´ë†“ì•˜ìœ¼ë¯€ë¡œ, <br>
ë§Œì•½ `Pet`ì— ê°’ì´ ì—†ë‹¤ë©´ ì»¨íŠ¸ë¡¤ëŸ¬ì—ì„œ `@Valid`ì— ê±¸ë ¤ ì„œë¹„ìŠ¤ ë‹¨ìœ¼ë¡œ ë„˜ì–´ì˜¤ì§€ ëª»í•  ê²ƒì´ë‹¤.<br><br>
ë”°ë¼ì„œ `pet`ì— ë¯¸ë¦¬ nullì„ ë„£ì–´ë‘ê³  ì¡°ê±´ë¬¸ì„ í†µí•´ ê°’ì„ ëŒ€ì…í•  í•„ìš” ì—†ì´, ë°”ë¡œ ê°’ì„ ëŒ€ì…í•˜ë„ë¡ ë³€ê²½í•˜ì˜€ë‹¤.


## [Code Smell] Rename this variable to not match a restricted identifier.

ê¸°ì¡´
```java
Record record = Record.createRecord(pet,StampType.WALK, walkDiaries);
```

ë³€ê²½
```java
Record walkRecord = Record.createRecord(pet,StampType.WALK, walkDiaries);
```

`record`ê°€ ì œí•œëœ ì‹ë³„ìë¼ `walkRecord`ë¡œ ë³€ê²½í•˜ì˜€ë‹¤.

## [Code Smell] Merge this if statement with the enclosing one.
ê¸°ì¡´
```java
if (updateRequestDto.getStamps() != null) {
  if (!oldDiaryStamps.isEmpty()) {
    DiaryStamp.removeDiaryStamp(oldDiaryStamps);
    stampRepository.deleteAll(oldStamps);
  }
}
```

ë³€ê²½
```java
if (updateRequestDto.getStamps() != null && !oldDiaryStamps.isEmpty()) {
    DiaryStamp.removeDiaryStamp(oldDiaryStamps);
    stampRepository.deleteAll(oldStamps);
}
```

## 


















***
<br>


    ğŸ’› ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ğŸ‘»

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}