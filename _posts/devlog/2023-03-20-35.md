---
title:  "[Docker] ë„ì»¤ ëŸ°íƒ€ì„ì— Profile ì ìš©í•˜ê¸°"

categories:
  - Devlog
tags:
  - [Devlog]

toc: true
toc_sticky: true
 
date: 2023-03-20 16:04:13
last_modified_at: 2023-03-20 16:04:16
---

> [ì´ ê¸€](https://cubenuri.tistory.com/417)ì„ ì°¸ê³ í–ˆë‹¤.


# Spring Boot í”„ë¡œì íŠ¸ êµ¬ì„±
## `application.yml`
```yml
spring:
  profiles.active: dev # âœ… ë¡œì»¬ì—ì„œ ì‹¤í–‰ì‹œ ê¸°ë³¸ í”„ë¡œí•„ì€ dev
  jpa:
    hibernate:
      ddl-auto: update
    properties:
      hibernate:
        globally_quoted_identifiers: true
        format_sql: true
        dialect: org.hibernate.dialect.MySQL8Dialect
  mvc:
    pathmatch:
      matching-strategy: ant_path_matcher
  data:
    web:
      pageable:
        default-page-size: 5
  servlet:
    multipart:
      max-file-size: 3MB # ì—…ë¡œë“œ íŒŒì¼ í¬ê¸° ì œí•œ
      max-request-size: 5MB # ì—…ë¡œë“œ íŒŒì¼ í¬ê¸° ì´ëŸ‰ ì œí•œ
  config:
    import:
      - aws-s3.yml

logging.level:
  org.hibernate.SQL: debug

---

spring:
  config.activate.on-profile: prod # âœ… prod

---

spring:
  config.activate.on-profile: dev # âœ… dev
  datasource:
    url: jdbc:mysql://127.0.0.1:3306/dasibom-prac?serverTimezone=UTC&characterEncoding=UTF-8&useSSL=false&allowPublicKeyRetrieval=true
    username: admin
    password: admin
```
ë¡œì»¬ì—ì„œ ì‹¤í–‰í•˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ dev í”„ë¡œí•„ì´ ì ìš©ë˜ë¯€ë¡œ ë¡œì»¬ dbë¥¼ ì´ìš©í•œë‹¤.<br>
`prod` í™˜ê²½ì—ì„œëŠ” mysql ì»¨í…Œì´ë„ˆë¥¼ ì´ìš©í•˜ê¸° ë•Œë¬¸ì— `datasource`ë¥¼ ì„¤ì •í•˜ì§€ ì•Šì•˜ë‹¤.

## `Dockerfile`
```Dockerfile
FROM eclipse-temurin:11-jdk
VOLUME /tmp
ARG JAR_FILE=./build/libs/practice-0.0.1-SNAPSHOT.jar
COPY ${JAR_FILE} app.jar
ENTRYPOINT ["java","-Dspring.profiles.active=prod","-jar","/app.jar"] # âœ… í”„ë¡œí•„ì„ prodë¡œ ì„¤ì •í•´ì¤€ë‹¤.
EXPOSE 8080
```
















***
<br>


    ğŸ’› ê°œì¸ ê³µë¶€ ê¸°ë¡ìš© ë¸”ë¡œê·¸ì…ë‹ˆë‹¤. ğŸ‘»

[ë§¨ ìœ„ë¡œ ì´ë™í•˜ê¸°](#){: .btn .btn--primary }{: .align-right}